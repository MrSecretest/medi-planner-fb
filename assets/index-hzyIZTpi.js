function BL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Sx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wy={exports:{}},kc={},Hy={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function UL(){if(gS)return Ne;gS=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,I={};function x(W,Z,ve){this.props=W,this.context=Z,this.refs=I,this.updater=ve||T}x.prototype.isReactComponent={},x.prototype.setState=function(W,Z){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Z,"setState")},x.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function k(){}k.prototype=x.prototype;function F(W,Z,ve){this.props=W,this.context=Z,this.refs=I,this.updater=ve||T}var V=F.prototype=new k;V.constructor=F,S(V,x.prototype),V.isPureReactComponent=!0;var z=Array.isArray,j=Object.prototype.hasOwnProperty,Y={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(W,Z,ve){var be,De={},$e=null,qe=null;if(Z!=null)for(be in Z.ref!==void 0&&(qe=Z.ref),Z.key!==void 0&&($e=""+Z.key),Z)j.call(Z,be)&&!D.hasOwnProperty(be)&&(De[be]=Z[be]);var Qe=arguments.length-2;if(Qe===1)De.children=ve;else if(1<Qe){for(var ot=Array(Qe),Qt=0;Qt<Qe;Qt++)ot[Qt]=arguments[Qt+2];De.children=ot}if(W&&W.defaultProps)for(be in Qe=W.defaultProps,Qe)De[be]===void 0&&(De[be]=Qe[be]);return{$$typeof:t,type:W,key:$e,ref:qe,props:De,_owner:Y.current}}function b(W,Z){return{$$typeof:t,type:W.type,key:Z,ref:W.ref,props:W.props,_owner:W._owner}}function E(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function M(W){var Z={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ve){return Z[ve]})}var $=/\/+/g;function N(W,Z){return typeof W=="object"&&W!==null&&W.key!=null?M(""+W.key):Z.toString(36)}function Re(W,Z,ve,be,De){var $e=typeof W;($e==="undefined"||$e==="boolean")&&(W=null);var qe=!1;if(W===null)qe=!0;else switch($e){case"string":case"number":qe=!0;break;case"object":switch(W.$$typeof){case t:case e:qe=!0}}if(qe)return qe=W,De=De(qe),W=be===""?"."+N(qe,0):be,z(De)?(ve="",W!=null&&(ve=W.replace($,"$&/")+"/"),Re(De,Z,ve,"",function(Qt){return Qt})):De!=null&&(E(De)&&(De=b(De,ve+(!De.key||qe&&qe.key===De.key?"":(""+De.key).replace($,"$&/")+"/")+W)),Z.push(De)),1;if(qe=0,be=be===""?".":be+":",z(W))for(var Qe=0;Qe<W.length;Qe++){$e=W[Qe];var ot=be+N($e,Qe);qe+=Re($e,Z,ve,ot,De)}else if(ot=y(W),typeof ot=="function")for(W=ot.call(W),Qe=0;!($e=W.next()).done;)$e=$e.value,ot=be+N($e,Qe++),qe+=Re($e,Z,ve,ot,De);else if($e==="object")throw Z=String(W),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return qe}function Je(W,Z,ve){if(W==null)return W;var be=[],De=0;return Re(W,be,"","",function($e){return Z.call(ve,$e,De++)}),be}function ft(W){if(W._status===-1){var Z=W._result;Z=Z(),Z.then(function(ve){(W._status===0||W._status===-1)&&(W._status=1,W._result=ve)},function(ve){(W._status===0||W._status===-1)&&(W._status=2,W._result=ve)}),W._status===-1&&(W._status=0,W._result=Z)}if(W._status===1)return W._result.default;throw W._result}var pe={current:null},ne={transition:null},ge={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Y};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Je,forEach:function(W,Z,ve){Je(W,function(){Z.apply(this,arguments)},ve)},count:function(W){var Z=0;return Je(W,function(){Z++}),Z},toArray:function(W){return Je(W,function(Z){return Z})||[]},only:function(W){if(!E(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Ne.Component=x,Ne.Fragment=n,Ne.Profiler=i,Ne.PureComponent=F,Ne.StrictMode=r,Ne.Suspense=c,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ne.act=le,Ne.cloneElement=function(W,Z,ve){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var be=S({},W.props),De=W.key,$e=W.ref,qe=W._owner;if(Z!=null){if(Z.ref!==void 0&&($e=Z.ref,qe=Y.current),Z.key!==void 0&&(De=""+Z.key),W.type&&W.type.defaultProps)var Qe=W.type.defaultProps;for(ot in Z)j.call(Z,ot)&&!D.hasOwnProperty(ot)&&(be[ot]=Z[ot]===void 0&&Qe!==void 0?Qe[ot]:Z[ot])}var ot=arguments.length-2;if(ot===1)be.children=ve;else if(1<ot){Qe=Array(ot);for(var Qt=0;Qt<ot;Qt++)Qe[Qt]=arguments[Qt+2];be.children=Qe}return{$$typeof:t,type:W.type,key:De,ref:$e,props:be,_owner:qe}},Ne.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:s,_context:W},W.Consumer=W},Ne.createElement=A,Ne.createFactory=function(W){var Z=A.bind(null,W);return Z.type=W,Z},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(W){return{$$typeof:u,render:W}},Ne.isValidElement=E,Ne.lazy=function(W){return{$$typeof:m,_payload:{_status:-1,_result:W},_init:ft}},Ne.memo=function(W,Z){return{$$typeof:d,type:W,compare:Z===void 0?null:Z}},Ne.startTransition=function(W){var Z=ne.transition;ne.transition={};try{W()}finally{ne.transition=Z}},Ne.unstable_act=le,Ne.useCallback=function(W,Z){return pe.current.useCallback(W,Z)},Ne.useContext=function(W){return pe.current.useContext(W)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(W){return pe.current.useDeferredValue(W)},Ne.useEffect=function(W,Z){return pe.current.useEffect(W,Z)},Ne.useId=function(){return pe.current.useId()},Ne.useImperativeHandle=function(W,Z,ve){return pe.current.useImperativeHandle(W,Z,ve)},Ne.useInsertionEffect=function(W,Z){return pe.current.useInsertionEffect(W,Z)},Ne.useLayoutEffect=function(W,Z){return pe.current.useLayoutEffect(W,Z)},Ne.useMemo=function(W,Z){return pe.current.useMemo(W,Z)},Ne.useReducer=function(W,Z,ve){return pe.current.useReducer(W,Z,ve)},Ne.useRef=function(W){return pe.current.useRef(W)},Ne.useState=function(W){return pe.current.useState(W)},Ne.useSyncExternalStore=function(W,Z,ve){return pe.current.useSyncExternalStore(W,Z,ve)},Ne.useTransition=function(){return pe.current.useTransition()},Ne.version="18.3.1",Ne}var yS;function E_(){return yS||(yS=1,Hy.exports=UL()),Hy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vS;function jL(){if(vS)return kc;vS=1;var t=E_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,d){var m,g={},y=null,T=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(T=c.ref);for(m in c)r.call(c,m)&&!s.hasOwnProperty(m)&&(g[m]=c[m]);if(u&&u.defaultProps)for(m in c=u.defaultProps,c)g[m]===void 0&&(g[m]=c[m]);return{$$typeof:e,type:u,key:y,ref:T,props:g,_owner:i.current}}return kc.Fragment=n,kc.jsx=a,kc.jsxs=a,kc}var _S;function zL(){return _S||(_S=1,Wy.exports=jL()),Wy.exports}var Q=zL(),O=E_();const WL=Sx(O),wS=BL({__proto__:null,default:WL},[O]);var Lf={},Gy={exports:{}},jn={},Ky={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function HL(){return TS||(TS=1,function(t){function e(ne,ge){var le=ne.length;ne.push(ge);e:for(;0<le;){var W=le-1>>>1,Z=ne[W];if(0<i(Z,ge))ne[W]=ge,ne[le]=Z,le=W;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ge=ne[0],le=ne.pop();if(le!==ge){ne[0]=le;e:for(var W=0,Z=ne.length,ve=Z>>>1;W<ve;){var be=2*(W+1)-1,De=ne[be],$e=be+1,qe=ne[$e];if(0>i(De,le))$e<Z&&0>i(qe,De)?(ne[W]=qe,ne[$e]=le,W=$e):(ne[W]=De,ne[be]=le,W=be);else if($e<Z&&0>i(qe,le))ne[W]=qe,ne[$e]=le,W=$e;else break e}}return ge}function i(ne,ge){var le=ne.sortIndex-ge.sortIndex;return le!==0?le:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],d=[],m=1,g=null,y=3,T=!1,S=!1,I=!1,x=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(ne){for(var ge=n(d);ge!==null;){if(ge.callback===null)r(d);else if(ge.startTime<=ne)r(d),ge.sortIndex=ge.expirationTime,e(c,ge);else break;ge=n(d)}}function z(ne){if(I=!1,V(ne),!S)if(n(c)!==null)S=!0,ft(j);else{var ge=n(d);ge!==null&&pe(z,ge.startTime-ne)}}function j(ne,ge){S=!1,I&&(I=!1,k(A),A=-1),T=!0;var le=y;try{for(V(ge),g=n(c);g!==null&&(!(g.expirationTime>ge)||ne&&!M());){var W=g.callback;if(typeof W=="function"){g.callback=null,y=g.priorityLevel;var Z=W(g.expirationTime<=ge);ge=t.unstable_now(),typeof Z=="function"?g.callback=Z:g===n(c)&&r(c),V(ge)}else r(c);g=n(c)}if(g!==null)var ve=!0;else{var be=n(d);be!==null&&pe(z,be.startTime-ge),ve=!1}return ve}finally{g=null,y=le,T=!1}}var Y=!1,D=null,A=-1,b=5,E=-1;function M(){return!(t.unstable_now()-E<b)}function $(){if(D!==null){var ne=t.unstable_now();E=ne;var ge=!0;try{ge=D(!0,ne)}finally{ge?N():(Y=!1,D=null)}}else Y=!1}var N;if(typeof F=="function")N=function(){F($)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Je=Re.port2;Re.port1.onmessage=$,N=function(){Je.postMessage(null)}}else N=function(){x($,0)};function ft(ne){D=ne,Y||(Y=!0,N())}function pe(ne,ge){A=x(function(){ne(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,ft(j))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ne){switch(y){case 1:case 2:case 3:var ge=3;break;default:ge=y}var le=y;y=ge;try{return ne()}finally{y=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var le=y;y=ne;try{return ge()}finally{y=le}},t.unstable_scheduleCallback=function(ne,ge,le){var W=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?W+le:W):le=W,ne){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=le+Z,ne={id:m++,callback:ge,priorityLevel:ne,startTime:le,expirationTime:Z,sortIndex:-1},le>W?(ne.sortIndex=le,e(d,ne),n(c)===null&&ne===n(d)&&(I?(k(A),A=-1):I=!0,pe(z,le-W))):(ne.sortIndex=Z,e(c,ne),S||T||(S=!0,ft(j))),ne},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ne){var ge=y;return function(){var le=y;y=ge;try{return ne.apply(this,arguments)}finally{y=le}}}}(qy)),qy}var ES;function GL(){return ES||(ES=1,Ky.exports=HL()),Ky.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS;function KL(){if(SS)return jn;SS=1;var t=E_(),e=GL();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(o){return c.call(g,o)?!0:c.call(m,o)?!1:d.test(o)?g[o]=!0:(m[o]=!0,!1)}function T(o,l,h,p){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,l,h,p){if(l===null||typeof l>"u"||T(o,l,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function I(o,l,h,p,v,w,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=w,this.removeEmptyString=P}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){x[o]=new I(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];x[l]=new I(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){x[o]=new I(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){x[o]=new I(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){x[o]=new I(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){x[o]=new I(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){x[o]=new I(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){x[o]=new I(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){x[o]=new I(o,5,!1,o.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function F(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(k,F);x[l]=new I(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(k,F);x[l]=new I(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(k,F);x[l]=new I(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){x[o]=new I(o,1,!1,o.toLowerCase(),null,!1,!1)}),x.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){x[o]=new I(o,1,!1,o.toLowerCase(),null,!0,!0)});function V(o,l,h,p){var v=x.hasOwnProperty(l)?x[l]:null;(v!==null?v.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,h,v,p)&&(h=null),p||v===null?y(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):v.mustUseProperty?o[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,p=v.attributeNamespace,h===null?o.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?o.setAttributeNS(p,l,h):o.setAttribute(l,h))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),Y=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ge(o){return o===null||typeof o!="object"?null:(o=ne&&o[ne]||o["@@iterator"],typeof o=="function"?o:null)}var le=Object.assign,W;function Z(o){if(W===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+o}var ve=!1;function be(o,l){if(!o||ve)return"";ve=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(q){var p=q}Reflect.construct(o,[],l)}else{try{l.call()}catch(q){p=q}o.call(l.prototype)}else{try{throw Error()}catch(q){p=q}o()}}catch(q){if(q&&p&&typeof q.stack=="string"){for(var v=q.stack.split(`
`),w=p.stack.split(`
`),P=v.length-1,L=w.length-1;1<=P&&0<=L&&v[P]!==w[L];)L--;for(;1<=P&&0<=L;P--,L--)if(v[P]!==w[L]){if(P!==1||L!==1)do if(P--,L--,0>L||v[P]!==w[L]){var B=`
`+v[P].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=P&&0<=L);break}}}finally{ve=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?Z(o):""}function De(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=be(o.type,!1),o;case 11:return o=be(o.type.render,!1),o;case 1:return o=be(o.type,!0),o;default:return""}}function $e(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case Y:return"Portal";case b:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case Re:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case M:return(o.displayName||"Context")+".Consumer";case E:return(o._context.displayName||"Context")+".Provider";case $:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Je:return l=o.displayName||null,l!==null?l:$e(o.type)||"Memo";case ft:l=o._payload,o=o._init;try{return $e(o(l))}catch{}}return null}function qe(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(l);case 8:return l===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Qe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ot(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qt(o){var l=ot(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(P){p=""+P,w.call(this,P)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(P){p=""+P},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Ei(o){o._valueTracker||(o._valueTracker=Qt(o))}function Da(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return o&&(p=ot(o)?o.checked?"true":"false":o.value),o=p,o!==h?(l.setValue(o),!0):!1}function vs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Co(o,l){var h=l.checked;return le({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Na(o,l){var h=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;h=Qe(l.value!=null?l.value:h),o._wrapperState={initialChecked:p,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Lu(o,l){l=l.checked,l!=null&&V(o,"checked",l,!1)}function Vu(o,l){Lu(o,l);var h=Qe(l.value),p=l.type;if(h!=null)p==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ma(o,l.type,h):l.hasOwnProperty("defaultValue")&&Ma(o,l.type,Qe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function wd(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Ma(o,l,h){(l!=="number"||vs(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var Si=Array.isArray;function Ci(o,l,h,p){if(o=o.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<o.length;h++)v=l.hasOwnProperty("$"+o[h].value),o[h].selected!==v&&(o[h].selected=v),v&&p&&(o[h].defaultSelected=!0)}else{for(h=""+Qe(h),l=null,v=0;v<o.length;v++){if(o[v].value===h){o[v].selected=!0,p&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function Fu(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Oa(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(Si(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:Qe(h)}}function La(o,l){var h=Qe(l.value),p=Qe(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),p!=null&&(o.defaultValue=""+p)}function $u(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Bt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Bt(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ii,Bu=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,p,v){MSApp.execUnsafeLocalFunction(function(){return o(l,h,p,v)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ii=Ii||document.createElement("div"),Ii.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ii.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function _s(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Po=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(o){Po.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Io[l]=Io[o]})});function Uu(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Io.hasOwnProperty(o)&&Io[o]?(""+l).trim():l+"px"}function ju(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=Uu(h,l[h],p);h==="float"&&(h="cssFloat"),p?o.setProperty(h,v):o[h]=v}}var zu=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wu(o,l){if(l){if(zu[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Hu(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ao=null;function Va(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Fa=null,ur=null,qr=null;function $a(o){if(o=mc(o)){if(typeof Fa!="function")throw Error(n(280));var l=o.stateNode;l&&(l=Yd(l),Fa(o.stateNode,o.type,l))}}function Qr(o){ur?qr?qr.push(o):qr=[o]:ur=o}function Gu(){if(ur){var o=ur,l=qr;if(qr=ur=null,$a(o),l)for(o=0;o<l.length;o++)$a(l[o])}}function xo(o,l){return o(l)}function Ku(){}var Pi=!1;function qu(o,l,h){if(Pi)return o(l,h);Pi=!0;try{return xo(o,l,h)}finally{Pi=!1,(ur!==null||qr!==null)&&(Ku(),Gu())}}function kt(o,l){var h=o.stateNode;if(h===null)return null;var p=Yd(h);if(p===null)return null;h=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var Ba=!1;if(u)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Ba=!1}function Ro(o,l,h,p,v,w,P,L,B){var q=Array.prototype.slice.call(arguments,3);try{l.apply(h,q)}catch(re){this.onError(re)}}var ko=!1,Ua=null,xr=!1,Qu=null,vg={onError:function(o){ko=!0,Ua=o}};function ja(o,l,h,p,v,w,P,L,B){ko=!1,Ua=null,Ro.apply(vg,arguments)}function Td(o,l,h,p,v,w,P,L,B){if(ja.apply(this,arguments),ko){if(ko){var q=Ua;ko=!1,Ua=null}else throw Error(n(198));xr||(xr=!0,Qu=q)}}function Rr(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function bo(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function kr(o){if(Rr(o)!==o)throw Error(n(188))}function Ed(o){var l=o.alternate;if(!l){if(l=Rr(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,p=l;;){var v=h.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===h)return kr(v),o;if(w===p)return kr(v),l;w=w.sibling}throw Error(n(188))}if(h.return!==p.return)h=v,p=w;else{for(var P=!1,L=v.child;L;){if(L===h){P=!0,h=v,p=w;break}if(L===p){P=!0,p=v,h=w;break}L=L.sibling}if(!P){for(L=w.child;L;){if(L===h){P=!0,h=w,p=v;break}if(L===p){P=!0,p=w,h=v;break}L=L.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function Yu(o){return o=Ed(o),o!==null?za(o):null}function za(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=za(o);if(l!==null)return l;o=o.sibling}return null}var Wa=e.unstable_scheduleCallback,Xu=e.unstable_cancelCallback,Sd=e.unstable_shouldYield,_g=e.unstable_requestPaint,at=e.unstable_now,Cd=e.unstable_getCurrentPriorityLevel,Do=e.unstable_ImmediatePriority,ws=e.unstable_UserBlockingPriority,cr=e.unstable_NormalPriority,Ju=e.unstable_LowPriority,Id=e.unstable_IdlePriority,No=null,Xn=null;function Pd(o){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(No,o,void 0,(o.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:xd,Zu=Math.log,Ad=Math.LN2;function xd(o){return o>>>=0,o===0?32:31-(Zu(o)/Ad|0)|0}var Ha=64,Ga=4194304;function Ts(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Mo(o,l){var h=o.pendingLanes;if(h===0)return 0;var p=0,v=o.suspendedLanes,w=o.pingedLanes,P=h&268435455;if(P!==0){var L=P&~v;L!==0?p=Ts(L):(w&=P,w!==0&&(p=Ts(w)))}else P=h&~v,P!==0?p=Ts(P):w!==0&&(p=Ts(w));if(p===0)return 0;if(l!==0&&l!==p&&!(l&v)&&(v=p&-p,w=l&-l,v>=w||v===16&&(w&4194240)!==0))return l;if(p&4&&(p|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)h=31-Rn(l),v=1<<h,p|=o[h],l&=~v;return p}function wg(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(o,l){for(var h=o.suspendedLanes,p=o.pingedLanes,v=o.expirationTimes,w=o.pendingLanes;0<w;){var P=31-Rn(w),L=1<<P,B=v[P];B===-1?(!(L&h)||L&p)&&(v[P]=wg(L,l)):B<=l&&(o.expiredLanes|=L),w&=~L}}function Jn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Oo(){var o=Ha;return Ha<<=1,!(Ha&4194240)&&(Ha=64),o}function Es(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Ss(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Rn(l),o[l]=h}function nt(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<h;){var v=31-Rn(h),w=1<<v;l[v]=0,p[v]=-1,o[v]=-1,h&=~w}}function Cs(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var p=31-Rn(h),v=1<<p;v&l|o[p]&l&&(o[p]|=l),h&=~v}}var Fe=0;function Is(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Rd,Ka,kd,bd,Dd,ec=!1,Yr=[],on=null,br=null,Dr=null,Ps=new Map,hr=new Map,Xr=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(o,l){switch(o){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Ps.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(l.pointerId)}}function On(o,l,h,p,v,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},l!==null&&(l=mc(l),l!==null&&Ka(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function Eg(o,l,h,p,v){switch(l){case"focusin":return on=On(on,o,l,h,p,v),!0;case"dragenter":return br=On(br,o,l,h,p,v),!0;case"mouseover":return Dr=On(Dr,o,l,h,p,v),!0;case"pointerover":var w=v.pointerId;return Ps.set(w,On(Ps.get(w)||null,o,l,h,p,v)),!0;case"gotpointercapture":return w=v.pointerId,hr.set(w,On(hr.get(w)||null,o,l,h,p,v)),!0}return!1}function Md(o){var l=Bo(o.target);if(l!==null){var h=Rr(l);if(h!==null){if(l=h.tag,l===13){if(l=bo(h),l!==null){o.blockedOn=l,Dd(o.priority,function(){kd(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xi(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=qa(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);Ao=p,h.target.dispatchEvent(p),Ao=null}else return l=mc(h),l!==null&&Ka(l),o.blockedOn=h,!1;l.shift()}return!0}function Lo(o,l,h){xi(o)&&h.delete(l)}function Od(){ec=!1,on!==null&&xi(on)&&(on=null),br!==null&&xi(br)&&(br=null),Dr!==null&&xi(Dr)&&(Dr=null),Ps.forEach(Lo),hr.forEach(Lo)}function Nr(o,l){o.blockedOn===l&&(o.blockedOn=null,ec||(ec=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Od)))}function Mr(o){function l(v){return Nr(v,o)}if(0<Yr.length){Nr(Yr[0],o);for(var h=1;h<Yr.length;h++){var p=Yr[h];p.blockedOn===o&&(p.blockedOn=null)}}for(on!==null&&Nr(on,o),br!==null&&Nr(br,o),Dr!==null&&Nr(Dr,o),Ps.forEach(l),hr.forEach(l),h=0;h<Xr.length;h++)p=Xr[h],p.blockedOn===o&&(p.blockedOn=null);for(;0<Xr.length&&(h=Xr[0],h.blockedOn===null);)Md(h),h.blockedOn===null&&Xr.shift()}var Ri=z.ReactCurrentBatchConfig,As=!0;function pt(o,l,h,p){var v=Fe,w=Ri.transition;Ri.transition=null;try{Fe=1,tc(o,l,h,p)}finally{Fe=v,Ri.transition=w}}function Sg(o,l,h,p){var v=Fe,w=Ri.transition;Ri.transition=null;try{Fe=4,tc(o,l,h,p)}finally{Fe=v,Ri.transition=w}}function tc(o,l,h,p){if(As){var v=qa(o,l,h,p);if(v===null)Mg(o,l,p,Vo,h),Nd(o,p);else if(Eg(v,o,l,h,p))p.stopPropagation();else if(Nd(o,p),l&4&&-1<Tg.indexOf(o)){for(;v!==null;){var w=mc(v);if(w!==null&&Rd(w),w=qa(o,l,h,p),w===null&&Mg(o,l,p,Vo,h),w===v)break;v=w}v!==null&&p.stopPropagation()}else Mg(o,l,p,null,h)}}var Vo=null;function qa(o,l,h,p){if(Vo=null,o=Va(p),o=Bo(o),o!==null)if(l=Rr(o),l===null)o=null;else if(h=l.tag,h===13){if(o=bo(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Vo=o,null}function nc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cd()){case Do:return 1;case ws:return 4;case cr:case Ju:return 16;case Id:return 536870912;default:return 16}default:return 16}}var Zn=null,Qa=null,Ln=null;function rc(){if(Ln)return Ln;var o,l=Qa,h=l.length,p,v="value"in Zn?Zn.value:Zn.textContent,w=v.length;for(o=0;o<h&&l[o]===v[o];o++);var P=h-o;for(p=1;p<=P&&l[h-p]===v[w-p];p++);return Ln=v.slice(o,1<p?1-p:void 0)}function Ya(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Jr(){return!0}function ic(){return!1}function an(o){function l(h,p,v,w,P){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(h=o[L],this[L]=h?h(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Jr:ic,this.isPropagationStopped=ic,this}return le(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),l}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=an(Or),Zr=le({},Or,{view:0,detail:0}),Cg=an(Zr),Ja,ki,xs,Fo=le({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xs&&(xs&&o.type==="mousemove"?(Ja=o.screenX-xs.screenX,ki=o.screenY-xs.screenY):ki=Ja=0,xs=o),Ja)},movementY:function(o){return"movementY"in o?o.movementY:ki}}),Za=an(Fo),sc=le({},Fo,{dataTransfer:0}),Ld=an(sc),el=le({},Zr,{relatedTarget:0}),tl=an(el),Vd=le({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),bi=an(Vd),Fd=le({},Or,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$d=an(Fd),Bd=le({},Or,{data:0}),oc=an(Bd),nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jd(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Ud[o])?!!l[o]:!1}function ei(){return jd}var f=le({},Zr,{key:function(o){if(o.key){var l=nl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ya(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?kn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(o){return o.type==="keypress"?Ya(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ya(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_=an(f),C=le({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=an(C),H=le({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),X=an(H),ae=le({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=an(ae),jt=le({},Fo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=an(jt),Yt=[9,13,27,32],Lt=u&&"CompositionEvent"in window,dr=null;u&&"documentMode"in document&&(dr=document.documentMode);var er=u&&"TextEvent"in window&&!dr,$o=u&&(!Lt||dr&&8<dr&&11>=dr),rl=" ",cE=!1;function hE(o,l){switch(o){case"keyup":return Yt.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var il=!1;function VO(o,l){switch(o){case"compositionend":return dE(l);case"keypress":return l.which!==32?null:(cE=!0,rl);case"textInput":return o=l.data,o===rl&&cE?null:o;default:return null}}function FO(o,l){if(il)return o==="compositionend"||!Lt&&hE(o,l)?(o=rc(),Ln=Qa=Zn=null,il=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return $o&&l.locale!=="ko"?null:l.data;default:return null}}var $O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!$O[o.type]:l==="textarea"}function pE(o,l,h,p){Qr(p),l=Kd(l,"onChange"),0<l.length&&(h=new Xa("onChange","change",null,h,p),o.push({event:h,listeners:l}))}var ac=null,lc=null;function BO(o){DE(o,0)}function zd(o){var l=ul(o);if(Da(l))return o}function UO(o,l){if(o==="change")return l}var mE=!1;if(u){var Ig;if(u){var Pg="oninput"in document;if(!Pg){var gE=document.createElement("div");gE.setAttribute("oninput","return;"),Pg=typeof gE.oninput=="function"}Ig=Pg}else Ig=!1;mE=Ig&&(!document.documentMode||9<document.documentMode)}function yE(){ac&&(ac.detachEvent("onpropertychange",vE),lc=ac=null)}function vE(o){if(o.propertyName==="value"&&zd(lc)){var l=[];pE(l,lc,o,Va(o)),qu(BO,l)}}function jO(o,l,h){o==="focusin"?(yE(),ac=l,lc=h,ac.attachEvent("onpropertychange",vE)):o==="focusout"&&yE()}function zO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return zd(lc)}function WO(o,l){if(o==="click")return zd(l)}function HO(o,l){if(o==="input"||o==="change")return zd(l)}function GO(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Lr=typeof Object.is=="function"?Object.is:GO;function uc(o,l){if(Lr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!c.call(l,v)||!Lr(o[v],l[v]))return!1}return!0}function _E(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function wE(o,l){var h=_E(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=l&&p>=l)return{node:h,offset:l-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=_E(h)}}function TE(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?TE(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function EE(){for(var o=window,l=vs();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=vs(o.document)}return l}function Ag(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function KO(o){var l=EE(),h=o.focusedElem,p=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&TE(h.ownerDocument.documentElement,h)){if(p!==null&&Ag(h)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var v=h.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!o.extend&&w>p&&(v=p,p=w,w=v),v=wE(h,w);var P=wE(h,p);v&&P&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),o.removeAllRanges(),w>p?(o.addRange(l),o.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var qO=u&&"documentMode"in document&&11>=document.documentMode,sl=null,xg=null,cc=null,Rg=!1;function SE(o,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rg||sl==null||sl!==vs(p)||(p=sl,"selectionStart"in p&&Ag(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),cc&&uc(cc,p)||(cc=p,p=Kd(xg,"onSelect"),0<p.length&&(l=new Xa("onSelect","select",null,l,h),o.push({event:l,listeners:p}),l.target=sl)))}function Wd(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var ol={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},kg={},CE={};u&&(CE=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Hd(o){if(kg[o])return kg[o];if(!ol[o])return o;var l=ol[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in CE)return kg[o]=l[h];return o}var IE=Hd("animationend"),PE=Hd("animationiteration"),AE=Hd("animationstart"),xE=Hd("transitionend"),RE=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(o,l){RE.set(o,l),s(l,[o])}for(var bg=0;bg<kE.length;bg++){var Dg=kE[bg],QO=Dg.toLowerCase(),YO=Dg[0].toUpperCase()+Dg.slice(1);Rs(QO,"on"+YO)}Rs(IE,"onAnimationEnd"),Rs(PE,"onAnimationIteration"),Rs(AE,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(xE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XO=new Set("cancel close invalid load scroll toggle".split(" ").concat(hc));function bE(o,l,h){var p=o.type||"unknown-event";o.currentTarget=h,Td(p,l,void 0,o),o.currentTarget=null}function DE(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],v=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var P=p.length-1;0<=P;P--){var L=p[P],B=L.instance,q=L.currentTarget;if(L=L.listener,B!==w&&v.isPropagationStopped())break e;bE(v,L,q),w=B}else for(P=0;P<p.length;P++){if(L=p[P],B=L.instance,q=L.currentTarget,L=L.listener,B!==w&&v.isPropagationStopped())break e;bE(v,L,q),w=B}}}if(xr)throw o=Qu,xr=!1,Qu=null,o}function ct(o,l){var h=l[Bg];h===void 0&&(h=l[Bg]=new Set);var p=o+"__bubble";h.has(p)||(NE(l,o,2,!1),h.add(p))}function Ng(o,l,h){var p=0;l&&(p|=4),NE(h,o,p,l)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function dc(o){if(!o[Gd]){o[Gd]=!0,r.forEach(function(h){h!=="selectionchange"&&(XO.has(h)||Ng(h,!1,o),Ng(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Gd]||(l[Gd]=!0,Ng("selectionchange",!1,l))}}function NE(o,l,h,p){switch(nc(l)){case 1:var v=pt;break;case 4:v=Sg;break;default:v=tc}h=v.bind(null,l,h,o),v=void 0,!Ba||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?o.addEventListener(l,h,{capture:!0,passive:v}):o.addEventListener(l,h,!0):v!==void 0?o.addEventListener(l,h,{passive:v}):o.addEventListener(l,h,!1)}function Mg(o,l,h,p,v){var w=p;if(!(l&1)&&!(l&2)&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var L=p.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(P===4)for(P=p.return;P!==null;){var B=P.tag;if((B===3||B===4)&&(B=P.stateNode.containerInfo,B===v||B.nodeType===8&&B.parentNode===v))return;P=P.return}for(;L!==null;){if(P=Bo(L),P===null)return;if(B=P.tag,B===5||B===6){p=w=P;continue e}L=L.parentNode}}p=p.return}qu(function(){var q=w,re=Va(h),ie=[];e:{var te=RE.get(o);if(te!==void 0){var ce=Xa,fe=o;switch(o){case"keypress":if(Ya(h)===0)break e;case"keydown":case"keyup":ce=_;break;case"focusin":fe="focus",ce=tl;break;case"focusout":fe="blur",ce=tl;break;case"beforeblur":case"afterblur":ce=tl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=X;break;case IE:case PE:case AE:ce=bi;break;case xE:ce=Ze;break;case"scroll":ce=Cg;break;case"wheel":ce=Be;break;case"copy":case"cut":case"paste":ce=$d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=R}var me=(l&4)!==0,bt=!me&&o==="scroll",G=me?te!==null?te+"Capture":null:te;me=[];for(var U=q,K;U!==null;){K=U;var se=K.stateNode;if(K.tag===5&&se!==null&&(K=se,G!==null&&(se=kt(U,G),se!=null&&me.push(fc(U,se,K)))),bt)break;U=U.return}0<me.length&&(te=new ce(te,fe,null,h,re),ie.push({event:te,listeners:me}))}}if(!(l&7)){e:{if(te=o==="mouseover"||o==="pointerover",ce=o==="mouseout"||o==="pointerout",te&&h!==Ao&&(fe=h.relatedTarget||h.fromElement)&&(Bo(fe)||fe[Di]))break e;if((ce||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,ce?(fe=h.relatedTarget||h.toElement,ce=q,fe=fe?Bo(fe):null,fe!==null&&(bt=Rr(fe),fe!==bt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=q),ce!==fe)){if(me=Za,se="onMouseLeave",G="onMouseEnter",U="mouse",(o==="pointerout"||o==="pointerover")&&(me=R,se="onPointerLeave",G="onPointerEnter",U="pointer"),bt=ce==null?te:ul(ce),K=fe==null?te:ul(fe),te=new me(se,U+"leave",ce,h,re),te.target=bt,te.relatedTarget=K,se=null,Bo(re)===q&&(me=new me(G,U+"enter",fe,h,re),me.target=K,me.relatedTarget=bt,se=me),bt=se,ce&&fe)t:{for(me=ce,G=fe,U=0,K=me;K;K=al(K))U++;for(K=0,se=G;se;se=al(se))K++;for(;0<U-K;)me=al(me),U--;for(;0<K-U;)G=al(G),K--;for(;U--;){if(me===G||G!==null&&me===G.alternate)break t;me=al(me),G=al(G)}me=null}else me=null;ce!==null&&ME(ie,te,ce,me,!1),fe!==null&&bt!==null&&ME(ie,bt,fe,me,!0)}}e:{if(te=q?ul(q):window,ce=te.nodeName&&te.nodeName.toLowerCase(),ce==="select"||ce==="input"&&te.type==="file")var ye=UO;else if(fE(te))if(mE)ye=HO;else{ye=zO;var _e=jO}else(ce=te.nodeName)&&ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ye=WO);if(ye&&(ye=ye(o,q))){pE(ie,ye,h,re);break e}_e&&_e(o,te,q),o==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&Ma(te,"number",te.value)}switch(_e=q?ul(q):window,o){case"focusin":(fE(_e)||_e.contentEditable==="true")&&(sl=_e,xg=q,cc=null);break;case"focusout":cc=xg=sl=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,SE(ie,h,re);break;case"selectionchange":if(qO)break;case"keydown":case"keyup":SE(ie,h,re)}var we;if(Lt)e:{switch(o){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else il?hE(o,h)&&(Ae="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ae="onCompositionStart");Ae&&($o&&h.locale!=="ko"&&(il||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&il&&(we=rc()):(Zn=re,Qa="value"in Zn?Zn.value:Zn.textContent,il=!0)),_e=Kd(q,Ae),0<_e.length&&(Ae=new oc(Ae,o,null,h,re),ie.push({event:Ae,listeners:_e}),we?Ae.data=we:(we=dE(h),we!==null&&(Ae.data=we)))),(we=er?VO(o,h):FO(o,h))&&(q=Kd(q,"onBeforeInput"),0<q.length&&(re=new oc("onBeforeInput","beforeinput",null,h,re),ie.push({event:re,listeners:q}),re.data=we))}DE(ie,l)})}function fc(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Kd(o,l){for(var h=l+"Capture",p=[];o!==null;){var v=o,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=kt(o,h),w!=null&&p.unshift(fc(o,w,v)),w=kt(o,l),w!=null&&p.push(fc(o,w,v))),o=o.return}return p}function al(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function ME(o,l,h,p,v){for(var w=l._reactName,P=[];h!==null&&h!==p;){var L=h,B=L.alternate,q=L.stateNode;if(B!==null&&B===p)break;L.tag===5&&q!==null&&(L=q,v?(B=kt(h,w),B!=null&&P.unshift(fc(h,B,L))):v||(B=kt(h,w),B!=null&&P.push(fc(h,B,L)))),h=h.return}P.length!==0&&o.push({event:l,listeners:P})}var JO=/\r\n?/g,ZO=/\u0000|\uFFFD/g;function OE(o){return(typeof o=="string"?o:""+o).replace(JO,`
`).replace(ZO,"")}function qd(o,l,h){if(l=OE(l),OE(o)!==l&&h)throw Error(n(425))}function Qd(){}var Og=null,Lg=null;function Vg(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout=="function"?setTimeout:void 0,eL=typeof clearTimeout=="function"?clearTimeout:void 0,LE=typeof Promise=="function"?Promise:void 0,tL=typeof queueMicrotask=="function"?queueMicrotask:typeof LE<"u"?function(o){return LE.resolve(null).then(o).catch(nL)}:Fg;function nL(o){setTimeout(function(){throw o})}function $g(o,l){var h=l,p=0;do{var v=h.nextSibling;if(o.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){o.removeChild(v),Mr(l);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);Mr(l)}function ks(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function VE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var ll=Math.random().toString(36).slice(2),ti="__reactFiber$"+ll,pc="__reactProps$"+ll,Di="__reactContainer$"+ll,Bg="__reactEvents$"+ll,rL="__reactListeners$"+ll,iL="__reactHandles$"+ll;function Bo(o){var l=o[ti];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Di]||h[ti]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=VE(o);o!==null;){if(h=o[ti])return h;o=VE(o)}return l}o=h,h=o.parentNode}return null}function mc(o){return o=o[ti]||o[Di],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ul(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Yd(o){return o[pc]||null}var Ug=[],cl=-1;function bs(o){return{current:o}}function ht(o){0>cl||(o.current=Ug[cl],Ug[cl]=null,cl--)}function lt(o,l){cl++,Ug[cl]=o.current,o.current=l}var Ds={},pn=bs(Ds),Vn=bs(!1),Uo=Ds;function hl(o,l){var h=o.type.contextTypes;if(!h)return Ds;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in h)v[w]=l[w];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=v),v}function Fn(o){return o=o.childContextTypes,o!=null}function Xd(){ht(Vn),ht(pn)}function FE(o,l,h){if(pn.current!==Ds)throw Error(n(168));lt(pn,l),lt(Vn,h)}function $E(o,l,h){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in l))throw Error(n(108,qe(o)||"Unknown",v));return le({},h,p)}function Jd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ds,Uo=pn.current,lt(pn,o),lt(Vn,Vn.current),!0}function BE(o,l,h){var p=o.stateNode;if(!p)throw Error(n(169));h?(o=$E(o,l,Uo),p.__reactInternalMemoizedMergedChildContext=o,ht(Vn),ht(pn),lt(pn,o)):ht(Vn),lt(Vn,h)}var Ni=null,Zd=!1,jg=!1;function UE(o){Ni===null?Ni=[o]:Ni.push(o)}function sL(o){Zd=!0,UE(o)}function Ns(){if(!jg&&Ni!==null){jg=!0;var o=0,l=Fe;try{var h=Ni;for(Fe=1;o<h.length;o++){var p=h[o];do p=p(!0);while(p!==null)}Ni=null,Zd=!1}catch(v){throw Ni!==null&&(Ni=Ni.slice(o+1)),Wa(Do,Ns),v}finally{Fe=l,jg=!1}}return null}var dl=[],fl=0,ef=null,tf=0,fr=[],pr=0,jo=null,Mi=1,Oi="";function zo(o,l){dl[fl++]=tf,dl[fl++]=ef,ef=o,tf=l}function jE(o,l,h){fr[pr++]=Mi,fr[pr++]=Oi,fr[pr++]=jo,jo=o;var p=Mi;o=Oi;var v=32-Rn(p)-1;p&=~(1<<v),h+=1;var w=32-Rn(l)+v;if(30<w){var P=v-v%5;w=(p&(1<<P)-1).toString(32),p>>=P,v-=P,Mi=1<<32-Rn(l)+v|h<<v|p,Oi=w+o}else Mi=1<<w|h<<v|p,Oi=o}function zg(o){o.return!==null&&(zo(o,1),jE(o,1,0))}function Wg(o){for(;o===ef;)ef=dl[--fl],dl[fl]=null,tf=dl[--fl],dl[fl]=null;for(;o===jo;)jo=fr[--pr],fr[pr]=null,Oi=fr[--pr],fr[pr]=null,Mi=fr[--pr],fr[pr]=null}var tr=null,nr=null,mt=!1,Vr=null;function zE(o,l){var h=vr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function WE(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,tr=o,nr=ks(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,tr=o,nr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=jo!==null?{id:Mi,overflow:Oi}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=vr(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,tr=o,nr=null,!0):!1;default:return!1}}function Hg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Gg(o){if(mt){var l=nr;if(l){var h=l;if(!WE(o,l)){if(Hg(o))throw Error(n(418));l=ks(h.nextSibling);var p=tr;l&&WE(o,l)?zE(p,h):(o.flags=o.flags&-4097|2,mt=!1,tr=o)}}else{if(Hg(o))throw Error(n(418));o.flags=o.flags&-4097|2,mt=!1,tr=o}}}function HE(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;tr=o}function nf(o){if(o!==tr)return!1;if(!mt)return HE(o),mt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Vg(o.type,o.memoizedProps)),l&&(l=nr)){if(Hg(o))throw GE(),Error(n(418));for(;l;)zE(o,l),l=ks(l.nextSibling)}if(HE(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){nr=ks(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}nr=null}}else nr=tr?ks(o.stateNode.nextSibling):null;return!0}function GE(){for(var o=nr;o;)o=ks(o.nextSibling)}function pl(){nr=tr=null,mt=!1}function Kg(o){Vr===null?Vr=[o]:Vr.push(o)}var oL=z.ReactCurrentBatchConfig;function gc(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var p=h.stateNode}if(!p)throw Error(n(147,o));var v=p,w=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(P){var L=v.refs;P===null?delete L[w]:L[w]=P},l._stringRef=w,l)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function rf(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function KE(o){var l=o._init;return l(o._payload)}function qE(o){function l(G,U){if(o){var K=G.deletions;K===null?(G.deletions=[U],G.flags|=16):K.push(U)}}function h(G,U){if(!o)return null;for(;U!==null;)l(G,U),U=U.sibling;return null}function p(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function v(G,U){return G=Us(G,U),G.index=0,G.sibling=null,G}function w(G,U,K){return G.index=K,o?(K=G.alternate,K!==null?(K=K.index,K<U?(G.flags|=2,U):K):(G.flags|=2,U)):(G.flags|=1048576,U)}function P(G){return o&&G.alternate===null&&(G.flags|=2),G}function L(G,U,K,se){return U===null||U.tag!==6?(U=Fy(K,G.mode,se),U.return=G,U):(U=v(U,K),U.return=G,U)}function B(G,U,K,se){var ye=K.type;return ye===D?re(G,U,K.props.children,se,K.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ft&&KE(ye)===U.type)?(se=v(U,K.props),se.ref=gc(G,U,K),se.return=G,se):(se=xf(K.type,K.key,K.props,null,G.mode,se),se.ref=gc(G,U,K),se.return=G,se)}function q(G,U,K,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=$y(K,G.mode,se),U.return=G,U):(U=v(U,K.children||[]),U.return=G,U)}function re(G,U,K,se,ye){return U===null||U.tag!==7?(U=Xo(K,G.mode,se,ye),U.return=G,U):(U=v(U,K),U.return=G,U)}function ie(G,U,K){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Fy(""+U,G.mode,K),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return K=xf(U.type,U.key,U.props,null,G.mode,K),K.ref=gc(G,null,U),K.return=G,K;case Y:return U=$y(U,G.mode,K),U.return=G,U;case ft:var se=U._init;return ie(G,se(U._payload),K)}if(Si(U)||ge(U))return U=Xo(U,G.mode,K,null),U.return=G,U;rf(G,U)}return null}function te(G,U,K,se){var ye=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ye!==null?null:L(G,U,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case j:return K.key===ye?B(G,U,K,se):null;case Y:return K.key===ye?q(G,U,K,se):null;case ft:return ye=K._init,te(G,U,ye(K._payload),se)}if(Si(K)||ge(K))return ye!==null?null:re(G,U,K,se,null);rf(G,K)}return null}function ce(G,U,K,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return G=G.get(K)||null,L(U,G,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case j:return G=G.get(se.key===null?K:se.key)||null,B(U,G,se,ye);case Y:return G=G.get(se.key===null?K:se.key)||null,q(U,G,se,ye);case ft:var _e=se._init;return ce(G,U,K,_e(se._payload),ye)}if(Si(se)||ge(se))return G=G.get(K)||null,re(U,G,se,ye,null);rf(U,se)}return null}function fe(G,U,K,se){for(var ye=null,_e=null,we=U,Ae=U=0,Zt=null;we!==null&&Ae<K.length;Ae++){we.index>Ae?(Zt=we,we=null):Zt=we.sibling;var Ge=te(G,we,K[Ae],se);if(Ge===null){we===null&&(we=Zt);break}o&&we&&Ge.alternate===null&&l(G,we),U=w(Ge,U,Ae),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge,we=Zt}if(Ae===K.length)return h(G,we),mt&&zo(G,Ae),ye;if(we===null){for(;Ae<K.length;Ae++)we=ie(G,K[Ae],se),we!==null&&(U=w(we,U,Ae),_e===null?ye=we:_e.sibling=we,_e=we);return mt&&zo(G,Ae),ye}for(we=p(G,we);Ae<K.length;Ae++)Zt=ce(we,G,Ae,K[Ae],se),Zt!==null&&(o&&Zt.alternate!==null&&we.delete(Zt.key===null?Ae:Zt.key),U=w(Zt,U,Ae),_e===null?ye=Zt:_e.sibling=Zt,_e=Zt);return o&&we.forEach(function(js){return l(G,js)}),mt&&zo(G,Ae),ye}function me(G,U,K,se){var ye=ge(K);if(typeof ye!="function")throw Error(n(150));if(K=ye.call(K),K==null)throw Error(n(151));for(var _e=ye=null,we=U,Ae=U=0,Zt=null,Ge=K.next();we!==null&&!Ge.done;Ae++,Ge=K.next()){we.index>Ae?(Zt=we,we=null):Zt=we.sibling;var js=te(G,we,Ge.value,se);if(js===null){we===null&&(we=Zt);break}o&&we&&js.alternate===null&&l(G,we),U=w(js,U,Ae),_e===null?ye=js:_e.sibling=js,_e=js,we=Zt}if(Ge.done)return h(G,we),mt&&zo(G,Ae),ye;if(we===null){for(;!Ge.done;Ae++,Ge=K.next())Ge=ie(G,Ge.value,se),Ge!==null&&(U=w(Ge,U,Ae),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge);return mt&&zo(G,Ae),ye}for(we=p(G,we);!Ge.done;Ae++,Ge=K.next())Ge=ce(we,G,Ae,Ge.value,se),Ge!==null&&(o&&Ge.alternate!==null&&we.delete(Ge.key===null?Ae:Ge.key),U=w(Ge,U,Ae),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge);return o&&we.forEach(function($L){return l(G,$L)}),mt&&zo(G,Ae),ye}function bt(G,U,K,se){if(typeof K=="object"&&K!==null&&K.type===D&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case j:e:{for(var ye=K.key,_e=U;_e!==null;){if(_e.key===ye){if(ye=K.type,ye===D){if(_e.tag===7){h(G,_e.sibling),U=v(_e,K.props.children),U.return=G,G=U;break e}}else if(_e.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ft&&KE(ye)===_e.type){h(G,_e.sibling),U=v(_e,K.props),U.ref=gc(G,_e,K),U.return=G,G=U;break e}h(G,_e);break}else l(G,_e);_e=_e.sibling}K.type===D?(U=Xo(K.props.children,G.mode,se,K.key),U.return=G,G=U):(se=xf(K.type,K.key,K.props,null,G.mode,se),se.ref=gc(G,U,K),se.return=G,G=se)}return P(G);case Y:e:{for(_e=K.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){h(G,U.sibling),U=v(U,K.children||[]),U.return=G,G=U;break e}else{h(G,U);break}else l(G,U);U=U.sibling}U=$y(K,G.mode,se),U.return=G,G=U}return P(G);case ft:return _e=K._init,bt(G,U,_e(K._payload),se)}if(Si(K))return fe(G,U,K,se);if(ge(K))return me(G,U,K,se);rf(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,U!==null&&U.tag===6?(h(G,U.sibling),U=v(U,K),U.return=G,G=U):(h(G,U),U=Fy(K,G.mode,se),U.return=G,G=U),P(G)):h(G,U)}return bt}var ml=qE(!0),QE=qE(!1),sf=bs(null),of=null,gl=null,qg=null;function Qg(){qg=gl=of=null}function Yg(o){var l=sf.current;ht(sf),o._currentValue=l}function Xg(o,l,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===h)break;o=o.return}}function yl(o,l){of=o,qg=gl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&l&&($n=!0),o.firstContext=null)}function mr(o){var l=o._currentValue;if(qg!==o)if(o={context:o,memoizedValue:l,next:null},gl===null){if(of===null)throw Error(n(308));gl=o,of.dependencies={lanes:0,firstContext:o}}else gl=gl.next=o;return l}var Wo=null;function Jg(o){Wo===null?Wo=[o]:Wo.push(o)}function YE(o,l,h,p){var v=l.interleaved;return v===null?(h.next=h,Jg(l)):(h.next=v.next,v.next=h),l.interleaved=h,Li(o,p)}function Li(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Ms=!1;function Zg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Vi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Os(o,l,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,We&2){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,Li(o,h)}return v=p.interleaved,v===null?(l.next=l,Jg(p)):(l.next=v.next,v.next=l),p.interleaved=l,Li(o,h)}function af(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,Cs(o,h)}}function JE(o,l){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?v=w=P:w=w.next=P,h=h.next}while(h!==null);w===null?v=w=l:w=w.next=l}else v=w=l;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function lf(o,l,h,p){var v=o.updateQueue;Ms=!1;var w=v.firstBaseUpdate,P=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var B=L,q=B.next;B.next=null,P===null?w=q:P.next=q,P=B;var re=o.alternate;re!==null&&(re=re.updateQueue,L=re.lastBaseUpdate,L!==P&&(L===null?re.firstBaseUpdate=q:L.next=q,re.lastBaseUpdate=B))}if(w!==null){var ie=v.baseState;P=0,re=q=B=null,L=w;do{var te=L.lane,ce=L.eventTime;if((p&te)===te){re!==null&&(re=re.next={eventTime:ce,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var fe=o,me=L;switch(te=l,ce=h,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ie=fe.call(ce,ie,te);break e}ie=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,te=typeof fe=="function"?fe.call(ce,ie,te):fe,te==null)break e;ie=le({},ie,te);break e;case 2:Ms=!0}}L.callback!==null&&L.lane!==0&&(o.flags|=64,te=v.effects,te===null?v.effects=[L]:te.push(L))}else ce={eventTime:ce,lane:te,tag:L.tag,payload:L.payload,callback:L.callback,next:null},re===null?(q=re=ce,B=ie):re=re.next=ce,P|=te;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;te=L,L=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);if(re===null&&(B=ie),v.baseState=B,v.firstBaseUpdate=q,v.lastBaseUpdate=re,l=v.shared.interleaved,l!==null){v=l;do P|=v.lane,v=v.next;while(v!==l)}else w===null&&(v.shared.lanes=0);Ko|=P,o.lanes=P,o.memoizedState=ie}}function ZE(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var yc={},ni=bs(yc),vc=bs(yc),_c=bs(yc);function Ho(o){if(o===yc)throw Error(n(174));return o}function ey(o,l){switch(lt(_c,l),lt(vc,o),lt(ni,yc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ut(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Ut(l,o)}ht(ni),lt(ni,l)}function vl(){ht(ni),ht(vc),ht(_c)}function e1(o){Ho(_c.current);var l=Ho(ni.current),h=Ut(l,o.type);l!==h&&(lt(vc,o),lt(ni,h))}function ty(o){vc.current===o&&(ht(ni),ht(vc))}var yt=bs(0);function uf(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ny=[];function ry(){for(var o=0;o<ny.length;o++)ny[o]._workInProgressVersionPrimary=null;ny.length=0}var cf=z.ReactCurrentDispatcher,iy=z.ReactCurrentBatchConfig,Go=0,vt=null,zt=null,Xt=null,hf=!1,wc=!1,Tc=0,aL=0;function mn(){throw Error(n(321))}function sy(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Lr(o[h],l[h]))return!1;return!0}function oy(o,l,h,p,v,w){if(Go=w,vt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,cf.current=o===null||o.memoizedState===null?hL:dL,o=h(p,v),wc){w=0;do{if(wc=!1,Tc=0,25<=w)throw Error(n(301));w+=1,Xt=zt=null,l.updateQueue=null,cf.current=fL,o=h(p,v)}while(wc)}if(cf.current=pf,l=zt!==null&&zt.next!==null,Go=0,Xt=zt=vt=null,hf=!1,l)throw Error(n(300));return o}function ay(){var o=Tc!==0;return Tc=0,o}function ri(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?vt.memoizedState=Xt=o:Xt=Xt.next=o,Xt}function gr(){if(zt===null){var o=vt.alternate;o=o!==null?o.memoizedState:null}else o=zt.next;var l=Xt===null?vt.memoizedState:Xt.next;if(l!==null)Xt=l,zt=o;else{if(o===null)throw Error(n(310));zt=o,o={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Xt===null?vt.memoizedState=Xt=o:Xt=Xt.next=o}return Xt}function Ec(o,l){return typeof l=="function"?l(o):l}function ly(o){var l=gr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var p=zt,v=p.baseQueue,w=h.pending;if(w!==null){if(v!==null){var P=v.next;v.next=w.next,w.next=P}p.baseQueue=v=w,h.pending=null}if(v!==null){w=v.next,p=p.baseState;var L=P=null,B=null,q=w;do{var re=q.lane;if((Go&re)===re)B!==null&&(B=B.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),p=q.hasEagerState?q.eagerState:o(p,q.action);else{var ie={lane:re,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};B===null?(L=B=ie,P=p):B=B.next=ie,vt.lanes|=re,Ko|=re}q=q.next}while(q!==null&&q!==w);B===null?P=p:B.next=L,Lr(p,l.memoizedState)||($n=!0),l.memoizedState=p,l.baseState=P,l.baseQueue=B,h.lastRenderedState=p}if(o=h.interleaved,o!==null){v=o;do w=v.lane,vt.lanes|=w,Ko|=w,v=v.next;while(v!==o)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function uy(o){var l=gr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var p=h.dispatch,v=h.pending,w=l.memoizedState;if(v!==null){h.pending=null;var P=v=v.next;do w=o(w,P.action),P=P.next;while(P!==v);Lr(w,l.memoizedState)||($n=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),h.lastRenderedState=w}return[w,p]}function t1(){}function n1(o,l){var h=vt,p=gr(),v=l(),w=!Lr(p.memoizedState,v);if(w&&(p.memoizedState=v,$n=!0),p=p.queue,cy(s1.bind(null,h,p,o),[o]),p.getSnapshot!==l||w||Xt!==null&&Xt.memoizedState.tag&1){if(h.flags|=2048,Sc(9,i1.bind(null,h,p,v,l),void 0,null),Jt===null)throw Error(n(349));Go&30||r1(h,l,v)}return v}function r1(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=vt.updateQueue,l===null?(l={lastEffect:null,stores:null},vt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function i1(o,l,h,p){l.value=h,l.getSnapshot=p,o1(l)&&a1(o)}function s1(o,l,h){return h(function(){o1(l)&&a1(o)})}function o1(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Lr(o,h)}catch{return!0}}function a1(o){var l=Li(o,1);l!==null&&Ur(l,o,1,-1)}function l1(o){var l=ri();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:o},l.queue=o,o=o.dispatch=cL.bind(null,vt,o),[l.memoizedState,o]}function Sc(o,l,h,p){return o={tag:o,create:l,destroy:h,deps:p,next:null},l=vt.updateQueue,l===null?(l={lastEffect:null,stores:null},vt.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,l.lastEffect=o)),o}function u1(){return gr().memoizedState}function df(o,l,h,p){var v=ri();vt.flags|=o,v.memoizedState=Sc(1|l,h,void 0,p===void 0?null:p)}function ff(o,l,h,p){var v=gr();p=p===void 0?null:p;var w=void 0;if(zt!==null){var P=zt.memoizedState;if(w=P.destroy,p!==null&&sy(p,P.deps)){v.memoizedState=Sc(l,h,w,p);return}}vt.flags|=o,v.memoizedState=Sc(1|l,h,w,p)}function c1(o,l){return df(8390656,8,o,l)}function cy(o,l){return ff(2048,8,o,l)}function h1(o,l){return ff(4,2,o,l)}function d1(o,l){return ff(4,4,o,l)}function f1(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function p1(o,l,h){return h=h!=null?h.concat([o]):null,ff(4,4,f1.bind(null,l,o),h)}function hy(){}function m1(o,l){var h=gr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&sy(l,p[1])?p[0]:(h.memoizedState=[o,l],o)}function g1(o,l){var h=gr();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&sy(l,p[1])?p[0]:(o=o(),h.memoizedState=[o,l],o)}function y1(o,l,h){return Go&21?(Lr(h,l)||(h=Oo(),vt.lanes|=h,Ko|=h,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,$n=!0),o.memoizedState=h)}function lL(o,l){var h=Fe;Fe=h!==0&&4>h?h:4,o(!0);var p=iy.transition;iy.transition={};try{o(!1),l()}finally{Fe=h,iy.transition=p}}function v1(){return gr().memoizedState}function uL(o,l,h){var p=$s(o);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},_1(o))w1(l,h);else if(h=YE(o,l,h,p),h!==null){var v=Dn();Ur(h,o,p,v),T1(h,l,p)}}function cL(o,l,h){var p=$s(o),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(_1(o))w1(l,v);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var P=l.lastRenderedState,L=w(P,h);if(v.hasEagerState=!0,v.eagerState=L,Lr(L,P)){var B=l.interleaved;B===null?(v.next=v,Jg(l)):(v.next=B.next,B.next=v),l.interleaved=v;return}}catch{}finally{}h=YE(o,l,v,p),h!==null&&(v=Dn(),Ur(h,o,p,v),T1(h,l,p))}}function _1(o){var l=o.alternate;return o===vt||l!==null&&l===vt}function w1(o,l){wc=hf=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function T1(o,l,h){if(h&4194240){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,Cs(o,h)}}var pf={readContext:mr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},hL={readContext:mr,useCallback:function(o,l){return ri().memoizedState=[o,l===void 0?null:l],o},useContext:mr,useEffect:c1,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,df(4194308,4,f1.bind(null,l,o),h)},useLayoutEffect:function(o,l){return df(4194308,4,o,l)},useInsertionEffect:function(o,l){return df(4,2,o,l)},useMemo:function(o,l){var h=ri();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var p=ri();return l=h!==void 0?h(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=uL.bind(null,vt,o),[p.memoizedState,o]},useRef:function(o){var l=ri();return o={current:o},l.memoizedState=o},useState:l1,useDebugValue:hy,useDeferredValue:function(o){return ri().memoizedState=o},useTransition:function(){var o=l1(!1),l=o[0];return o=lL.bind(null,o[1]),ri().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var p=vt,v=ri();if(mt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Jt===null)throw Error(n(349));Go&30||r1(p,l,h)}v.memoizedState=h;var w={value:h,getSnapshot:l};return v.queue=w,c1(s1.bind(null,p,w,o),[o]),p.flags|=2048,Sc(9,i1.bind(null,p,w,h,l),void 0,null),h},useId:function(){var o=ri(),l=Jt.identifierPrefix;if(mt){var h=Oi,p=Mi;h=(p&~(1<<32-Rn(p)-1)).toString(32)+h,l=":"+l+"R"+h,h=Tc++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=aL++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},dL={readContext:mr,useCallback:m1,useContext:mr,useEffect:cy,useImperativeHandle:p1,useInsertionEffect:h1,useLayoutEffect:d1,useMemo:g1,useReducer:ly,useRef:u1,useState:function(){return ly(Ec)},useDebugValue:hy,useDeferredValue:function(o){var l=gr();return y1(l,zt.memoizedState,o)},useTransition:function(){var o=ly(Ec)[0],l=gr().memoizedState;return[o,l]},useMutableSource:t1,useSyncExternalStore:n1,useId:v1,unstable_isNewReconciler:!1},fL={readContext:mr,useCallback:m1,useContext:mr,useEffect:cy,useImperativeHandle:p1,useInsertionEffect:h1,useLayoutEffect:d1,useMemo:g1,useReducer:uy,useRef:u1,useState:function(){return uy(Ec)},useDebugValue:hy,useDeferredValue:function(o){var l=gr();return zt===null?l.memoizedState=o:y1(l,zt.memoizedState,o)},useTransition:function(){var o=uy(Ec)[0],l=gr().memoizedState;return[o,l]},useMutableSource:t1,useSyncExternalStore:n1,useId:v1,unstable_isNewReconciler:!1};function Fr(o,l){if(o&&o.defaultProps){l=le({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function dy(o,l,h,p){l=o.memoizedState,h=h(p,l),h=h==null?l:le({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var mf={isMounted:function(o){return(o=o._reactInternals)?Rr(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var p=Dn(),v=$s(o),w=Vi(p,v);w.payload=l,h!=null&&(w.callback=h),l=Os(o,w,v),l!==null&&(Ur(l,o,v,p),af(l,o,v))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var p=Dn(),v=$s(o),w=Vi(p,v);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=Os(o,w,v),l!==null&&(Ur(l,o,v,p),af(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Dn(),p=$s(o),v=Vi(h,p);v.tag=2,l!=null&&(v.callback=l),l=Os(o,v,p),l!==null&&(Ur(l,o,p,h),af(l,o,p))}};function E1(o,l,h,p,v,w,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,P):l.prototype&&l.prototype.isPureReactComponent?!uc(h,p)||!uc(v,w):!0}function S1(o,l,h){var p=!1,v=Ds,w=l.contextType;return typeof w=="object"&&w!==null?w=mr(w):(v=Fn(l)?Uo:pn.current,p=l.contextTypes,w=(p=p!=null)?hl(o,v):Ds),l=new l(h,w),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=mf,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=w),l}function C1(o,l,h,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==o&&mf.enqueueReplaceState(l,l.state,null)}function fy(o,l,h,p){var v=o.stateNode;v.props=h,v.state=o.memoizedState,v.refs={},Zg(o);var w=l.contextType;typeof w=="object"&&w!==null?v.context=mr(w):(w=Fn(l)?Uo:pn.current,v.context=hl(o,w)),v.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(dy(o,l,w,h),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&mf.enqueueReplaceState(v,v.state,null),lf(o,h,v,p),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function _l(o,l){try{var h="",p=l;do h+=De(p),p=p.return;while(p);var v=h}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:l,stack:v,digest:null}}function py(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function my(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var pL=typeof WeakMap=="function"?WeakMap:Map;function I1(o,l,h){h=Vi(-1,h),h.tag=3,h.payload={element:null};var p=l.value;return h.callback=function(){Ef||(Ef=!0,ky=p),my(o,l)},h}function P1(o,l,h){h=Vi(-1,h),h.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;h.payload=function(){return p(v)},h.callback=function(){my(o,l)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){my(o,l),typeof p!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),h}function A1(o,l,h){var p=o.pingCache;if(p===null){p=o.pingCache=new pL;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(h)||(v.add(h),o=xL.bind(null,o,l,h),l.then(o,o))}function x1(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function R1(o,l,h,p,v){return o.mode&1?(o.flags|=65536,o.lanes=v,o):(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Vi(-1,1),l.tag=2,Os(h,l,1))),h.lanes|=1),o)}var mL=z.ReactCurrentOwner,$n=!1;function bn(o,l,h,p){l.child=o===null?QE(l,null,h,p):ml(l,o.child,h,p)}function k1(o,l,h,p,v){h=h.render;var w=l.ref;return yl(l,v),p=oy(o,l,h,p,w,v),h=ay(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Fi(o,l,v)):(mt&&h&&zg(l),l.flags|=1,bn(o,l,p,v),l.child)}function b1(o,l,h,p,v){if(o===null){var w=h.type;return typeof w=="function"&&!Vy(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=w,D1(o,l,w,p,v)):(o=xf(h.type,null,p,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!(o.lanes&v)){var P=w.memoizedProps;if(h=h.compare,h=h!==null?h:uc,h(P,p)&&o.ref===l.ref)return Fi(o,l,v)}return l.flags|=1,o=Us(w,p),o.ref=l.ref,o.return=l,l.child=o}function D1(o,l,h,p,v){if(o!==null){var w=o.memoizedProps;if(uc(w,p)&&o.ref===l.ref)if($n=!1,l.pendingProps=p=w,(o.lanes&v)!==0)o.flags&131072&&($n=!0);else return l.lanes=o.lanes,Fi(o,l,v)}return gy(o,l,h,p,v)}function N1(o,l,h){var p=l.pendingProps,v=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Tl,rr),rr|=h;else{if(!(h&1073741824))return o=w!==null?w.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,lt(Tl,rr),rr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,lt(Tl,rr),rr|=p}else w!==null?(p=w.baseLanes|h,l.memoizedState=null):p=h,lt(Tl,rr),rr|=p;return bn(o,l,v,h),l.child}function M1(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function gy(o,l,h,p,v){var w=Fn(h)?Uo:pn.current;return w=hl(l,w),yl(l,v),h=oy(o,l,h,p,w,v),p=ay(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Fi(o,l,v)):(mt&&p&&zg(l),l.flags|=1,bn(o,l,h,v),l.child)}function O1(o,l,h,p,v){if(Fn(h)){var w=!0;Jd(l)}else w=!1;if(yl(l,v),l.stateNode===null)yf(o,l),S1(l,h,p),fy(l,h,p,v),p=!0;else if(o===null){var P=l.stateNode,L=l.memoizedProps;P.props=L;var B=P.context,q=h.contextType;typeof q=="object"&&q!==null?q=mr(q):(q=Fn(h)?Uo:pn.current,q=hl(l,q));var re=h.getDerivedStateFromProps,ie=typeof re=="function"||typeof P.getSnapshotBeforeUpdate=="function";ie||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==p||B!==q)&&C1(l,P,p,q),Ms=!1;var te=l.memoizedState;P.state=te,lf(l,p,P,v),B=l.memoizedState,L!==p||te!==B||Vn.current||Ms?(typeof re=="function"&&(dy(l,h,re,p),B=l.memoizedState),(L=Ms||E1(l,h,L,p,te,B,q))?(ie||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=B),P.props=p,P.state=B,P.context=q,p=L):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{P=l.stateNode,XE(o,l),L=l.memoizedProps,q=l.type===l.elementType?L:Fr(l.type,L),P.props=q,ie=l.pendingProps,te=P.context,B=h.contextType,typeof B=="object"&&B!==null?B=mr(B):(B=Fn(h)?Uo:pn.current,B=hl(l,B));var ce=h.getDerivedStateFromProps;(re=typeof ce=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==ie||te!==B)&&C1(l,P,p,B),Ms=!1,te=l.memoizedState,P.state=te,lf(l,p,P,v);var fe=l.memoizedState;L!==ie||te!==fe||Vn.current||Ms?(typeof ce=="function"&&(dy(l,h,ce,p),fe=l.memoizedState),(q=Ms||E1(l,h,q,p,te,fe,B)||!1)?(re||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(p,fe,B),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(p,fe,B)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||L===o.memoizedProps&&te===o.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&te===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=fe),P.props=p,P.state=fe,P.context=B,p=q):(typeof P.componentDidUpdate!="function"||L===o.memoizedProps&&te===o.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&te===o.memoizedState||(l.flags|=1024),p=!1)}return yy(o,l,h,p,w,v)}function yy(o,l,h,p,v,w){M1(o,l);var P=(l.flags&128)!==0;if(!p&&!P)return v&&BE(l,h,!1),Fi(o,l,w);p=l.stateNode,mL.current=l;var L=P&&typeof h.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&P?(l.child=ml(l,o.child,null,w),l.child=ml(l,null,L,w)):bn(o,l,L,w),l.memoizedState=p.state,v&&BE(l,h,!0),l.child}function L1(o){var l=o.stateNode;l.pendingContext?FE(o,l.pendingContext,l.pendingContext!==l.context):l.context&&FE(o,l.context,!1),ey(o,l.containerInfo)}function V1(o,l,h,p,v){return pl(),Kg(v),l.flags|=256,bn(o,l,h,p),l.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function _y(o){return{baseLanes:o,cachePool:null,transitions:null}}function F1(o,l,h){var p=l.pendingProps,v=yt.current,w=!1,P=(l.flags&128)!==0,L;if((L=P)||(L=o!==null&&o.memoizedState===null?!1:(v&2)!==0),L?(w=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),lt(yt,v&1),o===null)return Gg(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(l.mode&1?o.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(P=p.children,o=p.fallback,w?(p=l.mode,w=l.child,P={mode:"hidden",children:P},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=P):w=Rf(P,p,0,null),o=Xo(o,p,h,null),w.return=l,o.return=l,w.sibling=o,l.child=w,l.child.memoizedState=_y(h),l.memoizedState=vy,o):wy(l,P));if(v=o.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return gL(o,l,P,p,L,v,h);if(w){w=p.fallback,P=l.mode,v=o.child,L=v.sibling;var B={mode:"hidden",children:p.children};return!(P&1)&&l.child!==v?(p=l.child,p.childLanes=0,p.pendingProps=B,l.deletions=null):(p=Us(v,B),p.subtreeFlags=v.subtreeFlags&14680064),L!==null?w=Us(L,w):(w=Xo(w,P,h,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,P=o.child.memoizedState,P=P===null?_y(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},w.memoizedState=P,w.childLanes=o.childLanes&~h,l.memoizedState=vy,p}return w=o.child,o=w.sibling,p=Us(w,{mode:"visible",children:p.children}),!(l.mode&1)&&(p.lanes=h),p.return=l,p.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=p,l.memoizedState=null,p}function wy(o,l){return l=Rf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function gf(o,l,h,p){return p!==null&&Kg(p),ml(l,o.child,null,h),o=wy(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function gL(o,l,h,p,v,w,P){if(h)return l.flags&256?(l.flags&=-257,p=py(Error(n(422))),gf(o,l,P,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(w=p.fallback,v=l.mode,p=Rf({mode:"visible",children:p.children},v,0,null),w=Xo(w,v,P,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,l.mode&1&&ml(l,o.child,null,P),l.child.memoizedState=_y(P),l.memoizedState=vy,w);if(!(l.mode&1))return gf(o,l,P,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var L=p.dgst;return p=L,w=Error(n(419)),p=py(w,p,void 0),gf(o,l,P,p)}if(L=(P&o.childLanes)!==0,$n||L){if(p=Jt,p!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(p.suspendedLanes|P)?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Li(o,v),Ur(p,o,v,-1))}return Ly(),p=py(Error(n(421))),gf(o,l,P,p)}return v.data==="$?"?(l.flags|=128,l.child=o.child,l=RL.bind(null,o),v._reactRetry=l,null):(o=w.treeContext,nr=ks(v.nextSibling),tr=l,mt=!0,Vr=null,o!==null&&(fr[pr++]=Mi,fr[pr++]=Oi,fr[pr++]=jo,Mi=o.id,Oi=o.overflow,jo=l),l=wy(l,p.children),l.flags|=4096,l)}function $1(o,l,h){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),Xg(o.return,l,h)}function Ty(o,l,h,p,v){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=v)}function B1(o,l,h){var p=l.pendingProps,v=p.revealOrder,w=p.tail;if(bn(o,l,p.children,h),p=yt.current,p&2)p=p&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&$1(o,h,l);else if(o.tag===19)$1(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(lt(yt,p),!(l.mode&1))l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)o=h.alternate,o!==null&&uf(o)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),Ty(l,!1,v,h,w);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&uf(o)===null){l.child=v;break}o=v.sibling,v.sibling=h,h=v,v=o}Ty(l,!0,h,null,w);break;case"together":Ty(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function yf(o,l){!(l.mode&1)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Fi(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Ko|=l.lanes,!(h&l.childLanes))return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=Us(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Us(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function yL(o,l,h){switch(l.tag){case 3:L1(l),pl();break;case 5:e1(l);break;case 1:Fn(l.type)&&Jd(l);break;case 4:ey(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,v=l.memoizedProps.value;lt(sf,p._currentValue),p._currentValue=v;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(lt(yt,yt.current&1),l.flags|=128,null):h&l.child.childLanes?F1(o,l,h):(lt(yt,yt.current&1),o=Fi(o,l,h),o!==null?o.sibling:null);lt(yt,yt.current&1);break;case 19:if(p=(h&l.childLanes)!==0,o.flags&128){if(p)return B1(o,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),lt(yt,yt.current),p)break;return null;case 22:case 23:return l.lanes=0,N1(o,l,h)}return Fi(o,l,h)}var U1,Ey,j1,z1;U1=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Ey=function(){},j1=function(o,l,h,p){var v=o.memoizedProps;if(v!==p){o=l.stateNode,Ho(ni.current);var w=null;switch(h){case"input":v=Co(o,v),p=Co(o,p),w=[];break;case"select":v=le({},v,{value:void 0}),p=le({},p,{value:void 0}),w=[];break;case"textarea":v=Fu(o,v),p=Fu(o,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=Qd)}Wu(h,p);var P;h=null;for(q in v)if(!p.hasOwnProperty(q)&&v.hasOwnProperty(q)&&v[q]!=null)if(q==="style"){var L=v[q];for(P in L)L.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?w||(w=[]):(w=w||[]).push(q,null));for(q in p){var B=p[q];if(L=v!=null?v[q]:void 0,p.hasOwnProperty(q)&&B!==L&&(B!=null||L!=null))if(q==="style")if(L){for(P in L)!L.hasOwnProperty(P)||B&&B.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in B)B.hasOwnProperty(P)&&L[P]!==B[P]&&(h||(h={}),h[P]=B[P])}else h||(w||(w=[]),w.push(q,h)),h=B;else q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,L=L?L.__html:void 0,B!=null&&L!==B&&(w=w||[]).push(q,B)):q==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(q,""+B):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(i.hasOwnProperty(q)?(B!=null&&q==="onScroll"&&ct("scroll",o),w||L===B||(w=[])):(w=w||[]).push(q,B))}h&&(w=w||[]).push("style",h);var q=w;(l.updateQueue=q)&&(l.flags|=4)}},z1=function(o,l,h,p){h!==p&&(l.flags|=4)};function Cc(o,l){if(!mt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function gn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(l)for(var v=o.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=p,o.childLanes=h,l}function vL(o,l,h){var p=l.pendingProps;switch(Wg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(l),null;case 1:return Fn(l.type)&&Xd(),gn(l),null;case 3:return p=l.stateNode,vl(),ht(Vn),ht(pn),ry(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(nf(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,Vr!==null&&(Ny(Vr),Vr=null))),Ey(o,l),gn(l),null;case 5:ty(l);var v=Ho(_c.current);if(h=l.type,o!==null&&l.stateNode!=null)j1(o,l,h,p,v),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(n(166));return gn(l),null}if(o=Ho(ni.current),nf(l)){p=l.stateNode,h=l.type;var w=l.memoizedProps;switch(p[ti]=l,p[pc]=w,o=(l.mode&1)!==0,h){case"dialog":ct("cancel",p),ct("close",p);break;case"iframe":case"object":case"embed":ct("load",p);break;case"video":case"audio":for(v=0;v<hc.length;v++)ct(hc[v],p);break;case"source":ct("error",p);break;case"img":case"image":case"link":ct("error",p),ct("load",p);break;case"details":ct("toggle",p);break;case"input":Na(p,w),ct("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},ct("invalid",p);break;case"textarea":Oa(p,w),ct("invalid",p)}Wu(h,w),v=null;for(var P in w)if(w.hasOwnProperty(P)){var L=w[P];P==="children"?typeof L=="string"?p.textContent!==L&&(w.suppressHydrationWarning!==!0&&qd(p.textContent,L,o),v=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&qd(p.textContent,L,o),v=["children",""+L]):i.hasOwnProperty(P)&&L!=null&&P==="onScroll"&&ct("scroll",p)}switch(h){case"input":Ei(p),wd(p,w,!0);break;case"textarea":Ei(p),$u(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Qd)}p=v,l.updateQueue=p,p!==null&&(l.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Bt(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=P.createElement(h,{is:p.is}):(o=P.createElement(h),h==="select"&&(P=o,p.multiple?P.multiple=!0:p.size&&(P.size=p.size))):o=P.createElementNS(o,h),o[ti]=l,o[pc]=p,U1(o,l,!1,!1),l.stateNode=o;e:{switch(P=Hu(h,p),h){case"dialog":ct("cancel",o),ct("close",o),v=p;break;case"iframe":case"object":case"embed":ct("load",o),v=p;break;case"video":case"audio":for(v=0;v<hc.length;v++)ct(hc[v],o);v=p;break;case"source":ct("error",o),v=p;break;case"img":case"image":case"link":ct("error",o),ct("load",o),v=p;break;case"details":ct("toggle",o),v=p;break;case"input":Na(o,p),v=Co(o,p),ct("invalid",o);break;case"option":v=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},v=le({},p,{value:void 0}),ct("invalid",o);break;case"textarea":Oa(o,p),v=Fu(o,p),ct("invalid",o);break;default:v=p}Wu(h,v),L=v;for(w in L)if(L.hasOwnProperty(w)){var B=L[w];w==="style"?ju(o,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Bu(o,B)):w==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&_s(o,B):typeof B=="number"&&_s(o,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?B!=null&&w==="onScroll"&&ct("scroll",o):B!=null&&V(o,w,B,P))}switch(h){case"input":Ei(o),wd(o,p,!1);break;case"textarea":Ei(o),$u(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Qe(p.value));break;case"select":o.multiple=!!p.multiple,w=p.value,w!=null?Ci(o,!!p.multiple,w,!1):p.defaultValue!=null&&Ci(o,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=Qd)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return gn(l),null;case 6:if(o&&l.stateNode!=null)z1(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(h=Ho(_c.current),Ho(ni.current),nf(l)){if(p=l.stateNode,h=l.memoizedProps,p[ti]=l,(w=p.nodeValue!==h)&&(o=tr,o!==null))switch(o.tag){case 3:qd(p.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&qd(p.nodeValue,h,(o.mode&1)!==0)}w&&(l.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[ti]=l,l.stateNode=p}return gn(l),null;case 13:if(ht(yt),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(mt&&nr!==null&&l.mode&1&&!(l.flags&128))GE(),pl(),l.flags|=98560,w=!1;else if(w=nf(l),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(n(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[ti]=l}else pl(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;gn(l),w=!1}else Vr!==null&&(Ny(Vr),Vr=null),w=!0;if(!w)return l.flags&65536?l:null}return l.flags&128?(l.lanes=h,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,l.mode&1&&(o===null||yt.current&1?Wt===0&&(Wt=3):Ly())),l.updateQueue!==null&&(l.flags|=4),gn(l),null);case 4:return vl(),Ey(o,l),o===null&&dc(l.stateNode.containerInfo),gn(l),null;case 10:return Yg(l.type._context),gn(l),null;case 17:return Fn(l.type)&&Xd(),gn(l),null;case 19:if(ht(yt),w=l.memoizedState,w===null)return gn(l),null;if(p=(l.flags&128)!==0,P=w.rendering,P===null)if(p)Cc(w,!1);else{if(Wt!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(P=uf(o),P!==null){for(l.flags|=128,Cc(w,!1),p=P.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=h,h=l.child;h!==null;)w=h,o=p,w.flags&=14680066,P=w.alternate,P===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=P.childLanes,w.lanes=P.lanes,w.child=P.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=P.memoizedProps,w.memoizedState=P.memoizedState,w.updateQueue=P.updateQueue,w.type=P.type,o=P.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return lt(yt,yt.current&1|2),l.child}o=o.sibling}w.tail!==null&&at()>El&&(l.flags|=128,p=!0,Cc(w,!1),l.lanes=4194304)}else{if(!p)if(o=uf(P),o!==null){if(l.flags|=128,p=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Cc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!mt)return gn(l),null}else 2*at()-w.renderingStartTime>El&&h!==1073741824&&(l.flags|=128,p=!0,Cc(w,!1),l.lanes=4194304);w.isBackwards?(P.sibling=l.child,l.child=P):(h=w.last,h!==null?h.sibling=P:l.child=P,w.last=P)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=at(),l.sibling=null,h=yt.current,lt(yt,p?h&1|2:h&1),l):(gn(l),null);case 22:case 23:return Oy(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&l.mode&1?rr&1073741824&&(gn(l),l.subtreeFlags&6&&(l.flags|=8192)):gn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function _L(o,l){switch(Wg(l),l.tag){case 1:return Fn(l.type)&&Xd(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return vl(),ht(Vn),ht(pn),ry(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;case 5:return ty(l),null;case 13:if(ht(yt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));pl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ht(yt),null;case 4:return vl(),null;case 10:return Yg(l.type._context),null;case 22:case 23:return Oy(),null;case 24:return null;default:return null}}var vf=!1,yn=!1,wL=typeof WeakSet=="function"?WeakSet:Set,de=null;function wl(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){St(o,l,p)}else h.current=null}function Sy(o,l,h){try{h()}catch(p){St(o,l,p)}}var W1=!1;function TL(o,l){if(Og=As,o=EE(),Ag(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var P=0,L=-1,B=-1,q=0,re=0,ie=o,te=null;t:for(;;){for(var ce;ie!==h||v!==0&&ie.nodeType!==3||(L=P+v),ie!==w||p!==0&&ie.nodeType!==3||(B=P+p),ie.nodeType===3&&(P+=ie.nodeValue.length),(ce=ie.firstChild)!==null;)te=ie,ie=ce;for(;;){if(ie===o)break t;if(te===h&&++q===v&&(L=P),te===w&&++re===p&&(B=P),(ce=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=ce}h=L===-1||B===-1?null:{start:L,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(Lg={focusedElem:o,selectionRange:h},As=!1,de=l;de!==null;)if(l=de,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,de=o;else for(;de!==null;){l=de;try{var fe=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,bt=fe.memoizedState,G=l.stateNode,U=G.getSnapshotBeforeUpdate(l.elementType===l.type?me:Fr(l.type,me),bt);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var K=l.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(se){St(l,l.return,se)}if(o=l.sibling,o!==null){o.return=l.return,de=o;break}de=l.return}return fe=W1,W1=!1,fe}function Ic(o,l,h){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&o)===o){var w=v.destroy;v.destroy=void 0,w!==void 0&&Sy(l,h,w)}v=v.next}while(v!==p)}}function _f(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var p=h.create;h.destroy=p()}h=h.next}while(h!==l)}}function Cy(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function H1(o){var l=o.alternate;l!==null&&(o.alternate=null,H1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ti],delete l[pc],delete l[Bg],delete l[rL],delete l[iL])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function G1(o){return o.tag===5||o.tag===3||o.tag===4}function K1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||G1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Iy(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Qd));else if(p!==4&&(o=o.child,o!==null))for(Iy(o,l,h),o=o.sibling;o!==null;)Iy(o,l,h),o=o.sibling}function Py(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(Py(o,l,h),o=o.sibling;o!==null;)Py(o,l,h),o=o.sibling}var ln=null,$r=!1;function Ls(o,l,h){for(h=h.child;h!==null;)q1(o,l,h),h=h.sibling}function q1(o,l,h){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(No,h)}catch{}switch(h.tag){case 5:yn||wl(h,l);case 6:var p=ln,v=$r;ln=null,Ls(o,l,h),ln=p,$r=v,ln!==null&&($r?(o=ln,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):ln.removeChild(h.stateNode));break;case 18:ln!==null&&($r?(o=ln,h=h.stateNode,o.nodeType===8?$g(o.parentNode,h):o.nodeType===1&&$g(o,h),Mr(o)):$g(ln,h.stateNode));break;case 4:p=ln,v=$r,ln=h.stateNode.containerInfo,$r=!0,Ls(o,l,h),ln=p,$r=v;break;case 0:case 11:case 14:case 15:if(!yn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,P=w.destroy;w=w.tag,P!==void 0&&(w&2||w&4)&&Sy(h,l,P),v=v.next}while(v!==p)}Ls(o,l,h);break;case 1:if(!yn&&(wl(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(L){St(h,l,L)}Ls(o,l,h);break;case 21:Ls(o,l,h);break;case 22:h.mode&1?(yn=(p=yn)||h.memoizedState!==null,Ls(o,l,h),yn=p):Ls(o,l,h);break;default:Ls(o,l,h)}}function Q1(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new wL),l.forEach(function(p){var v=kL.bind(null,o,p);h.has(p)||(h.add(p),p.then(v,v))})}}function Br(o,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var w=o,P=l,L=P;e:for(;L!==null;){switch(L.tag){case 5:ln=L.stateNode,$r=!1;break e;case 3:ln=L.stateNode.containerInfo,$r=!0;break e;case 4:ln=L.stateNode.containerInfo,$r=!0;break e}L=L.return}if(ln===null)throw Error(n(160));q1(w,P,v),ln=null,$r=!1;var B=v.alternate;B!==null&&(B.return=null),v.return=null}catch(q){St(v,l,q)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Y1(l,o),l=l.sibling}function Y1(o,l){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Br(l,o),ii(o),p&4){try{Ic(3,o,o.return),_f(3,o)}catch(me){St(o,o.return,me)}try{Ic(5,o,o.return)}catch(me){St(o,o.return,me)}}break;case 1:Br(l,o),ii(o),p&512&&h!==null&&wl(h,h.return);break;case 5:if(Br(l,o),ii(o),p&512&&h!==null&&wl(h,h.return),o.flags&32){var v=o.stateNode;try{_s(v,"")}catch(me){St(o,o.return,me)}}if(p&4&&(v=o.stateNode,v!=null)){var w=o.memoizedProps,P=h!==null?h.memoizedProps:w,L=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&Lu(v,w),Hu(L,P);var q=Hu(L,w);for(P=0;P<B.length;P+=2){var re=B[P],ie=B[P+1];re==="style"?ju(v,ie):re==="dangerouslySetInnerHTML"?Bu(v,ie):re==="children"?_s(v,ie):V(v,re,ie,q)}switch(L){case"input":Vu(v,w);break;case"textarea":La(v,w);break;case"select":var te=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var ce=w.value;ce!=null?Ci(v,!!w.multiple,ce,!1):te!==!!w.multiple&&(w.defaultValue!=null?Ci(v,!!w.multiple,w.defaultValue,!0):Ci(v,!!w.multiple,w.multiple?[]:"",!1))}v[pc]=w}catch(me){St(o,o.return,me)}}break;case 6:if(Br(l,o),ii(o),p&4){if(o.stateNode===null)throw Error(n(162));v=o.stateNode,w=o.memoizedProps;try{v.nodeValue=w}catch(me){St(o,o.return,me)}}break;case 3:if(Br(l,o),ii(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Mr(l.containerInfo)}catch(me){St(o,o.return,me)}break;case 4:Br(l,o),ii(o);break;case 13:Br(l,o),ii(o),v=o.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Ry=at())),p&4&&Q1(o);break;case 22:if(re=h!==null&&h.memoizedState!==null,o.mode&1?(yn=(q=yn)||re,Br(l,o),yn=q):Br(l,o),ii(o),p&8192){if(q=o.memoizedState!==null,(o.stateNode.isHidden=q)&&!re&&o.mode&1)for(de=o,re=o.child;re!==null;){for(ie=de=re;de!==null;){switch(te=de,ce=te.child,te.tag){case 0:case 11:case 14:case 15:Ic(4,te,te.return);break;case 1:wl(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){p=te,h=te.return;try{l=p,fe.props=l.memoizedProps,fe.state=l.memoizedState,fe.componentWillUnmount()}catch(me){St(p,h,me)}}break;case 5:wl(te,te.return);break;case 22:if(te.memoizedState!==null){Z1(ie);continue}}ce!==null?(ce.return=te,de=ce):Z1(ie)}re=re.sibling}e:for(re=null,ie=o;;){if(ie.tag===5){if(re===null){re=ie;try{v=ie.stateNode,q?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=ie.stateNode,B=ie.memoizedProps.style,P=B!=null&&B.hasOwnProperty("display")?B.display:null,L.style.display=Uu("display",P))}catch(me){St(o,o.return,me)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=q?"":ie.memoizedProps}catch(me){St(o,o.return,me)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===o)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===o)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===o)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Br(l,o),ii(o),p&4&&Q1(o);break;case 21:break;default:Br(l,o),ii(o)}}function ii(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(G1(h)){var p=h;break e}h=h.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(_s(v,""),p.flags&=-33);var w=K1(o);Py(o,w,v);break;case 3:case 4:var P=p.stateNode.containerInfo,L=K1(o);Iy(o,L,P);break;default:throw Error(n(161))}}catch(B){St(o,o.return,B)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function EL(o,l,h){de=o,X1(o)}function X1(o,l,h){for(var p=(o.mode&1)!==0;de!==null;){var v=de,w=v.child;if(v.tag===22&&p){var P=v.memoizedState!==null||vf;if(!P){var L=v.alternate,B=L!==null&&L.memoizedState!==null||yn;L=vf;var q=yn;if(vf=P,(yn=B)&&!q)for(de=v;de!==null;)P=de,B=P.child,P.tag===22&&P.memoizedState!==null?eS(v):B!==null?(B.return=P,de=B):eS(v);for(;w!==null;)de=w,X1(w),w=w.sibling;de=v,vf=L,yn=q}J1(o)}else v.subtreeFlags&8772&&w!==null?(w.return=v,de=w):J1(o)}}function J1(o){for(;de!==null;){var l=de;if(l.flags&8772){var h=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:yn||_f(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!yn)if(h===null)p.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:Fr(l.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&ZE(l,w,p);break;case 3:var P=l.updateQueue;if(P!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}ZE(l,P,h)}break;case 5:var L=l.stateNode;if(h===null&&l.flags&4){h=L;var B=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var q=l.alternate;if(q!==null){var re=q.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&Mr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}yn||l.flags&512&&Cy(l)}catch(te){St(l,l.return,te)}}if(l===o){de=null;break}if(h=l.sibling,h!==null){h.return=l.return,de=h;break}de=l.return}}function Z1(o){for(;de!==null;){var l=de;if(l===o){de=null;break}var h=l.sibling;if(h!==null){h.return=l.return,de=h;break}de=l.return}}function eS(o){for(;de!==null;){var l=de;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{_f(4,l)}catch(B){St(l,h,B)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var v=l.return;try{p.componentDidMount()}catch(B){St(l,v,B)}}var w=l.return;try{Cy(l)}catch(B){St(l,w,B)}break;case 5:var P=l.return;try{Cy(l)}catch(B){St(l,P,B)}}}catch(B){St(l,l.return,B)}if(l===o){de=null;break}var L=l.sibling;if(L!==null){L.return=l.return,de=L;break}de=l.return}}var SL=Math.ceil,wf=z.ReactCurrentDispatcher,Ay=z.ReactCurrentOwner,yr=z.ReactCurrentBatchConfig,We=0,Jt=null,Vt=null,un=0,rr=0,Tl=bs(0),Wt=0,Pc=null,Ko=0,Tf=0,xy=0,Ac=null,Bn=null,Ry=0,El=1/0,$i=null,Ef=!1,ky=null,Vs=null,Sf=!1,Fs=null,Cf=0,xc=0,by=null,If=-1,Pf=0;function Dn(){return We&6?at():If!==-1?If:If=at()}function $s(o){return o.mode&1?We&2&&un!==0?un&-un:oL.transition!==null?(Pf===0&&(Pf=Oo()),Pf):(o=Fe,o!==0||(o=window.event,o=o===void 0?16:nc(o.type)),o):1}function Ur(o,l,h,p){if(50<xc)throw xc=0,by=null,Error(n(185));Ss(o,h,p),(!(We&2)||o!==Jt)&&(o===Jt&&(!(We&2)&&(Tf|=h),Wt===4&&Bs(o,un)),Un(o,p),h===1&&We===0&&!(l.mode&1)&&(El=at()+500,Zd&&Ns()))}function Un(o,l){var h=o.callbackNode;Ai(o,l);var p=Mo(o,o===Jt?un:0);if(p===0)h!==null&&Xu(h),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(h!=null&&Xu(h),l===1)o.tag===0?sL(nS.bind(null,o)):UE(nS.bind(null,o)),tL(function(){!(We&6)&&Ns()}),h=null;else{switch(Is(p)){case 1:h=Do;break;case 4:h=ws;break;case 16:h=cr;break;case 536870912:h=Id;break;default:h=cr}h=cS(h,tS.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function tS(o,l){if(If=-1,Pf=0,We&6)throw Error(n(327));var h=o.callbackNode;if(Sl()&&o.callbackNode!==h)return null;var p=Mo(o,o===Jt?un:0);if(p===0)return null;if(p&30||p&o.expiredLanes||l)l=Af(o,p);else{l=p;var v=We;We|=2;var w=iS();(Jt!==o||un!==l)&&($i=null,El=at()+500,Qo(o,l));do try{PL();break}catch(L){rS(o,L)}while(!0);Qg(),wf.current=w,We=v,Vt!==null?l=0:(Jt=null,un=0,l=Wt)}if(l!==0){if(l===2&&(v=Jn(o),v!==0&&(p=v,l=Dy(o,v))),l===1)throw h=Pc,Qo(o,0),Bs(o,p),Un(o,at()),h;if(l===6)Bs(o,p);else{if(v=o.current.alternate,!(p&30)&&!CL(v)&&(l=Af(o,p),l===2&&(w=Jn(o),w!==0&&(p=w,l=Dy(o,w))),l===1))throw h=Pc,Qo(o,0),Bs(o,p),Un(o,at()),h;switch(o.finishedWork=v,o.finishedLanes=p,l){case 0:case 1:throw Error(n(345));case 2:Yo(o,Bn,$i);break;case 3:if(Bs(o,p),(p&130023424)===p&&(l=Ry+500-at(),10<l)){if(Mo(o,0)!==0)break;if(v=o.suspendedLanes,(v&p)!==p){Dn(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Fg(Yo.bind(null,o,Bn,$i),l);break}Yo(o,Bn,$i);break;case 4:if(Bs(o,p),(p&4194240)===p)break;for(l=o.eventTimes,v=-1;0<p;){var P=31-Rn(p);w=1<<P,P=l[P],P>v&&(v=P),p&=~w}if(p=v,p=at()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*SL(p/1960))-p,10<p){o.timeoutHandle=Fg(Yo.bind(null,o,Bn,$i),p);break}Yo(o,Bn,$i);break;case 5:Yo(o,Bn,$i);break;default:throw Error(n(329))}}}return Un(o,at()),o.callbackNode===h?tS.bind(null,o):null}function Dy(o,l){var h=Ac;return o.current.memoizedState.isDehydrated&&(Qo(o,l).flags|=256),o=Af(o,l),o!==2&&(l=Bn,Bn=h,l!==null&&Ny(l)),o}function Ny(o){Bn===null?Bn=o:Bn.push.apply(Bn,o)}function CL(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],w=v.getSnapshot;v=v.value;try{if(!Lr(w(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Bs(o,l){for(l&=~xy,l&=~Tf,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-Rn(l),p=1<<h;o[h]=-1,l&=~p}}function nS(o){if(We&6)throw Error(n(327));Sl();var l=Mo(o,0);if(!(l&1))return Un(o,at()),null;var h=Af(o,l);if(o.tag!==0&&h===2){var p=Jn(o);p!==0&&(l=p,h=Dy(o,p))}if(h===1)throw h=Pc,Qo(o,0),Bs(o,l),Un(o,at()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Yo(o,Bn,$i),Un(o,at()),null}function My(o,l){var h=We;We|=1;try{return o(l)}finally{We=h,We===0&&(El=at()+500,Zd&&Ns())}}function qo(o){Fs!==null&&Fs.tag===0&&!(We&6)&&Sl();var l=We;We|=1;var h=yr.transition,p=Fe;try{if(yr.transition=null,Fe=1,o)return o()}finally{Fe=p,yr.transition=h,We=l,!(We&6)&&Ns()}}function Oy(){rr=Tl.current,ht(Tl)}function Qo(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,eL(h)),Vt!==null)for(h=Vt.return;h!==null;){var p=h;switch(Wg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Xd();break;case 3:vl(),ht(Vn),ht(pn),ry();break;case 5:ty(p);break;case 4:vl();break;case 13:ht(yt);break;case 19:ht(yt);break;case 10:Yg(p.type._context);break;case 22:case 23:Oy()}h=h.return}if(Jt=o,Vt=o=Us(o.current,null),un=rr=l,Wt=0,Pc=null,xy=Tf=Ko=0,Bn=Ac=null,Wo!==null){for(l=0;l<Wo.length;l++)if(h=Wo[l],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,w=h.pending;if(w!==null){var P=w.next;w.next=v,p.next=P}h.pending=p}Wo=null}return o}function rS(o,l){do{var h=Vt;try{if(Qg(),cf.current=pf,hf){for(var p=vt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}hf=!1}if(Go=0,Xt=zt=vt=null,wc=!1,Tc=0,Ay.current=null,h===null||h.return===null){Wt=1,Pc=l,Vt=null;break}e:{var w=o,P=h.return,L=h,B=l;if(l=un,L.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var q=B,re=L,ie=re.tag;if(!(re.mode&1)&&(ie===0||ie===11||ie===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var ce=x1(P);if(ce!==null){ce.flags&=-257,R1(ce,P,L,w,l),ce.mode&1&&A1(w,q,l),l=ce,B=q;var fe=l.updateQueue;if(fe===null){var me=new Set;me.add(B),l.updateQueue=me}else fe.add(B);break e}else{if(!(l&1)){A1(w,q,l),Ly();break e}B=Error(n(426))}}else if(mt&&L.mode&1){var bt=x1(P);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),R1(bt,P,L,w,l),Kg(_l(B,L));break e}}w=B=_l(B,L),Wt!==4&&(Wt=2),Ac===null?Ac=[w]:Ac.push(w),w=P;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var G=I1(w,B,l);JE(w,G);break e;case 1:L=B;var U=w.type,K=w.stateNode;if(!(w.flags&128)&&(typeof U.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Vs===null||!Vs.has(K)))){w.flags|=65536,l&=-l,w.lanes|=l;var se=P1(w,L,l);JE(w,se);break e}}w=w.return}while(w!==null)}oS(h)}catch(ye){l=ye,Vt===h&&h!==null&&(Vt=h=h.return);continue}break}while(!0)}function iS(){var o=wf.current;return wf.current=pf,o===null?pf:o}function Ly(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Jt===null||!(Ko&268435455)&&!(Tf&268435455)||Bs(Jt,un)}function Af(o,l){var h=We;We|=2;var p=iS();(Jt!==o||un!==l)&&($i=null,Qo(o,l));do try{IL();break}catch(v){rS(o,v)}while(!0);if(Qg(),We=h,wf.current=p,Vt!==null)throw Error(n(261));return Jt=null,un=0,Wt}function IL(){for(;Vt!==null;)sS(Vt)}function PL(){for(;Vt!==null&&!Sd();)sS(Vt)}function sS(o){var l=uS(o.alternate,o,rr);o.memoizedProps=o.pendingProps,l===null?oS(o):Vt=l,Ay.current=null}function oS(o){var l=o;do{var h=l.alternate;if(o=l.return,l.flags&32768){if(h=_L(h,l),h!==null){h.flags&=32767,Vt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Wt=6,Vt=null;return}}else if(h=vL(h,l,rr),h!==null){Vt=h;return}if(l=l.sibling,l!==null){Vt=l;return}Vt=l=o}while(l!==null);Wt===0&&(Wt=5)}function Yo(o,l,h){var p=Fe,v=yr.transition;try{yr.transition=null,Fe=1,AL(o,l,h,p)}finally{yr.transition=v,Fe=p}return null}function AL(o,l,h,p){do Sl();while(Fs!==null);if(We&6)throw Error(n(327));h=o.finishedWork;var v=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var w=h.lanes|h.childLanes;if(nt(o,w),o===Jt&&(Vt=Jt=null,un=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Sf||(Sf=!0,cS(cr,function(){return Sl(),null})),w=(h.flags&15990)!==0,h.subtreeFlags&15990||w){w=yr.transition,yr.transition=null;var P=Fe;Fe=1;var L=We;We|=4,Ay.current=null,TL(o,h),Y1(h,o),KO(Lg),As=!!Og,Lg=Og=null,o.current=h,EL(h),_g(),We=L,Fe=P,yr.transition=w}else o.current=h;if(Sf&&(Sf=!1,Fs=o,Cf=v),w=o.pendingLanes,w===0&&(Vs=null),Pd(h.stateNode),Un(o,at()),l!==null)for(p=o.onRecoverableError,h=0;h<l.length;h++)v=l[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(Ef)throw Ef=!1,o=ky,ky=null,o;return Cf&1&&o.tag!==0&&Sl(),w=o.pendingLanes,w&1?o===by?xc++:(xc=0,by=o):xc=0,Ns(),null}function Sl(){if(Fs!==null){var o=Is(Cf),l=yr.transition,h=Fe;try{if(yr.transition=null,Fe=16>o?16:o,Fs===null)var p=!1;else{if(o=Fs,Fs=null,Cf=0,We&6)throw Error(n(331));var v=We;for(We|=4,de=o.current;de!==null;){var w=de,P=w.child;if(de.flags&16){var L=w.deletions;if(L!==null){for(var B=0;B<L.length;B++){var q=L[B];for(de=q;de!==null;){var re=de;switch(re.tag){case 0:case 11:case 15:Ic(8,re,w)}var ie=re.child;if(ie!==null)ie.return=re,de=ie;else for(;de!==null;){re=de;var te=re.sibling,ce=re.return;if(H1(re),re===q){de=null;break}if(te!==null){te.return=ce,de=te;break}de=ce}}}var fe=w.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var bt=me.sibling;me.sibling=null,me=bt}while(me!==null)}}de=w}}if(w.subtreeFlags&2064&&P!==null)P.return=w,de=P;else e:for(;de!==null;){if(w=de,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Ic(9,w,w.return)}var G=w.sibling;if(G!==null){G.return=w.return,de=G;break e}de=w.return}}var U=o.current;for(de=U;de!==null;){P=de;var K=P.child;if(P.subtreeFlags&2064&&K!==null)K.return=P,de=K;else e:for(P=U;de!==null;){if(L=de,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:_f(9,L)}}catch(ye){St(L,L.return,ye)}if(L===P){de=null;break e}var se=L.sibling;if(se!==null){se.return=L.return,de=se;break e}de=L.return}}if(We=v,Ns(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(No,o)}catch{}p=!0}return p}finally{Fe=h,yr.transition=l}}return!1}function aS(o,l,h){l=_l(h,l),l=I1(o,l,1),o=Os(o,l,1),l=Dn(),o!==null&&(Ss(o,1,l),Un(o,l))}function St(o,l,h){if(o.tag===3)aS(o,o,h);else for(;l!==null;){if(l.tag===3){aS(l,o,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vs===null||!Vs.has(p))){o=_l(h,o),o=P1(l,o,1),l=Os(l,o,1),o=Dn(),l!==null&&(Ss(l,1,o),Un(l,o));break}}l=l.return}}function xL(o,l,h){var p=o.pingCache;p!==null&&p.delete(l),l=Dn(),o.pingedLanes|=o.suspendedLanes&h,Jt===o&&(un&h)===h&&(Wt===4||Wt===3&&(un&130023424)===un&&500>at()-Ry?Qo(o,0):xy|=h),Un(o,l)}function lS(o,l){l===0&&(o.mode&1?(l=Ga,Ga<<=1,!(Ga&130023424)&&(Ga=4194304)):l=1);var h=Dn();o=Li(o,l),o!==null&&(Ss(o,l,h),Un(o,h))}function RL(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),lS(o,h)}function kL(o,l){var h=0;switch(o.tag){case 13:var p=o.stateNode,v=o.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(l),lS(o,h)}var uS;uS=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Vn.current)$n=!0;else{if(!(o.lanes&h)&&!(l.flags&128))return $n=!1,yL(o,l,h);$n=!!(o.flags&131072)}else $n=!1,mt&&l.flags&1048576&&jE(l,tf,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;yf(o,l),o=l.pendingProps;var v=hl(l,pn.current);yl(l,h),v=oy(null,l,p,o,v,h);var w=ay();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Fn(p)?(w=!0,Jd(l)):w=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Zg(l),v.updater=mf,l.stateNode=v,v._reactInternals=l,fy(l,p,o,h),l=yy(null,l,p,!0,w,h)):(l.tag=0,mt&&w&&zg(l),bn(null,l,v,h),l=l.child),l;case 16:p=l.elementType;e:{switch(yf(o,l),o=l.pendingProps,v=p._init,p=v(p._payload),l.type=p,v=l.tag=DL(p),o=Fr(p,o),v){case 0:l=gy(null,l,p,o,h);break e;case 1:l=O1(null,l,p,o,h);break e;case 11:l=k1(null,l,p,o,h);break e;case 14:l=b1(null,l,p,Fr(p.type,o),h);break e}throw Error(n(306,p,""))}return l;case 0:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Fr(p,v),gy(o,l,p,v,h);case 1:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Fr(p,v),O1(o,l,p,v,h);case 3:e:{if(L1(l),o===null)throw Error(n(387));p=l.pendingProps,w=l.memoizedState,v=w.element,XE(o,l),lf(l,p,null,h);var P=l.memoizedState;if(p=P.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){v=_l(Error(n(423)),l),l=V1(o,l,p,h,v);break e}else if(p!==v){v=_l(Error(n(424)),l),l=V1(o,l,p,h,v);break e}else for(nr=ks(l.stateNode.containerInfo.firstChild),tr=l,mt=!0,Vr=null,h=QE(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(pl(),p===v){l=Fi(o,l,h);break e}bn(o,l,p,h)}l=l.child}return l;case 5:return e1(l),o===null&&Gg(l),p=l.type,v=l.pendingProps,w=o!==null?o.memoizedProps:null,P=v.children,Vg(p,v)?P=null:w!==null&&Vg(p,w)&&(l.flags|=32),M1(o,l),bn(o,l,P,h),l.child;case 6:return o===null&&Gg(l),null;case 13:return F1(o,l,h);case 4:return ey(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=ml(l,null,p,h):bn(o,l,p,h),l.child;case 11:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Fr(p,v),k1(o,l,p,v,h);case 7:return bn(o,l,l.pendingProps,h),l.child;case 8:return bn(o,l,l.pendingProps.children,h),l.child;case 12:return bn(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(p=l.type._context,v=l.pendingProps,w=l.memoizedProps,P=v.value,lt(sf,p._currentValue),p._currentValue=P,w!==null)if(Lr(w.value,P)){if(w.children===v.children&&!Vn.current){l=Fi(o,l,h);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var L=w.dependencies;if(L!==null){P=w.child;for(var B=L.firstContext;B!==null;){if(B.context===p){if(w.tag===1){B=Vi(-1,h&-h),B.tag=2;var q=w.updateQueue;if(q!==null){q=q.shared;var re=q.pending;re===null?B.next=B:(B.next=re.next,re.next=B),q.pending=B}}w.lanes|=h,B=w.alternate,B!==null&&(B.lanes|=h),Xg(w.return,h,l),L.lanes|=h;break}B=B.next}}else if(w.tag===10)P=w.type===l.type?null:w.child;else if(w.tag===18){if(P=w.return,P===null)throw Error(n(341));P.lanes|=h,L=P.alternate,L!==null&&(L.lanes|=h),Xg(P,h,l),P=w.sibling}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===l){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}bn(o,l,v.children,h),l=l.child}return l;case 9:return v=l.type,p=l.pendingProps.children,yl(l,h),v=mr(v),p=p(v),l.flags|=1,bn(o,l,p,h),l.child;case 14:return p=l.type,v=Fr(p,l.pendingProps),v=Fr(p.type,v),b1(o,l,p,v,h);case 15:return D1(o,l,l.type,l.pendingProps,h);case 17:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Fr(p,v),yf(o,l),l.tag=1,Fn(p)?(o=!0,Jd(l)):o=!1,yl(l,h),S1(l,p,v),fy(l,p,v,h),yy(null,l,p,!0,o,h);case 19:return B1(o,l,h);case 22:return N1(o,l,h)}throw Error(n(156,l.tag))};function cS(o,l){return Wa(o,l)}function bL(o,l,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(o,l,h,p){return new bL(o,l,h,p)}function Vy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function DL(o){if(typeof o=="function")return Vy(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===Je)return 14}return 2}function Us(o,l){var h=o.alternate;return h===null?(h=vr(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function xf(o,l,h,p,v,w){var P=2;if(p=o,typeof o=="function")Vy(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case D:return Xo(h.children,v,w,l);case A:P=8,v|=8;break;case b:return o=vr(12,h,l,v|2),o.elementType=b,o.lanes=w,o;case N:return o=vr(13,h,l,v),o.elementType=N,o.lanes=w,o;case Re:return o=vr(19,h,l,v),o.elementType=Re,o.lanes=w,o;case pe:return Rf(h,v,w,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:P=10;break e;case M:P=9;break e;case $:P=11;break e;case Je:P=14;break e;case ft:P=16,p=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=vr(P,h,l,v),l.elementType=o,l.type=p,l.lanes=w,l}function Xo(o,l,h,p){return o=vr(7,o,p,l),o.lanes=h,o}function Rf(o,l,h,p){return o=vr(22,o,p,l),o.elementType=pe,o.lanes=h,o.stateNode={isHidden:!1},o}function Fy(o,l,h){return o=vr(6,o,null,l),o.lanes=h,o}function $y(o,l,h){return l=vr(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function NL(o,l,h,p,v){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Es(0),this.expirationTimes=Es(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Es(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function By(o,l,h,p,v,w,P,L,B){return o=new NL(o,l,h,L,B),l===1?(l=1,w===!0&&(l|=8)):l=0,w=vr(3,null,null,l),o.current=w,w.stateNode=o,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(w),o}function ML(o,l,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:p==null?null:""+p,children:o,containerInfo:l,implementation:h}}function hS(o){if(!o)return Ds;o=o._reactInternals;e:{if(Rr(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Fn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(Fn(h))return $E(o,h,l)}return l}function dS(o,l,h,p,v,w,P,L,B){return o=By(h,p,!0,o,v,w,P,L,B),o.context=hS(null),h=o.current,p=Dn(),v=$s(h),w=Vi(p,v),w.callback=l??null,Os(h,w,v),o.current.lanes=v,Ss(o,v,p),Un(o,p),o}function kf(o,l,h,p){var v=l.current,w=Dn(),P=$s(v);return h=hS(h),l.context===null?l.context=h:l.pendingContext=h,l=Vi(w,P),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Os(v,l,P),o!==null&&(Ur(o,v,P,w),af(o,v,P)),P}function bf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function fS(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function Uy(o,l){fS(o,l),(o=o.alternate)&&fS(o,l)}function OL(){return null}var pS=typeof reportError=="function"?reportError:function(o){console.error(o)};function jy(o){this._internalRoot=o}Df.prototype.render=jy.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));kf(o,l,null,null)},Df.prototype.unmount=jy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;qo(function(){kf(null,o,null,null)}),l[Di]=null}};function Df(o){this._internalRoot=o}Df.prototype.unstable_scheduleHydration=function(o){if(o){var l=bd();o={blockedOn:null,target:o,priority:l};for(var h=0;h<Xr.length&&l!==0&&l<Xr[h].priority;h++);Xr.splice(h,0,o),h===0&&Md(o)}};function zy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Nf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function mS(){}function LL(o,l,h,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var q=bf(P);w.call(q)}}var P=dS(l,p,o,0,null,!1,!1,"",mS);return o._reactRootContainer=P,o[Di]=P.current,dc(o.nodeType===8?o.parentNode:o),qo(),P}for(;v=o.lastChild;)o.removeChild(v);if(typeof p=="function"){var L=p;p=function(){var q=bf(B);L.call(q)}}var B=By(o,0,!1,null,null,!1,!1,"",mS);return o._reactRootContainer=B,o[Di]=B.current,dc(o.nodeType===8?o.parentNode:o),qo(function(){kf(l,B,h,p)}),B}function Mf(o,l,h,p,v){var w=h._reactRootContainer;if(w){var P=w;if(typeof v=="function"){var L=v;v=function(){var B=bf(P);L.call(B)}}kf(l,P,o,v)}else P=LL(h,l,o,v,p);return bf(P)}Rd=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=Ts(l.pendingLanes);h!==0&&(Cs(l,h|1),Un(l,at()),!(We&6)&&(El=at()+500,Ns()))}break;case 13:qo(function(){var p=Li(o,1);if(p!==null){var v=Dn();Ur(p,o,1,v)}}),Uy(o,1)}},Ka=function(o){if(o.tag===13){var l=Li(o,134217728);if(l!==null){var h=Dn();Ur(l,o,134217728,h)}Uy(o,134217728)}},kd=function(o){if(o.tag===13){var l=$s(o),h=Li(o,l);if(h!==null){var p=Dn();Ur(h,o,l,p)}Uy(o,l)}},bd=function(){return Fe},Dd=function(o,l){var h=Fe;try{return Fe=o,l()}finally{Fe=h}},Fa=function(o,l,h){switch(l){case"input":if(Vu(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==o&&p.form===o.form){var v=Yd(p);if(!v)throw Error(n(90));Da(p),Vu(p,v)}}}break;case"textarea":La(o,h);break;case"select":l=h.value,l!=null&&Ci(o,!!h.multiple,l,!1)}},xo=My,Ku=qo;var VL={usingClientEntryPoint:!1,Events:[mc,ul,Yd,Qr,Gu,My]},Rc={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FL={bundleType:Rc.bundleType,version:Rc.version,rendererPackageName:Rc.rendererPackageName,rendererConfig:Rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Yu(o),o===null?null:o.stateNode},findFiberByHostInstance:Rc.findFiberByHostInstance||OL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{No=Of.inject(FL),Xn=Of}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VL,jn.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zy(l))throw Error(n(200));return ML(o,l,null,h)},jn.createRoot=function(o,l){if(!zy(o))throw Error(n(299));var h=!1,p="",v=pS;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=By(o,1,!1,null,null,h,!1,p,v),o[Di]=l.current,dc(o.nodeType===8?o.parentNode:o),new jy(l)},jn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=Yu(l),o=o===null?null:o.stateNode,o},jn.flushSync=function(o){return qo(o)},jn.hydrate=function(o,l,h){if(!Nf(l))throw Error(n(200));return Mf(null,o,l,!0,h)},jn.hydrateRoot=function(o,l,h){if(!zy(o))throw Error(n(405));var p=h!=null&&h.hydratedSources||null,v=!1,w="",P=pS;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),l=dS(l,null,o,1,h??null,v,!1,w,P),o[Di]=l.current,dc(o),p)for(o=0;o<p.length;o++)h=p[o],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new Df(l)},jn.render=function(o,l,h){if(!Nf(l))throw Error(n(200));return Mf(null,o,l,!1,h)},jn.unmountComponentAtNode=function(o){if(!Nf(o))throw Error(n(40));return o._reactRootContainer?(qo(function(){Mf(null,null,o,!1,function(){o._reactRootContainer=null,o[Di]=null})}),!0):!1},jn.unstable_batchedUpdates=My,jn.unstable_renderSubtreeIntoContainer=function(o,l,h,p){if(!Nf(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Mf(o,l,h,!1,p)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var CS;function qL(){if(CS)return Gy.exports;CS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gy.exports=KL(),Gy.exports}var IS;function QL(){if(IS)return Lf;IS=1;var t=qL();return Lf.createRoot=t.createRoot,Lf.hydrateRoot=t.hydrateRoot,Lf}var YL=QL();const S_="/assets/logo-CB0EJWcn.png";function ya({children:t,type:e,onClick:n}){const[r,i]=O.useState("");return O.useEffect(()=>{e=="primary"?i("btn-primary"):e=="secondary"?i("btn-secondary"):i("btn-red")}),Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:`btn ${r}`,onClick:n,children:Q.jsx("p",{className:"btn-text",children:t})})})}var bc={},PS;function XL(){if(PS)return bc;PS=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.parse=a,bc.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,T){const S=new s,I=y.length;if(I<2)return S;const x=(T==null?void 0:T.decode)||m;let k=0;do{const F=y.indexOf("=",k);if(F===-1)break;const V=y.indexOf(";",k),z=V===-1?I:V;if(F>z){k=y.lastIndexOf(";",F-1)+1;continue}const j=u(y,k,F),Y=c(y,F,j),D=y.slice(j,Y);if(S[D]===void 0){let A=u(y,F+1,z),b=c(y,z,A);const E=x(y.slice(A,b));S[D]=E}k=z+1}while(k<I);return S}function u(y,T,S){do{const I=y.charCodeAt(T);if(I!==32&&I!==9)return T}while(++T<S);return S}function c(y,T,S){for(;T>S;){const I=y.charCodeAt(--T);if(I!==32&&I!==9)return T+1}return S}function d(y,T,S){const I=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const x=I(T);if(!e.test(x))throw new TypeError(`argument val is invalid: ${T}`);let k=y+"="+x;if(!S)return k;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);k+="; Max-Age="+S.maxAge}if(S.domain){if(!n.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);k+="; Domain="+S.domain}if(S.path){if(!r.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);k+="; Path="+S.path}if(S.expires){if(!g(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);k+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(k+="; HttpOnly"),S.secure&&(k+="; Secure"),S.partitioned&&(k+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return k}function m(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return i.call(y)==="[object Date]"}return bc}XL();/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var AS="popstate";function JL(t={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Qv("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mh(i)}return eV(e,n,null,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZL(){return Math.random().toString(36).substring(2,10)}function xS(t,e){return{usr:t.state,key:t.key,idx:e}}function Qv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Tu(e):e,state:n,key:e&&e.key||r||ZL()}}function mh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Tu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function eV(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",c=null,d=m();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function m(){return(a.state||{idx:null}).idx}function g(){u="POP";let x=m(),k=x==null?null:x-d;d=x,c&&c({action:u,location:I.location,delta:k})}function y(x,k){u="PUSH";let F=Qv(I.location,x,k);d=m()+1;let V=xS(F,d),z=I.createHref(F);try{a.pushState(V,"",z)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(z)}s&&c&&c({action:u,location:I.location,delta:1})}function T(x,k){u="REPLACE";let F=Qv(I.location,x,k);d=m();let V=xS(F,d),z=I.createHref(F);a.replaceState(V,"",z),s&&c&&c({action:u,location:I.location,delta:0})}function S(x){let k=i.location.origin!=="null"?i.location.origin:i.location.href,F=typeof x=="string"?x:mh(x);return F=F.replace(/ $/,"%20"),Tt(k,`No window.location.(origin|href) available to create URL for href: ${F}`),new URL(F,k)}let I={get action(){return u},get location(){return t(i,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(AS,g),c=x,()=>{i.removeEventListener(AS,g),c=null}},createHref(x){return e(i,x)},createURL:S,encodeLocation(x){let k=S(x);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:T,go(x){return a.go(x)}};return I}function Cx(t,e,n="/"){return tV(t,e,n,!1)}function tV(t,e,n,r){let i=typeof e=="string"?Tu(e):e,s=no(i.pathname||"/",n);if(s==null)return null;let a=Ix(t);nV(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let d=fV(s);u=hV(a[c],d,r)}return u}function Ix(t,e=[],n=[],r=""){let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Tt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let d=Qi([r,c.relativePath]),m=n.concat(c);s.children&&s.children.length>0&&(Tt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Ix(s.children,e,m,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:uV(d,s.index),routesMeta:m})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of Px(s.path))i(s,a,c)}),e}function Px(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Px(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function nV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var rV=/^:[\w-]+$/,iV=3,sV=2,oV=1,aV=10,lV=-2,RS=t=>t==="*";function uV(t,e){let n=t.split("/"),r=n.length;return n.some(RS)&&(r+=lV),e&&(r+=sV),n.filter(i=>!RS(i)).reduce((i,s)=>i+(rV.test(s)?iV:s===""?oV:aV),r)}function cV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hV(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Cp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),y=c.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=Cp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:Qi([s,g.pathname]),pathnameBase:yV(Qi([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=Qi([s,g.pathnameBase]))}return a}function Cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:g},y)=>{if(m==="*"){let S=u[y]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const T=u[y];return g&&!T?d[m]=void 0:d[m]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function dV(t,e=!1,n=!0){vo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vo(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function no(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function pV(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Tu(t):t;return{pathname:n?n.startsWith("/")?n:mV(n,e):e,search:vV(r),hash:_V(i)}}function mV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Qy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ax(t){let e=gV(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function xx(t,e,n,r=!1){let i;typeof t=="string"?i=Tu(t):(i={...t},Tt(!i.pathname||!i.pathname.includes("?"),Qy("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),Qy("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),Qy("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?e[g]:"/"}let c=pV(i,u),d=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var Qi=t=>t.join("/").replace(/\/\/+/g,"/"),yV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_V=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Rx=["POST","PUT","PATCH","DELETE"];new Set(Rx);var TV=["GET",...Rx];new Set(TV);var Eu=O.createContext(null);Eu.displayName="DataRouter";var vm=O.createContext(null);vm.displayName="DataRouterState";var kx=O.createContext({isTransitioning:!1});kx.displayName="ViewTransition";var EV=O.createContext(new Map);EV.displayName="Fetchers";var SV=O.createContext(null);SV.displayName="Await";var Ti=O.createContext(null);Ti.displayName="Navigation";var Gh=O.createContext(null);Gh.displayName="Location";var ps=O.createContext({outlet:null,matches:[],isDataRoute:!1});ps.displayName="Route";var C_=O.createContext(null);C_.displayName="RouteError";function CV(t,{relative:e}={}){Tt(Kh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(Ti),{hash:i,pathname:s,search:a}=Qh(t,{relative:e}),u=s;return n!=="/"&&(u=s==="/"?n:Qi([n,s])),r.createHref({pathname:u,search:a,hash:i})}function Kh(){return O.useContext(Gh)!=null}function Pa(){return Tt(Kh(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Gh).location}var bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dx(t){O.useContext(Ti).static||O.useLayoutEffect(t)}function qh(){let{isDataRoute:t}=O.useContext(ps);return t?VV():IV()}function IV(){Tt(Kh(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(Eu),{basename:e,navigator:n}=O.useContext(Ti),{matches:r}=O.useContext(ps),{pathname:i}=Pa(),s=JSON.stringify(Ax(r)),a=O.useRef(!1);return Dx(()=>{a.current=!0}),O.useCallback((c,d={})=>{if(vo(a.current,bx),!a.current)return;if(typeof c=="number"){n.go(c);return}let m=xx(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Qi([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,s,i,t])}O.createContext(null);function Qh(t,{relative:e}={}){let{matches:n}=O.useContext(ps),{pathname:r}=Pa(),i=JSON.stringify(Ax(n));return O.useMemo(()=>xx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function PV(t,e){return Nx(t,e)}function Nx(t,e,n,r){var I;Tt(Kh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(Ti),{matches:s}=O.useContext(ps),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Pa(),m;if(e){let x=typeof e=="string"?Tu(e):e;Tt(c==="/"||((I=x.pathname)==null?void 0:I.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=d;let g=m.pathname||"/",y=g;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=Cx(t,{pathname:y}),S=bV(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Qi([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Qi([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&S?O.createElement(Gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function AV(){let t=LV(),e=wV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}var xV=O.createElement(AV,null),RV=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?O.createElement(ps.Provider,{value:this.props.routeContext},O.createElement(C_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kV({routeContext:t,match:e,children:n}){let r=O.useContext(Eu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(ps.Provider,{value:t},n)}function bV(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Tt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(n)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:m,errors:g}=n,y=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,d,m)=>{let g,y=!1,T=null,S=null;n&&(g=s&&d.route.id?s[d.route.id]:void 0,T=d.route.errorElement||xV,a&&(u<0&&m===0?(FV("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):u===m&&(y=!0,S=d.route.hydrateFallbackElement||null)));let I=e.concat(i.slice(0,m+1)),x=()=>{let k;return g?k=T:y?k=S:d.route.Component?k=O.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=c,O.createElement(kV,{match:d,routeContext:{outlet:c,matches:I,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?O.createElement(RV,{location:n.location,revalidation:n.revalidation,component:T,error:g,children:x(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):x()},null)}function I_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DV(t){let e=O.useContext(Eu);return Tt(e,I_(t)),e}function NV(t){let e=O.useContext(vm);return Tt(e,I_(t)),e}function MV(t){let e=O.useContext(ps);return Tt(e,I_(t)),e}function P_(t){let e=MV(t),n=e.matches[e.matches.length-1];return Tt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function OV(){return P_("useRouteId")}function LV(){var r;let t=O.useContext(C_),e=NV("useRouteError"),n=P_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function VV(){let{router:t}=DV("useNavigate"),e=P_("useNavigate"),n=O.useRef(!1);return Dx(()=>{n.current=!0}),O.useCallback(async(i,s={})=>{vo(n.current,bx),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var kS={};function FV(t,e,n){kS[t]||(kS[t]=!0,vo(!1,n))}O.memo($V);function $V({routes:t,future:e,state:n}){return Nx(t,void 0,n,e)}function Yv(t){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BV({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Tt(!Kh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Tu(n));let{pathname:c="/",search:d="",hash:m="",state:g=null,key:y="default"}=n,T=O.useMemo(()=>{let S=no(c,a);return S==null?null:{location:{pathname:S,search:d,hash:m,state:g,key:y},navigationType:r}},[a,c,d,m,g,y,r]);return vo(T!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:O.createElement(Ti.Provider,{value:u},O.createElement(Gh.Provider,{children:e,value:T}))}function UV({children:t,location:e}){return PV(Xv(t),e)}function Xv(t,e=[]){let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,Xv(r.props.children,s));return}Tt(r.type===Yv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Xv(r.props.children,s)),n.push(a)}),n}var rp="get",ip="application/x-www-form-urlencoded";function _m(t){return t!=null&&typeof t.tagName=="string"}function jV(t){return _m(t)&&t.tagName.toLowerCase()==="button"}function zV(t){return _m(t)&&t.tagName.toLowerCase()==="form"}function WV(t){return _m(t)&&t.tagName.toLowerCase()==="input"}function HV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GV(t,e){return t.button===0&&(!e||e==="_self")&&!HV(t)}var Vf=null;function KV(){if(Vf===null)try{new FormData(document.createElement("form"),0),Vf=!1}catch{Vf=!0}return Vf}var qV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yy(t){return t!=null&&!qV.has(t)?(vo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ip}"`),null):t}function QV(t,e){let n,r,i,s,a;if(zV(t)){let u=t.getAttribute("action");r=u?no(u,e):null,n=t.getAttribute("method")||rp,i=Yy(t.getAttribute("enctype"))||ip,s=new FormData(t)}else if(jV(t)||WV(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(r=c?no(c,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||rp,i=Yy(t.getAttribute("formenctype"))||Yy(u.getAttribute("enctype"))||ip,s=new FormData(u,t),!KV()){let{name:d,type:m,value:g}=t;if(m==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,g)}}else{if(_m(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rp,r=null,i=ip,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function A_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function YV(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XV(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function JV(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await YV(s,n);return a.links?a.links():[]}return[]}));return n2(r.flat(1).filter(XV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bS(t,e,n,r,i,s){let a=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,u=(c,d)=>{var m;return n[d].pathname!==c.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>a(c,d)||u(c,d)):s==="data"?e.filter((c,d)=>{var g;let m=r.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(a(c,d)||u(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ZV(t,e){return e2(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function e2(t){return[...new Set(t)]}function t2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function n2(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(t2(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function r2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function i2(){let t=O.useContext(Eu);return A_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function s2(){let t=O.useContext(vm);return A_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var x_=O.createContext(void 0);x_.displayName="FrameworkContext";function Mx(){let t=O.useContext(x_);return A_(t,"You must render this element inside a <HydratedRouter> element"),t}function o2(t,e){let n=O.useContext(x_),[r,i]=O.useState(!1),[s,a]=O.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,y=O.useRef(null);O.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let I=k=>{k.forEach(F=>{a(F.isIntersecting)})},x=new IntersectionObserver(I,{threshold:.5});return y.current&&x.observe(y.current),()=>{x.disconnect()}}},[t]),O.useEffect(()=>{if(r){let I=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(I)}}},[r]);let T=()=>{i(!0)},S=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,y,{}]:[s,y,{onFocus:Dc(u,T),onBlur:Dc(c,S),onMouseEnter:Dc(d,T),onMouseLeave:Dc(m,S),onTouchStart:Dc(g,T)}]:[!1,y,{}]}function Dc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function a2({page:t,...e}){let{router:n}=i2(),r=O.useMemo(()=>Cx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?O.createElement(u2,{page:t,matches:r,...e}):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function l2(t){let{manifest:e,routeModules:n}=Mx(),[r,i]=O.useState([]);return O.useEffect(()=>{let s=!1;return JV(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function u2({page:t,matches:e,...n}){let r=Pa(),{manifest:i,routeModules:s}=Mx(),{loaderData:a,matches:u}=s2(),c=O.useMemo(()=>bS(t,e,u,i,r,"data"),[t,e,u,i,r]),d=O.useMemo(()=>bS(t,e,u,i,r,"assets"),[t,e,u,i,r]),m=O.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,S=!1;if(e.forEach(x=>{var F;let k=i.routes[x.route.id];!k||!k.hasLoader||(!c.some(V=>V.route.id===x.route.id)&&x.route.id in a&&((F=s[x.route.id])!=null&&F.shouldRevalidate)||k.hasClientLoader?S=!0:T.add(x.route.id))}),T.size===0)return[];let I=r2(t);return S&&T.size>0&&I.searchParams.set("_routes",e.filter(x=>T.has(x.route.id)).map(x=>x.route.id).join(",")),[I.pathname+I.search]},[a,r,i,c,e,t,s]),g=O.useMemo(()=>ZV(d,i),[d,i]),y=l2(d);return O.createElement(O.Fragment,null,m.map(T=>O.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),g.map(T=>O.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),y.map(({key:T,link:S})=>O.createElement("link",{key:T,...S})))}function c2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ox&&(window.__reactRouterVersion="7.0.1")}catch{}function h2({basename:t,children:e,window:n}){let r=O.useRef();r.current==null&&(r.current=JL({window:n,v5Compat:!0}));let i=r.current,[s,a]=O.useState({action:i.action,location:i.location}),u=O.useCallback(c=>{O.startTransition(()=>a(c))},[a]);return O.useLayoutEffect(()=>i.listen(u),[i,u]),O.createElement(BV,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=O.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:c,to:d,preventScrollReset:m,viewTransition:g,...y},T){let{basename:S}=O.useContext(Ti),I=typeof d=="string"&&Lx.test(d),x,k=!1;if(typeof d=="string"&&I&&(x=d,Ox))try{let b=new URL(window.location.href),E=d.startsWith("//")?new URL(b.protocol+d):new URL(d),M=no(E.pathname,S);E.origin===b.origin&&M!=null?d=M+E.search+E.hash:k=!0}catch{vo(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=CV(d,{relative:i}),[V,z,j]=o2(r,y),Y=m2(d,{replace:a,state:u,target:c,preventScrollReset:m,relative:i,viewTransition:g});function D(b){e&&e(b),b.defaultPrevented||Y(b)}let A=O.createElement("a",{...y,...j,href:x||F,onClick:k||s?e:D,ref:c2(T,z),target:c,"data-discover":!I&&n==="render"?"true":void 0});return V&&!I?O.createElement(O.Fragment,null,A,O.createElement(a2,{page:F})):A});Vx.displayName="Link";var d2=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:c,...d},m){let g=Qh(a,{relative:d.relative}),y=Pa(),T=O.useContext(vm),{navigator:S,basename:I}=O.useContext(Ti),x=T!=null&&w2(g)&&u===!0,k=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,F=y.pathname,V=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(F=F.toLowerCase(),V=V?V.toLowerCase():null,k=k.toLowerCase()),V&&I&&(V=no(V,I)||V);const z=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let j=F===k||!i&&F.startsWith(k)&&F.charAt(z)==="/",Y=V!=null&&(V===k||!i&&V.startsWith(k)&&V.charAt(k.length)==="/"),D={isActive:j,isPending:Y,isTransitioning:x},A=j?e:void 0,b;typeof r=="function"?b=r(D):b=[r,j?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let E=typeof s=="function"?s(D):s;return O.createElement(Vx,{...d,"aria-current":A,className:b,ref:m,style:E,to:a,viewTransition:u},typeof c=="function"?c(D):c)});d2.displayName="NavLink";var f2=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=rp,action:u,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:g,...y},T)=>{let S=v2(),I=_2(u,{relative:d}),x=a.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&Lx.test(u),F=V=>{if(c&&c(V),V.defaultPrevented)return;V.preventDefault();let z=V.nativeEvent.submitter,j=(z==null?void 0:z.getAttribute("formmethod"))||a;S(z||V.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:i,state:s,relative:d,preventScrollReset:m,viewTransition:g})};return O.createElement("form",{ref:T,method:x,action:I,onSubmit:r?c:F,...y,"data-discover":!k&&t==="render"?"true":void 0})});f2.displayName="Form";function p2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fx(t){let e=O.useContext(Eu);return Tt(e,p2(t)),e}function m2(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let u=qh(),c=Pa(),d=Qh(t,{relative:s});return O.useCallback(m=>{if(GV(m,e)){m.preventDefault();let g=n!==void 0?n:mh(c)===mh(d);u(t,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,u,d,n,r,e,t,i,s,a])}var g2=0,y2=()=>`__${String(++g2)}__`;function v2(){let{router:t}=Fx("useSubmit"),{basename:e}=O.useContext(Ti),n=OV();return O.useCallback(async(r,i={})=>{let{action:s,method:a,encType:u,formData:c,body:d}=QV(r,e);if(i.navigate===!1){let m=i.fetcherKey||y2();await t.fetch(m,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function _2(t,{relative:e}={}){let{basename:n}=O.useContext(Ti),r=O.useContext(ps);Tt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Qh(t||".",{relative:e})},a=Pa();if(t==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(m=>m==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let m=u.toString();s.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Qi([n,s.pathname])),mh(s)}function w2(t,e={}){let n=O.useContext(kx);Tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Fx("useViewTransitionState"),i=Qh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=no(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=no(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Cp(i.pathname,a)!=null||Cp(i.pathname,s)!=null}new TextEncoder;var DS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(t,e){if(!t)throw Su(e)},Su=function(t){return new Error("Firebase Database ("+$x.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},T2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},R_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,u=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let y=(u&15)<<2|d>>6,T=d&63;c||(T=64,a||(y=64)),r.push(n[m],n[g],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||d==null||g==null)throw new E2;const y=s<<2|u>>4;if(r.push(y),d!==64){const T=u<<4&240|d>>2;if(r.push(T),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ux=function(t){const e=Bx(t);return R_.encodeByteArray(e,!0)},Ip=function(t){return Ux(t).replace(/\./g,"")},Pp=function(t){try{return R_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){return jx(void 0,t)}function jx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!C2(n)||(t[n]=jx(t[n],e[n]));return t}function C2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=()=>I2().__FIREBASE_DEFAULTS__,A2=()=>{if(typeof process>"u"||typeof DS>"u")return;const t=DS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pp(t[1]);return e&&JSON.parse(e)},wm=()=>{try{return P2()||A2()||x2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zx=t=>{var e,n;return(n=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},R2=t=>{const e=zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wx=()=>{var t;return(t=wm())===null||t===void 0?void 0:t.config},Hx=t=>{var e;return(e=wm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ip(JSON.stringify(n)),Ip(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function b2(){var t;const e=(t=wm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M2(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Kx(){return $x.NODE_ADMIN===!0}function O2(){return!b2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L2(){try{return typeof indexedDB=="object"}catch{return!1}}function V2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F2,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yh.prototype.create)}}class Yh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?$2(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ms(i,u,r)}}function $2(t,e){return t.replace(B2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const B2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){return JSON.parse(t)}function Ht(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=gh(Pp(s[0])||""),n=gh(Pp(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},U2=function(t){const e=qx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},j2=function(t){const e=qx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Jv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ap(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function xp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(NS(s)&&NS(a)){if(!xp(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function NS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)r[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)r[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4],d,m;for(let g=0;g<80;g++){g<40?g<20?(d=u^s&(a^u),m=1518500249):(d=s^a^u,m=1859775393):g<60?(d=s&a|u&(s|a),m=2400959708):(d=s^a^u,m=3395469782);const y=(i<<5|i>>>27)+d+c+m+r[g]&4294967295;c=u,u=a,a=(s<<30|s>>>2)&4294967295,s=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function W2(t,e){const n=new H2(t,e);return n.subscribe.bind(n)}class H2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");G2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xy),i.error===void 0&&(i.error=Xy),i.complete===void 0&&(i.complete=Xy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xy(){}function b_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,oe(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Em=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){return t&&t._delegate?t._delegate:t}class ro{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q2(t){return t===ea?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const J2={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Z2=Oe.INFO,eF={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},tF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=Z2,this._logHandler=tF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const nF=(t,e)=>e.some(n=>t instanceof n);let MS,OS;function rF(){return MS||(MS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iF(){return OS||(OS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qx=new WeakMap,Zv=new WeakMap,Yx=new WeakMap,Jy=new WeakMap,D_=new WeakMap;function sF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Xs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Qx.set(n,t)}).catch(()=>{}),D_.set(e,t),e}function oF(t){if(Zv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Zv.set(t,e)}let e0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aF(t){e0=t(e0)}function lF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zy(this),e,...n);return Yx.set(r,e.sort?e.sort():[e]),Xs(r)}:iF().includes(t)?function(...e){return t.apply(Zy(this),e),Xs(Qx.get(this))}:function(...e){return Xs(t.apply(Zy(this),e))}}function uF(t){return typeof t=="function"?lF(t):(t instanceof IDBTransaction&&oF(t),nF(t,rF())?new Proxy(t,e0):t)}function Xs(t){if(t instanceof IDBRequest)return sF(t);if(Jy.has(t))return Jy.get(t);const e=uF(t);return e!==t&&(Jy.set(t,e),D_.set(e,t)),e}const Zy=t=>D_.get(t);function cF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),u=Xs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Xs(a.result),c.oldVersion,c.newVersion,Xs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const hF=["get","getKey","getAll","getAllKeys","count"],dF=["put","add","delete","clear"],ev=new Map;function LS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ev.get(e))return ev.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hF.includes(n)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&c.done]))[0]};return ev.set(e,s),s}aF(t=>({...t,get:(e,n,r)=>LS(e,n)||t.get(e,n,r),has:(e,n)=>!!LS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t0="@firebase/app",VS="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Sm("@firebase/app"),mF="@firebase/app-compat",gF="@firebase/analytics-compat",yF="@firebase/analytics",vF="@firebase/app-check-compat",_F="@firebase/app-check",wF="@firebase/auth",TF="@firebase/auth-compat",EF="@firebase/database",SF="@firebase/data-connect",CF="@firebase/database-compat",IF="@firebase/functions",PF="@firebase/functions-compat",AF="@firebase/installations",xF="@firebase/installations-compat",RF="@firebase/messaging",kF="@firebase/messaging-compat",bF="@firebase/performance",DF="@firebase/performance-compat",NF="@firebase/remote-config",MF="@firebase/remote-config-compat",OF="@firebase/storage",LF="@firebase/storage-compat",VF="@firebase/firestore",FF="@firebase/vertexai",$F="@firebase/firestore-compat",BF="firebase",UF="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",jF={[t0]:"fire-core",[mF]:"fire-core-compat",[yF]:"fire-analytics",[gF]:"fire-analytics-compat",[_F]:"fire-app-check",[vF]:"fire-app-check-compat",[wF]:"fire-auth",[TF]:"fire-auth-compat",[EF]:"fire-rtdb",[SF]:"fire-data-connect",[CF]:"fire-rtdb-compat",[IF]:"fire-fn",[PF]:"fire-fn-compat",[AF]:"fire-iid",[xF]:"fire-iid-compat",[RF]:"fire-fcm",[kF]:"fire-fcm-compat",[bF]:"fire-perf",[DF]:"fire-perf-compat",[NF]:"fire-rc",[MF]:"fire-rc-compat",[OF]:"fire-gcs",[LF]:"fire-gcs-compat",[VF]:"fire-fst",[$F]:"fire-fst-compat",[FF]:"fire-vertex","fire-js":"fire-js",[BF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Map,zF=new Map,r0=new Map;function FS(t,e){try{t.container.addComponent(e)}catch(n){as.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function va(t){const e=t.name;if(r0.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const n of Rp.values())FS(n,t);for(const n of zF.values())FS(n,t);return!0}function N_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Yh("app","Firebase",WF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=UF;function Xx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:n0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Js.create("bad-app-name",{appName:String(i)});if(n||(n=Wx()),!n)throw Js.create("no-options");const s=Rp.get(i);if(s){if(xp(n,s.options)&&xp(r,s.config))return s;throw Js.create("duplicate-app",{appName:i})}const a=new X2(i);for(const c of r0.values())a.addComponent(c);const u=new HF(n,r,a);return Rp.set(i,u),u}function Jx(t=n0){const e=Rp.get(t);if(!e&&t===n0&&Wx())return Xx();if(!e)throw Js.create("no-app",{appName:t});return e}function ci(t,e,n){var r;let i=(r=jF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(u.join(" "));return}va(new ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="firebase-heartbeat-database",KF=1,yh="firebase-heartbeat-store";let tv=null;function Zx(){return tv||(tv=cF(GF,KF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Js.create("idb-open",{originalErrorMessage:t.message})})),tv}async function qF(t){try{const n=(await Zx()).transaction(yh),r=await n.objectStore(yh).get(eR(t));return await n.done,r}catch(e){if(e instanceof ms)as.warn(e.message);else{const n=Js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(n.message)}}}async function $S(t,e){try{const r=(await Zx()).transaction(yh,"readwrite");await r.objectStore(yh).put(e,eR(t)),await r.done}catch(n){if(n instanceof ms)as.warn(n.message);else{const r=Js.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});as.warn(r.message)}}}function eR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=1024,YF=30*24*60*60*1e3;class XF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=YF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BS(),{heartbeatsToSend:r,unsentEntries:i}=JF(this._heartbeatsCache.heartbeats),s=Ip(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return as.warn(n),""}}}function BS(){return new Date().toISOString().substring(0,10)}function JF(t,e=QF){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),US(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),US(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L2()?V2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $S(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $S(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function US(t){return Ip(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){va(new ro("platform-logger",e=>new fF(e),"PRIVATE")),va(new ro("heartbeat",e=>new XF(e),"PRIVATE")),ci(t0,VS,t),ci(t0,VS,"esm2017"),ci("fire-js","")}e$("");function M_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t$=tR,nR=new Yh("auth","Firebase",tR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=new Sm("@firebase/auth");function n$(t,...e){kp.logLevel<=Oe.WARN&&kp.warn(`Auth (${Aa}): ${t}`,...e)}function sp(t,...e){kp.logLevel<=Oe.ERROR&&kp.error(`Auth (${Aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,...e){throw L_(t,...e)}function Gr(t,...e){return L_(t,...e)}function O_(t,e,n){const r=Object.assign(Object.assign({},t$()),{[e]:n});return new Yh("auth","Firebase",r).create(e,{appName:t.name})}function Yi(t){return O_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r$(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(t,"argument-error"),O_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function L_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nR.create(t,...e)}function Pe(t,e,...n){if(!t)throw L_(e,...n)}function zi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sp(e),new Error(e)}function ls(t,e){t||zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function i$(){return jS()==="http:"||jS()==="https:"}function jS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i$()||N2()||"connection"in navigator)?navigator.onLine:!0}function o$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=k_()||Gx()}get(){return s$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=new Xh(3e4,6e4);function _o(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wo(t,e,n,r,i={}){return iR(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Cu(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},s);return D2()||(d.referrerPolicy="no-referrer"),rR.fetch()(sR(t,t.config.apiHost,n,u),d)})}async function iR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},a$),e);try{const i=new c$(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Ff(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ff(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Ff(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Ff(t,"user-disabled",a);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw O_(t,m,d);Ir(t,m)}}catch(i){if(i instanceof ms)throw i;Ir(t,"network-request-failed",{message:String(i)})}}async function Jh(t,e,n,r,i={}){const s=await wo(t,e,n,r,i);return"mfaPendingCredential"in s&&Ir(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?V_(t.config,i):`${t.config.apiScheme}://${i}`}function u$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gr(this.auth,"network-request-failed")),l$.get())})}}function Ff(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gr(t,e,r);return i.customData._tokenResponse=n,i}function zS(t){return t!==void 0&&t.enterprise!==void 0}class h${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return u$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function d$(t,e){return wo(t,"GET","/v2/recaptchaConfig",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function oR(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p$(t,e=!1){const n=Yn(t),r=await n.getIdToken(e),i=F_(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Jc(nv(i.auth_time)),issuedAtTime:Jc(nv(i.iat)),expirationTime:Jc(nv(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nv(t){return Number(t)*1e3}function F_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sp("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pp(n);return i?JSON.parse(i):(sp("Failed to decode base64 JWT payload"),null)}catch(i){return sp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function WS(t){const e=F_(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ms&&m$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vh(t,oR(n,{idToken:r}));Pe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aR(s.providerUserInfo):[],u=v$(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),m=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new s0(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function y$(t){const e=Yn(t);await bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aR(t){return t.map(e=>{var{providerId:n}=e,r=M_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _$(t,e){const n=await iR(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=sR(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",rR.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function w$(t,e){return wo(t,"POST","/v2/accounts:revokeToken",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=WS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _$(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Gl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=M_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new s0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vh(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p$(this,e)}reload(){return y$(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await vh(this,f$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,u,c,d,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(d=n.createdAt)!==null&&d!==void 0?d:void 0,F=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:V,emailVerified:z,isAnonymous:j,providerData:Y,stsTokenManager:D}=n;Pe(V&&D,e,"internal-error");const A=Gl.fromJSON(this.name,D);Pe(typeof V=="string",e,"internal-error"),zs(g,e.name),zs(y,e.name),Pe(typeof z=="boolean",e,"internal-error"),Pe(typeof j=="boolean",e,"internal-error"),zs(T,e.name),zs(S,e.name),zs(I,e.name),zs(x,e.name),zs(k,e.name),zs(F,e.name);const b=new Wi({uid:V,auth:e,email:y,emailVerified:z,displayName:g,isAnonymous:j,photoURL:S,phoneNumber:T,tenantId:I,stsTokenManager:A,createdAt:k,lastLoginAt:F});return Y&&Array.isArray(Y)&&(b.providerData=Y.map(E=>Object.assign({},E))),x&&(b._redirectEventId=x),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gl;i.updateFromServerResponse(n);const s=new Wi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aR(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Gl;u.updateFromIdToken(r);const c=new Wi({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new s0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Map;function Hi(t){ls(t instanceof Function,"Expected a class definition");let e=HS.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lR.type="NONE";const GS=lR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){return`firebase:${t}:${e}:${n}`}class Kl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=op(this.userKey,i.apiKey,s),this.fullPersistenceKey=op("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Kl(Hi(GS),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Hi(GS);const a=op(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const m=await d._get(a);if(m){const g=Wi._fromJSON(e,m);d!==s&&(u=g),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Kl(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Kl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pR(e))return"Blackberry";if(mR(e))return"Webos";if(cR(e))return"Safari";if((e.includes("chrome/")||hR(e))&&!e.includes("edge/"))return"Chrome";if(fR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uR(t=xn()){return/firefox\//i.test(t)}function cR(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hR(t=xn()){return/crios\//i.test(t)}function dR(t=xn()){return/iemobile/i.test(t)}function fR(t=xn()){return/android/i.test(t)}function pR(t=xn()){return/blackberry/i.test(t)}function mR(t=xn()){return/webos/i.test(t)}function $_(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T$(t=xn()){var e;return $_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E$(){return M2()&&document.documentMode===10}function gR(t=xn()){return $_(t)||fR(t)||mR(t)||pR(t)||/windows phone/i.test(t)||dR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e=[]){let n;switch(t){case"Browser":n=KS(xn());break;case"Worker":n=`${KS(xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C$(t,e={}){return wo(t,"GET","/v2/passwordPolicy",_o(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=6;class P${constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:I$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qS(this),this.idTokenSubscription=new qS(this),this.beforeStateQueue=new S$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oR(this,{idToken:e}),r=await Wi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(Yi(this));const n=e?Yn(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C$(this),n=new P$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await w$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&n$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function To(t){return Yn(t)}class qS{constructor(e){this.auth=e,this.observer=null,this.addObserver=W2(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x$(t){Cm=t}function vR(t){return Cm.loadJS(t)}function R$(){return Cm.recaptchaEnterpriseScript}function k$(){return Cm.gapiScript}function b$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class D${constructor(){this.enterprise=new N$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class N${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const M$="recaptcha-enterprise",_R="NO_RECAPTCHA";class O${constructor(e){this.type=M$,this.auth=To(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{d$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new h$(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;zS(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(_R)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D$().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!n&&zS(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=R$();c.length!==0&&(c+=u),vR(c).then(()=>{i(u,s,a)}).catch(d=>{a(d)})}}).catch(u=>{a(u)})})}}async function QS(t,e,n,r=!1,i=!1){const s=new O$(t);let a;if(i)a=_R;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function o0(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await QS(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await QS(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t,e){const n=N_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xp(s,e??{}))return i;Ir(i,"already-initialized")}return n.initialize({options:e})}function V$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function F$(t,e,n){const r=To(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=wR(e),{host:a,port:u}=$$(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),B$()}function wR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $$(t){const e=wR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:YS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:YS(a)}}}function YS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function B$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zi("not implemented")}_getIdTokenResponse(e){return zi("not implemented")}_linkToIdToken(e,n){return zi("not implemented")}_getReauthenticationResolver(e){return zi("not implemented")}}async function U$(t,e){return wo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e){return Jh(t,"POST","/v1/accounts:signInWithPassword",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z$(t,e){return Jh(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}async function W$(t,e){return Jh(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends B_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _h(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _h(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,n,"signInWithPassword",j$);case"emailLink":return z$(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,r,"signUpPassword",U$);case"emailLink":return W$(e,{idToken:n,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t,e){return Jh(t,"POST","/v1/accounts:signInWithIdp",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="http://localhost";class _a extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=M_(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new _a(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ql(e,n)}buildRequest(){const e={requestUri:H$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K$(t){const e=Uc(jc(t)).link,n=e?Uc(jc(e)).deep_link_id:null,r=Uc(jc(t)).deep_link_id;return(r?Uc(jc(r)).link:null)||r||n||e||t}class U_{constructor(e){var n,r,i,s,a,u;const c=Uc(jc(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(r=c.oobCode)!==null&&r!==void 0?r:null,g=G$((i=c.mode)!==null&&i!==void 0?i:null);Pe(d&&m&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=m,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=K$(e);try{return new U_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.providerId=Iu.PROVIDER_ID}static credential(e,n){return _h._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=U_.parseLink(n);return Pe(r,"argument-error"),_h._fromEmailAndCode(e,r.code,r.tenantId)}}Iu.PROVIDER_ID="password";Iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends j_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Zh{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Zh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Zh{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Zh{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qs.credential(n,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q$(t,e){return Jh(t,"POST","/v1/accounts:signUp",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Wi._fromIdTokenResponse(e,r,i),a=XS(r);return new wa({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=XS(r);return new wa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function XS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends ms{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dp(e,n,r,i)}}function TR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dp._fromErrorAndOperation(t,s,e,r):s})}async function Q$(t,e,n=!1){const r=await vh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y$(t,e,n=!1){const{auth:r}=t;if(zr(r.app))return Promise.reject(Yi(r));const i="reauthenticate";try{const s=await vh(t,TR(r,i,e,t),n);Pe(s.idToken,r,"internal-error");const a=F_(s.idToken);Pe(a,r,"internal-error");const{sub:u}=a;return Pe(t.uid===u,r,"user-mismatch"),wa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e,n=!1){if(zr(t.app))return Promise.reject(Yi(t));const r="signIn",i=await TR(t,r,e),s=await wa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function X$(t,e){return ER(To(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t){const e=To(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J$(t,e,n){if(zr(t.app))return Promise.reject(Yi(t));const r=To(t),a=await o0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&SR(t),c}),u=await wa._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function Z$(t,e,n){return zr(t.app)?Promise.reject(Yi(t)):X$(Yn(t),Iu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&SR(t),r})}function e4(t,e,n,r){return Yn(t).onIdTokenChanged(e,n,r)}function t4(t,e,n){return Yn(t).beforeAuthStateChanged(e,n)}const Np="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Np,"1"),this.storage.removeItem(Np),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,r4=10;class IR extends CR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);E$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,r4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IR.type="LOCAL";const i4=IR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR extends CR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PR.type="SESSION";const AR=PR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async d=>d(n.origin,s)),c=await s4(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const d=z_("",20);i.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(y.data.response);break;default:clearTimeout(m),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function a4(t){hi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function l4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c4(){return xR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebaseLocalStorageDb",h4=1,Mp="firebaseLocalStorage",kR="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(t,e){return t.transaction([Mp],e?"readwrite":"readonly").objectStore(Mp)}function d4(){const t=indexedDB.deleteDatabase(RR);return new ed(t).toPromise()}function a0(){const t=indexedDB.open(RR,h4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mp,{keyPath:kR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mp)?e(r):(r.close(),await d4(),e(await a0()))})})}async function JS(t,e,n){const r=Pm(t,!0).put({[kR]:e,value:n});return new ed(r).toPromise()}async function f4(t,e){const n=Pm(t,!1).get(e),r=await new ed(n).toPromise();return r===void 0?null:r.value}function ZS(t,e){const n=Pm(t,!0).delete(e);return new ed(n).toPromise()}const p4=800,m4=3;class bR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await a0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>m4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(c4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await l4(),!this.activeServiceWorker)return;this.sender=new o4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await a0();return await JS(e,Np,"1"),await ZS(e,Np),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>f4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Pm(i,!1).getAll();return new ed(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bR.type="LOCAL";const g4=bR;new Xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){return e?Hi(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function y4(t){return ER(t.auth,new W_(t),t.bypassAuthState)}function v4(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Y$(n,new W_(t),t.bypassAuthState)}async function _4(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Q$(n,new W_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y4;case"linkViaPopup":case"linkViaRedirect":return _4;case"reauthViaPopup":case"reauthViaRedirect":return v4;default:Ir(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new Xh(2e3,1e4);async function MR(t,e,n){if(zr(t.app))return Promise.reject(Gr(t,"operation-not-supported-in-this-environment"));const r=To(t);r$(t,e,j_);const i=DR(r,n);return new oa(r,"signInViaPopup",e,i).executeNotNull()}class oa extends NR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w4.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="pendingRedirect",ap=new Map;class E4 extends NR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ap.get(this.auth._key());if(!e){try{const r=await S4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ap.set(this.auth._key(),e)}return this.bypassAuthState||ap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S4(t,e){const n=P4(e),r=I4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function C4(t,e){ap.set(t._key(),e)}function I4(t){return Hi(t._redirectPersistence)}function P4(t){return op(T4,t.config.apiKey,t.name)}async function A4(t,e,n=!1){if(zr(t.app))return Promise.reject(Yi(t));const r=To(t),i=DR(r,e),a=await new E4(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=10*60*1e3;class R4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x4&&this.cachedEventUids.clear(),this.cachedEventUids.has(eC(e))}saveEventToCache(e){this.cachedEventUids.add(eC(e)),this.lastProcessedEventTime=Date.now()}}function eC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N4=/^https?/;async function M4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b4(t);for(const n of e)try{if(O4(n))return}catch{}Ir(t,"unauthorized-domain")}function O4(t){const e=i0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!N4.test(n))return!1;if(D4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new Xh(3e4,6e4);function tC(){const t=hi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V4(t){return new Promise((e,n)=>{var r,i,s;function a(){tC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tC(),n(Gr(t,"network-request-failed"))},timeout:L4.get()})}if(!((i=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)a();else{const u=b$("iframefcb");return hi()[u]=()=>{gapi.load?a():n(Gr(t,"network-request-failed"))},vR(`${k$()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw lp=null,e})}let lp=null;function F4(t){return lp=lp||V4(t),lp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new Xh(5e3,15e3),B4="__/auth/iframe",U4="emulator/auth/iframe",j4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W4(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?V_(e,U4):`https://${t.config.authDomain}/${B4}`,r={apiKey:e.apiKey,appName:t.name,v:Aa},i=z4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cu(r).slice(1)}`}async function H4(t){const e=await F4(t),n=hi().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:W4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Gr(t,"network-request-failed"),u=hi().setTimeout(()=>{s(a)},$4.get());function c(){hi().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K4=500,q4=600,Q4="_blank",Y4="http://localhost";class nC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X4(t,e,n,r=K4,i=q4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},G4),{width:r.toString(),height:i.toString(),top:s,left:a}),d=xn().toLowerCase();n&&(u=hR(d)?Q4:n),uR(d)&&(e=e||Y4,c.scrollbars="yes");const m=Object.entries(c).reduce((y,[T,S])=>`${y}${T}=${S},`,"");if(T$(d)&&u!=="_self")return J4(e||"",u),new nC(null);const g=window.open(e||"",u,m);Pe(g,t,"popup-blocked");try{g.focus()}catch{}return new nC(g)}function J4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="__/auth/handler",e5="emulator/auth/handler",t5=encodeURIComponent("fac");async function rC(t,e,n,r,i,s){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Aa,eventId:i};if(e instanceof j_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Jv(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Zh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),d=c?`#${t5}=${encodeURIComponent(c)}`:"";return`${n5(t)}?${Cu(u).slice(1)}${d}`}function n5({config:t}){return t.emulator?V_(t,e5):`https://${t.authDomain}/${Z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="webStorageSupport";class r5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AR,this._completeRedirectFn=A4,this._overrideRedirectResult=C4}async _openPopup(e,n,r,i){var s;ls((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await rC(e,n,r,i0(),i);return X4(e,a,z_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await rC(e,n,r,i0(),i);return a4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ls(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H4(e),r=new R4(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rv,{type:rv},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[rv];a!==void 0&&n(!!a),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gR()||cR()||$_()}}const i5=r5;var iC="@firebase/auth",sC="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a5(t){va(new ro("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(t)},d=new A$(r,i,s,c);return V$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),va(new ro("auth-internal",e=>{const n=To(e.getProvider("auth").getImmediate());return(r=>new s5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(iC,sC,o5(t)),ci(iC,sC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=5*60,u5=Hx("authIdTokenMaxAge")||l5;let oC=null;const c5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u5)return;const i=n==null?void 0:n.token;oC!==i&&(oC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function h5(t=Jx()){const e=N_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=L$(t,{popupRedirectResolver:i5,persistence:[g4,i4,AR]}),r=Hx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=c5(s.toString());t4(n,a,()=>a(n.currentUser)),e4(n,u=>a(u))}}const i=zx("auth");return i&&F$(n,`http://${i}`),n}function d5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}x$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Gr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",d5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a5("Browser");var f5="firebase",p5="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(f5,p5,"app");var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var da,LR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function b(){}b.prototype=A.prototype,D.D=A.prototype,D.prototype=new b,D.prototype.constructor=D,D.C=function(E,M,$){for(var N=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)N[Re-2]=arguments[Re];return A.prototype[M].apply(E,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,A,b){b||(b=0);var E=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)E[M]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(M=0;16>M;++M)E[M]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=D.g[0],b=D.g[1],M=D.g[2];var $=D.g[3],N=A+($^b&(M^$))+E[0]+3614090360&4294967295;A=b+(N<<7&4294967295|N>>>25),N=$+(M^A&(b^M))+E[1]+3905402710&4294967295,$=A+(N<<12&4294967295|N>>>20),N=M+(b^$&(A^b))+E[2]+606105819&4294967295,M=$+(N<<17&4294967295|N>>>15),N=b+(A^M&($^A))+E[3]+3250441966&4294967295,b=M+(N<<22&4294967295|N>>>10),N=A+($^b&(M^$))+E[4]+4118548399&4294967295,A=b+(N<<7&4294967295|N>>>25),N=$+(M^A&(b^M))+E[5]+1200080426&4294967295,$=A+(N<<12&4294967295|N>>>20),N=M+(b^$&(A^b))+E[6]+2821735955&4294967295,M=$+(N<<17&4294967295|N>>>15),N=b+(A^M&($^A))+E[7]+4249261313&4294967295,b=M+(N<<22&4294967295|N>>>10),N=A+($^b&(M^$))+E[8]+1770035416&4294967295,A=b+(N<<7&4294967295|N>>>25),N=$+(M^A&(b^M))+E[9]+2336552879&4294967295,$=A+(N<<12&4294967295|N>>>20),N=M+(b^$&(A^b))+E[10]+4294925233&4294967295,M=$+(N<<17&4294967295|N>>>15),N=b+(A^M&($^A))+E[11]+2304563134&4294967295,b=M+(N<<22&4294967295|N>>>10),N=A+($^b&(M^$))+E[12]+1804603682&4294967295,A=b+(N<<7&4294967295|N>>>25),N=$+(M^A&(b^M))+E[13]+4254626195&4294967295,$=A+(N<<12&4294967295|N>>>20),N=M+(b^$&(A^b))+E[14]+2792965006&4294967295,M=$+(N<<17&4294967295|N>>>15),N=b+(A^M&($^A))+E[15]+1236535329&4294967295,b=M+(N<<22&4294967295|N>>>10),N=A+(M^$&(b^M))+E[1]+4129170786&4294967295,A=b+(N<<5&4294967295|N>>>27),N=$+(b^M&(A^b))+E[6]+3225465664&4294967295,$=A+(N<<9&4294967295|N>>>23),N=M+(A^b&($^A))+E[11]+643717713&4294967295,M=$+(N<<14&4294967295|N>>>18),N=b+($^A&(M^$))+E[0]+3921069994&4294967295,b=M+(N<<20&4294967295|N>>>12),N=A+(M^$&(b^M))+E[5]+3593408605&4294967295,A=b+(N<<5&4294967295|N>>>27),N=$+(b^M&(A^b))+E[10]+38016083&4294967295,$=A+(N<<9&4294967295|N>>>23),N=M+(A^b&($^A))+E[15]+3634488961&4294967295,M=$+(N<<14&4294967295|N>>>18),N=b+($^A&(M^$))+E[4]+3889429448&4294967295,b=M+(N<<20&4294967295|N>>>12),N=A+(M^$&(b^M))+E[9]+568446438&4294967295,A=b+(N<<5&4294967295|N>>>27),N=$+(b^M&(A^b))+E[14]+3275163606&4294967295,$=A+(N<<9&4294967295|N>>>23),N=M+(A^b&($^A))+E[3]+4107603335&4294967295,M=$+(N<<14&4294967295|N>>>18),N=b+($^A&(M^$))+E[8]+1163531501&4294967295,b=M+(N<<20&4294967295|N>>>12),N=A+(M^$&(b^M))+E[13]+2850285829&4294967295,A=b+(N<<5&4294967295|N>>>27),N=$+(b^M&(A^b))+E[2]+4243563512&4294967295,$=A+(N<<9&4294967295|N>>>23),N=M+(A^b&($^A))+E[7]+1735328473&4294967295,M=$+(N<<14&4294967295|N>>>18),N=b+($^A&(M^$))+E[12]+2368359562&4294967295,b=M+(N<<20&4294967295|N>>>12),N=A+(b^M^$)+E[5]+4294588738&4294967295,A=b+(N<<4&4294967295|N>>>28),N=$+(A^b^M)+E[8]+2272392833&4294967295,$=A+(N<<11&4294967295|N>>>21),N=M+($^A^b)+E[11]+1839030562&4294967295,M=$+(N<<16&4294967295|N>>>16),N=b+(M^$^A)+E[14]+4259657740&4294967295,b=M+(N<<23&4294967295|N>>>9),N=A+(b^M^$)+E[1]+2763975236&4294967295,A=b+(N<<4&4294967295|N>>>28),N=$+(A^b^M)+E[4]+1272893353&4294967295,$=A+(N<<11&4294967295|N>>>21),N=M+($^A^b)+E[7]+4139469664&4294967295,M=$+(N<<16&4294967295|N>>>16),N=b+(M^$^A)+E[10]+3200236656&4294967295,b=M+(N<<23&4294967295|N>>>9),N=A+(b^M^$)+E[13]+681279174&4294967295,A=b+(N<<4&4294967295|N>>>28),N=$+(A^b^M)+E[0]+3936430074&4294967295,$=A+(N<<11&4294967295|N>>>21),N=M+($^A^b)+E[3]+3572445317&4294967295,M=$+(N<<16&4294967295|N>>>16),N=b+(M^$^A)+E[6]+76029189&4294967295,b=M+(N<<23&4294967295|N>>>9),N=A+(b^M^$)+E[9]+3654602809&4294967295,A=b+(N<<4&4294967295|N>>>28),N=$+(A^b^M)+E[12]+3873151461&4294967295,$=A+(N<<11&4294967295|N>>>21),N=M+($^A^b)+E[15]+530742520&4294967295,M=$+(N<<16&4294967295|N>>>16),N=b+(M^$^A)+E[2]+3299628645&4294967295,b=M+(N<<23&4294967295|N>>>9),N=A+(M^(b|~$))+E[0]+4096336452&4294967295,A=b+(N<<6&4294967295|N>>>26),N=$+(b^(A|~M))+E[7]+1126891415&4294967295,$=A+(N<<10&4294967295|N>>>22),N=M+(A^($|~b))+E[14]+2878612391&4294967295,M=$+(N<<15&4294967295|N>>>17),N=b+($^(M|~A))+E[5]+4237533241&4294967295,b=M+(N<<21&4294967295|N>>>11),N=A+(M^(b|~$))+E[12]+1700485571&4294967295,A=b+(N<<6&4294967295|N>>>26),N=$+(b^(A|~M))+E[3]+2399980690&4294967295,$=A+(N<<10&4294967295|N>>>22),N=M+(A^($|~b))+E[10]+4293915773&4294967295,M=$+(N<<15&4294967295|N>>>17),N=b+($^(M|~A))+E[1]+2240044497&4294967295,b=M+(N<<21&4294967295|N>>>11),N=A+(M^(b|~$))+E[8]+1873313359&4294967295,A=b+(N<<6&4294967295|N>>>26),N=$+(b^(A|~M))+E[15]+4264355552&4294967295,$=A+(N<<10&4294967295|N>>>22),N=M+(A^($|~b))+E[6]+2734768916&4294967295,M=$+(N<<15&4294967295|N>>>17),N=b+($^(M|~A))+E[13]+1309151649&4294967295,b=M+(N<<21&4294967295|N>>>11),N=A+(M^(b|~$))+E[4]+4149444226&4294967295,A=b+(N<<6&4294967295|N>>>26),N=$+(b^(A|~M))+E[11]+3174756917&4294967295,$=A+(N<<10&4294967295|N>>>22),N=M+(A^($|~b))+E[2]+718787259&4294967295,M=$+(N<<15&4294967295|N>>>17),N=b+($^(M|~A))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+$&4294967295}r.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var b=A-this.blockSize,E=this.B,M=this.h,$=0;$<A;){if(M==0)for(;$<=b;)i(this,D,$),$+=this.blockSize;if(typeof D=="string"){for(;$<A;)if(E[M++]=D.charCodeAt($++),M==this.blockSize){i(this,E),M=0;break}}else for(;$<A;)if(E[M++]=D[$++],M==this.blockSize){i(this,E),M=0;break}}this.h=M,this.o+=A},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var b=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=b&255,b/=256;for(this.u(D),D=Array(16),A=b=0;4>A;++A)for(var E=0;32>E;E+=8)D[b++]=this.g[A]>>>E&255;return D};function s(D,A){var b=u;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=A(D)}function a(D,A){this.h=A;for(var b=[],E=!0,M=D.length-1;0<=M;M--){var $=D[M]|0;E&&$==A||(b[M]=$,E=!1)}this.g=b}var u={};function c(D){return-128<=D&&128>D?s(D,function(A){return new a([A|0],0>A?-1:0)}):new a([D|0],0>D?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return x(d(-D));for(var A=[],b=1,E=0;D>=b;E++)A[E]=D/b|0,b*=4294967296;return new a(A,0)}function m(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return x(m(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(A,8)),E=g,M=0;M<D.length;M+=8){var $=Math.min(8,D.length-M),N=parseInt(D.substring(M,M+$),A);8>$?($=d(Math.pow(A,$)),E=E.j($).add(d(N))):(E=E.j(b),E=E.add(d(N)))}return E}var g=c(0),y=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-x(this).m();for(var D=0,A=1,b=0;b<this.g.length;b++){var E=this.i(b);D+=(0<=E?E:4294967296+E)*A,A*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(I(this))return"-"+x(this).toString(D);for(var A=d(Math.pow(D,6)),b=this,E="";;){var M=z(b,A).g;b=k(b,M.j(A));var $=((0<b.g.length?b.g[0]:b.h)>>>0).toString(D);if(b=M,S(b))return $+E;for(;6>$.length;)$="0"+$;E=$+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function I(D){return D.h==-1}t.l=function(D){return D=k(this,D),I(D)?-1:S(D)?0:1};function x(D){for(var A=D.g.length,b=[],E=0;E<A;E++)b[E]=~D.g[E];return new a(b,~D.h).add(y)}t.abs=function(){return I(this)?x(this):this},t.add=function(D){for(var A=Math.max(this.g.length,D.g.length),b=[],E=0,M=0;M<=A;M++){var $=E+(this.i(M)&65535)+(D.i(M)&65535),N=($>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);E=N>>>16,$&=65535,N&=65535,b[M]=N<<16|$}return new a(b,b[b.length-1]&-2147483648?-1:0)};function k(D,A){return D.add(x(A))}t.j=function(D){if(S(this)||S(D))return g;if(I(this))return I(D)?x(this).j(x(D)):x(x(this).j(D));if(I(D))return x(this.j(x(D)));if(0>this.l(T)&&0>D.l(T))return d(this.m()*D.m());for(var A=this.g.length+D.g.length,b=[],E=0;E<2*A;E++)b[E]=0;for(E=0;E<this.g.length;E++)for(var M=0;M<D.g.length;M++){var $=this.i(E)>>>16,N=this.i(E)&65535,Re=D.i(M)>>>16,Je=D.i(M)&65535;b[2*E+2*M]+=N*Je,F(b,2*E+2*M),b[2*E+2*M+1]+=$*Je,F(b,2*E+2*M+1),b[2*E+2*M+1]+=N*Re,F(b,2*E+2*M+1),b[2*E+2*M+2]+=$*Re,F(b,2*E+2*M+2)}for(E=0;E<A;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=A;E<2*A;E++)b[E]=0;return new a(b,0)};function F(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function V(D,A){this.g=D,this.h=A}function z(D,A){if(S(A))throw Error("division by zero");if(S(D))return new V(g,g);if(I(D))return A=z(x(D),A),new V(x(A.g),x(A.h));if(I(A))return A=z(D,x(A)),new V(x(A.g),A.h);if(30<D.g.length){if(I(D)||I(A))throw Error("slowDivide_ only works with positive integers.");for(var b=y,E=A;0>=E.l(D);)b=j(b),E=j(E);var M=Y(b,1),$=Y(E,1);for(E=Y(E,2),b=Y(b,2);!S(E);){var N=$.add(E);0>=N.l(D)&&(M=M.add(b),$=N),E=Y(E,1),b=Y(b,1)}return A=k(D,M.j(A)),new V(M,A)}for(M=g;0<=D.l(A);){for(b=Math.max(1,Math.floor(D.m()/A.m())),E=Math.ceil(Math.log(b)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),$=d(b),N=$.j(A);I(N)||0<N.l(D);)b-=E,$=d(b),N=$.j(A);S($)&&($=y),M=M.add($),D=k(D,N)}return new V(M,D)}t.A=function(D){return z(this,D).h},t.and=function(D){for(var A=Math.max(this.g.length,D.g.length),b=[],E=0;E<A;E++)b[E]=this.i(E)&D.i(E);return new a(b,this.h&D.h)},t.or=function(D){for(var A=Math.max(this.g.length,D.g.length),b=[],E=0;E<A;E++)b[E]=this.i(E)|D.i(E);return new a(b,this.h|D.h)},t.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),b=[],E=0;E<A;E++)b[E]=this.i(E)^D.i(E);return new a(b,this.h^D.h)};function j(D){for(var A=D.g.length+1,b=[],E=0;E<A;E++)b[E]=D.i(E)<<1|D.i(E-1)>>>31;return new a(b,D.h)}function Y(D,A){var b=A>>5;A%=32;for(var E=D.g.length-b,M=[],$=0;$<E;$++)M[$]=0<A?D.i($+b)>>>A|D.i($+b+1)<<32-A:D.i($+b);return new a(M,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,da=a}).apply(typeof aC<"u"?aC:typeof self<"u"?self:typeof window<"u"?window:{});var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VR,zc,FR,up,l0,$R,BR,UR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,C){return f==Array.prototype||f==Object.prototype||(f[_]=C.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof $f=="object"&&$f];for(var _=0;_<f.length;++_){var C=f[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(f,_){if(_)e:{var C=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var H=f[R];if(!(H in C))break e;C=C[H]}f=f[f.length-1],R=C[f],_=_(R),_!=R&&_!=null&&e(C,f,{configurable:!0,writable:!0,value:_})}}function s(f,_){f instanceof String&&(f+="");var C=0,R=!1,H={next:function(){if(!R&&C<f.length){var X=C++;return{value:_(X,f[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(f){return f||function(){return s(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function d(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function m(f,_,C){return f.call.apply(f.bind,arguments)}function g(f,_,C){if(!f)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,R),f.apply(_,H)}}return function(){return f.apply(_,arguments)}}function y(f,_,C){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function T(f,_){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function S(f,_){function C(){}C.prototype=_.prototype,f.aa=_.prototype,f.prototype=new C,f.prototype.constructor=f,f.Qb=function(R,H,X){for(var ae=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ae[Ze-2]=arguments[Ze];return _.prototype[H].apply(R,ae)}}function I(f){const _=f.length;if(0<_){const C=Array(_);for(let R=0;R<_;R++)C[R]=f[R];return C}return[]}function x(f,_){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(c(R)){const H=f.length||0,X=R.length||0;f.length=H+X;for(let ae=0;ae<X;ae++)f[H+ae]=R[ae]}else f.push(R)}}class k{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(f){return/^[\s\xa0]*$/.test(f)}function V(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function z(f){return z[" "](f),f}z[" "]=function(){};var j=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function Y(f,_,C){for(const R in f)_.call(C,f[R],R,f)}function D(f,_){for(const C in f)_.call(void 0,f[C],C,f)}function A(f){const _={};for(const C in f)_[C]=f[C];return _}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(f,_){let C,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(C in R)f[C]=R[C];for(let X=0;X<b.length;X++)C=b[X],Object.prototype.hasOwnProperty.call(R,C)&&(f[C]=R[C])}}function M(f){var _=1;f=f.split(":");const C=[];for(;0<_&&f.length;)C.push(f.shift()),_--;return f.length&&C.push(f.join(":")),C}function $(f){u.setTimeout(()=>{throw f},0)}function N(){var f=ge;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class Re{constructor(){this.h=this.g=null}add(_,C){const R=Je.get();R.set(_,C),this.h?this.h.next=R:this.g=R,this.h=R}}var Je=new k(()=>new ft,f=>f.reset());class ft{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ne=!1,ge=new Re,le=()=>{const f=u.Promise.resolve(void 0);pe=()=>{f.then(W)}};var W=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(C){$(C)}var _=Je;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}ne=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return f}();function De(f,_){if(ve.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var C=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(j){e:{try{z(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else C=="mouseover"?_=f.fromElement:C=="mouseout"&&(_=f.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:$e[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&De.aa.h.call(this)}}S(De,ve);var $e={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function ot(f,_,C,R,H){this.listener=f,this.proxy=null,this.src=_,this.type=C,this.capture=!!R,this.ha=H,this.key=++Qe,this.da=this.fa=!1}function Qt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ei(f){this.src=f,this.g={},this.h=0}Ei.prototype.add=function(f,_,C,R,H){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var ae=vs(f,_,R,H);return-1<ae?(_=f[ae],C||(_.fa=!1)):(_=new ot(_,this.src,X,!!R,H),_.fa=C,f.push(_)),_};function Da(f,_){var C=_.type;if(C in f.g){var R=f.g[C],H=Array.prototype.indexOf.call(R,_,void 0),X;(X=0<=H)&&Array.prototype.splice.call(R,H,1),X&&(Qt(_),f.g[C].length==0&&(delete f.g[C],f.h--))}}function vs(f,_,C,R){for(var H=0;H<f.length;++H){var X=f[H];if(!X.da&&X.listener==_&&X.capture==!!C&&X.ha==R)return H}return-1}var Co="closure_lm_"+(1e6*Math.random()|0),Na={};function Lu(f,_,C,R,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)Lu(f,_[X],C,R,H);return null}return C=$u(C),f&&f[qe]?f.K(_,C,d(R)?!!R.capture:!!R,H):Vu(f,_,C,!1,R,H)}function Vu(f,_,C,R,H,X){if(!_)throw Error("Invalid event type");var ae=d(H)?!!H.capture:!!H,Ze=Oa(f);if(Ze||(f[Co]=Ze=new Ei(f)),C=Ze.add(_,C,R,ae,X),C.proxy)return C;if(R=wd(),C.proxy=R,R.src=f,R.listener=C,f.addEventListener)be||(H=ae),H===void 0&&(H=!1),f.addEventListener(_.toString(),R,H);else if(f.attachEvent)f.attachEvent(Ci(_.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function wd(){function f(C){return _.call(f.src,f.listener,C)}const _=Fu;return f}function Ma(f,_,C,R,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)Ma(f,_[X],C,R,H);else R=d(R)?!!R.capture:!!R,C=$u(C),f&&f[qe]?(f=f.i,_=String(_).toString(),_ in f.g&&(X=f.g[_],C=vs(X,C,R,H),-1<C&&(Qt(X[C]),Array.prototype.splice.call(X,C,1),X.length==0&&(delete f.g[_],f.h--)))):f&&(f=Oa(f))&&(_=f.g[_.toString()],f=-1,_&&(f=vs(_,C,R,H)),(C=-1<f?_[f]:null)&&Si(C))}function Si(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[qe])Da(_.i,f);else{var C=f.type,R=f.proxy;_.removeEventListener?_.removeEventListener(C,R,f.capture):_.detachEvent?_.detachEvent(Ci(C),R):_.addListener&&_.removeListener&&_.removeListener(R),(C=Oa(_))?(Da(C,f),C.h==0&&(C.src=null,_[Co]=null)):Qt(f)}}}function Ci(f){return f in Na?Na[f]:Na[f]="on"+f}function Fu(f,_){if(f.da)f=!0;else{_=new De(_,this);var C=f.listener,R=f.ha||f.src;f.fa&&Si(f),f=C.call(R,_)}return f}function Oa(f){return f=f[Co],f instanceof Ei?f:null}var La="__closure_events_fn_"+(1e9*Math.random()>>>0);function $u(f){return typeof f=="function"?f:(f[La]||(f[La]=function(_){return f.handleEvent(_)}),f[La])}function Bt(){Z.call(this),this.i=new Ei(this),this.M=this,this.F=null}S(Bt,Z),Bt.prototype[qe]=!0,Bt.prototype.removeEventListener=function(f,_,C,R){Ma(this,f,_,C,R)};function Ut(f,_){var C,R=f.F;if(R)for(C=[];R;R=R.F)C.push(R);if(f=f.M,R=_.type||_,typeof _=="string")_=new ve(_,f);else if(_ instanceof ve)_.target=_.target||f;else{var H=_;_=new ve(R,f),E(_,H)}if(H=!0,C)for(var X=C.length-1;0<=X;X--){var ae=_.g=C[X];H=Ii(ae,R,!0,_)&&H}if(ae=_.g=f,H=Ii(ae,R,!0,_)&&H,H=Ii(ae,R,!1,_)&&H,C)for(X=0;X<C.length;X++)ae=_.g=C[X],H=Ii(ae,R,!1,_)&&H}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var C=f.g[_],R=0;R<C.length;R++)Qt(C[R]);delete f.g[_],f.h--}}this.F=null},Bt.prototype.K=function(f,_,C,R){return this.i.add(String(f),_,!1,C,R)},Bt.prototype.L=function(f,_,C,R){return this.i.add(String(f),_,!0,C,R)};function Ii(f,_,C,R){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var ae=_[X];if(ae&&!ae.da&&ae.capture==C){var Ze=ae.listener,jt=ae.ha||ae.src;ae.fa&&Da(f.i,ae),H=Ze.call(jt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Bu(f,_,C){if(typeof f=="function")C&&(f=y(f,C));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(f,_||0)}function _s(f){f.g=Bu(()=>{f.g=null,f.i&&(f.i=!1,_s(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Io extends Z{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_s(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Po(f){Z.call(this),this.h=f,this.g={}}S(Po,Z);var Uu=[];function ju(f){Y(f.g,function(_,C){this.g.hasOwnProperty(C)&&Si(_)},f),f.g={}}Po.prototype.N=function(){Po.aa.N.call(this),ju(this)},Po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=u.JSON.stringify,Wu=u.JSON.parse,Hu=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Ao(){}Ao.prototype.h=null;function Va(f){return f.h||(f.h=f.i())}function Fa(){}var ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qr(){ve.call(this,"d")}S(qr,ve);function $a(){ve.call(this,"c")}S($a,ve);var Qr={},Gu=null;function xo(){return Gu=Gu||new Bt}Qr.La="serverreachability";function Ku(f){ve.call(this,Qr.La,f)}S(Ku,ve);function Pi(f){const _=xo();Ut(_,new Ku(_))}Qr.STAT_EVENT="statevent";function qu(f,_){ve.call(this,Qr.STAT_EVENT,f),this.stat=_}S(qu,ve);function kt(f){const _=xo();Ut(_,new qu(_,f))}Qr.Ma="timingevent";function Ba(f,_){ve.call(this,Qr.Ma,f),this.size=_}S(Ba,ve);function Ar(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},_)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function ko(f,_,C,R,H,X){f.info(function(){if(f.g)if(X)for(var ae="",Ze=X.split("&"),jt=0;jt<Ze.length;jt++){var Be=Ze[jt].split("=");if(1<Be.length){var Yt=Be[0];Be=Be[1];var Lt=Yt.split("_");ae=2<=Lt.length&&Lt[1]=="type"?ae+(Yt+"="+Be+"&"):ae+(Yt+"=redacted&")}}else ae=null;else ae=X;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+_+`
`+C+`
`+ae})}function Ua(f,_,C,R,H,X,ae){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+_+`
`+C+`
`+X+" "+ae})}function xr(f,_,C,R){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+vg(f,C)+(R?" "+R:"")})}function Qu(f,_){f.info(function(){return"TIMEOUT: "+_})}Ro.prototype.info=function(){};function vg(f,_){if(!f.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(f=0;f<C.length;f++)if(Array.isArray(C[f])){var R=C[f];if(!(2>R.length)){var H=R[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return zu(C)}catch{return _}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Td={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function bo(){}S(bo,Ao),bo.prototype.g=function(){return new XMLHttpRequest},bo.prototype.i=function(){return{}},Rr=new bo;function kr(f,_,C,R){this.j=f,this.i=_,this.l=C,this.R=R||1,this.U=new Po(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ed}function Ed(){this.i=null,this.g="",this.h=!1}var Yu={},za={};function Wa(f,_,C){f.L=1,f.v=Cs(Jn(_)),f.m=C,f.P=!0,Xu(f,null)}function Xu(f,_){f.F=Date.now(),at(f),f.A=Jn(f.v);var C=f.A,R=f.R;Array.isArray(R)||(R=[String(R)]),Ps(C.i,"t",R),f.C=0,C=f.j.J,f.h=new Ed,f.g=Bd(f.j,C?_:null,!f.m),0<f.O&&(f.M=new Io(y(f.Y,f,f.g),f.O)),_=f.U,C=f.g,R=f.ca;var H="readystatechange";Array.isArray(H)||(H&&(Uu[0]=H.toString()),H=Uu);for(var X=0;X<H.length;X++){var ae=Lu(C,H[X],R||_.handleEvent,!1,_.h||_);if(!ae)break;_.g[ae.key]=ae}_=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Pi(),ko(f.i,f.u,f.A,f.l,f.R,f.m)}kr.prototype.ca=function(f){f=f.target;const _=this.M;_&&Ln(f)==3?_.j():this.Y(f)},kr.prototype.Y=function(f){try{if(f==this.g)e:{const Lt=Ln(this.g);var _=this.g.Ba();const dr=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||rc(this.g)))){this.J||Lt!=4||_==7||(_==8||0>=dr?Pi(3):Pi(2)),Do(this);var C=this.g.Z();this.X=C;t:if(Sd(this)){var R=rc(this.g);f="";var H=R.length,X=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),ws(this);var ae="";break t}this.h.i=new u.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,f+=this.h.i.decode(R[_],{stream:!(X&&_==H-1)});R.length=0,this.h.g+=f,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=C==200,Ua(this.i,this.u,this.A,this.l,this.R,Lt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,jt=this.g;if((Ze=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ze)){var Be=Ze;break t}}Be=null}if(C=Be)xr(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ju(this,C);else{this.o=!1,this.s=3,kt(12),cr(this),ws(this);break e}}if(this.P){C=!0;let er;for(;!this.J&&this.C<ae.length;)if(er=_g(this,ae),er==za){Lt==4&&(this.s=4,kt(14),C=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(er==Yu){this.s=4,kt(15),xr(this.i,this.l,ae,"[Invalid Chunk]"),C=!1;break}else xr(this.i,this.l,er,null),Ju(this,er);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||ae.length!=0||this.h.h||(this.s=1,kt(16),C=!1),this.o=this.o&&C,!C)xr(this.i,this.l,ae,"[Invalid Chunked Response]"),cr(this),ws(this);else if(0<ae.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),sc(Yt),Yt.M=!0,kt(11))}}else xr(this.i,this.l,ae,null),Ju(this,ae);Lt==4&&cr(this),this.o&&!this.J&&(Lt==4?tl(this.j,this):(this.o=!1,at(this)))}else Ya(this.g),C==400&&0<ae.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),cr(this),ws(this)}}}catch{}finally{}};function Sd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function _g(f,_){var C=f.C,R=_.indexOf(`
`,C);return R==-1?za:(C=Number(_.substring(C,R)),isNaN(C)?Yu:(R+=1,R+C>_.length?za:(_=_.slice(R,R+C),f.C=R+C,_)))}kr.prototype.cancel=function(){this.J=!0,cr(this)};function at(f){f.S=Date.now()+f.I,Cd(f,f.I)}function Cd(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ar(y(f.ba,f),_)}function Do(f){f.B&&(u.clearTimeout(f.B),f.B=null)}kr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Qu(this.i,this.A),this.L!=2&&(Pi(),kt(17)),cr(this),this.s=2,ws(this)):Cd(this,this.S-f)};function ws(f){f.j.G==0||f.J||tl(f.j,f)}function cr(f){Do(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,ju(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Ju(f,_){try{var C=f.j;if(C.G!=0&&(C.g==f||Rn(C.h,f))){if(!f.K&&Rn(C.h,f)&&C.G==3){try{var R=C.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<f.F)el(C),Or(C);else break e;Za(C),kt(18)}}else C.za=H[1],0<C.za-C.T&&37500>H[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ar(y(C.Za,C),6e3));if(1>=Pd(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else bi(C,11)}else if((f.K||C.g==f)&&el(C),!F(_))for(H=C.Da.g.parse(_),_=0;_<H.length;_++){let Be=H[_];if(C.T=Be[0],Be=Be[1],C.G==2)if(Be[0]=="c"){C.K=Be[1],C.ia=Be[2];const Yt=Be[3];Yt!=null&&(C.la=Yt,C.j.info("VER="+C.la));const Lt=Be[4];Lt!=null&&(C.Aa=Lt,C.j.info("SVER="+C.Aa));const dr=Be[5];dr!=null&&typeof dr=="number"&&0<dr&&(R=1.5*dr,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const er=f.g;if(er){const $o=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var X=R.h;X.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Zu(X,X.h),X.h=null))}if(R.D){const rl=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(R.ya=rl,nt(R.I,R.D,rl))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-f.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var ae=f;if(R.qa=$d(R,R.J?R.ia:null,R.W),ae.K){Ad(R.h,ae);var Ze=ae,jt=R.L;jt&&(Ze.I=jt),Ze.B&&(Do(Ze),at(Ze)),R.g=ae}else Fo(R);0<C.i.length&&Zr(C)}else Be[0]!="stop"&&Be[0]!="close"||bi(C,7);else C.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?bi(C,7):an(C):Be[0]!="noop"&&C.l&&C.l.ta(Be),C.v=0)}}Pi(4)}catch{}}var Id=class{constructor(f,_){this.g=f,this.map=_}};function No(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Pd(f){return f.h?1:f.g?f.g.size:0}function Rn(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Zu(f,_){f.g?f.g.add(_):f.h=_}function Ad(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}No.prototype.cancel=function(){if(this.i=xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function xd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const C of f.g.values())_=_.concat(C.D);return _}return I(f.i)}function Ha(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var _=[],C=f.length,R=0;R<C;R++)_.push(f[R]);return _}_=[],C=0;for(R in f)_[C++]=f[R];return _}function Ga(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var _=[];f=f.length;for(var C=0;C<f;C++)_.push(C);return _}_=[],C=0;for(const R in f)_[C++]=R;return _}}}function Ts(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var C=Ga(f),R=Ha(f),H=R.length,X=0;X<H;X++)_.call(void 0,R[X],C&&C[X],f)}var Mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wg(f,_){if(f){f=f.split("&");for(var C=0;C<f.length;C++){var R=f[C].indexOf("="),H=null;if(0<=R){var X=f[C].substring(0,R);H=f[C].substring(R+1)}else X=f[C];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ai(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ai){this.h=f.h,Oo(this,f.j),this.o=f.o,this.g=f.g,Es(this,f.s),this.l=f.l;var _=f.i,C=new Yr;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),Ss(this,C),this.m=f.m}else f&&(_=String(f).match(Mo))?(this.h=!1,Oo(this,_[1]||"",!0),this.o=Fe(_[2]||""),this.g=Fe(_[3]||"",!0),Es(this,_[4]),this.l=Fe(_[5]||"",!0),Ss(this,_[6]||"",!0),this.m=Fe(_[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}Ai.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Is(_,Ka,!0),":");var C=this.g;return(C||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Is(_,Ka,!0),"@"),f.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&f.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&f.push("/"),f.push(Is(C,C.charAt(0)=="/"?bd:kd,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",Is(C,ec)),f.join("")};function Jn(f){return new Ai(f)}function Oo(f,_,C){f.j=C?Fe(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Es(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Ss(f,_,C){_ instanceof Yr?(f.i=_,Xr(f.i,f.h)):(C||(_=Is(_,Dd)),f.i=new Yr(_,f.h))}function nt(f,_,C){f.i.set(_,C)}function Cs(f){return nt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Fe(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Is(f,_,C){return typeof f=="string"?(f=encodeURI(f).replace(_,Rd),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Rd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ka=/[#\/\?@]/g,kd=/[#\?:]/g,bd=/[#\?]/g,Dd=/[#\?@]/g,ec=/#/g;function Yr(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function on(f){f.g||(f.g=new Map,f.h=0,f.i&&wg(f.i,function(_,C){f.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Yr.prototype,t.add=function(f,_){on(this),this.i=null,f=hr(this,f);var C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(_),this.h+=1,this};function br(f,_){on(f),_=hr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Dr(f,_){return on(f),_=hr(f,_),f.g.has(_)}t.forEach=function(f,_){on(this),this.g.forEach(function(C,R){C.forEach(function(H){f.call(_,H,R,this)},this)},this)},t.na=function(){on(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let R=0;R<_.length;R++){const H=f[R];for(let X=0;X<H.length;X++)C.push(_[R])}return C},t.V=function(f){on(this);let _=[];if(typeof f=="string")Dr(this,f)&&(_=_.concat(this.g.get(hr(this,f))));else{f=Array.from(this.g.values());for(let C=0;C<f.length;C++)_=_.concat(f[C])}return _},t.set=function(f,_){return on(this),this.i=null,f=hr(this,f),Dr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Ps(f,_,C){br(f,_),0<C.length&&(f.i=null,f.g.set(hr(f,_),I(C)),f.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var R=_[C];const X=encodeURIComponent(String(R)),ae=this.V(R);for(R=0;R<ae.length;R++){var H=X;ae[R]!==""&&(H+="="+encodeURIComponent(String(ae[R]))),f.push(H)}}return this.i=f.join("&")};function hr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Xr(f,_){_&&!f.j&&(on(f),f.i=null,f.g.forEach(function(C,R){var H=R.toLowerCase();R!=H&&(br(this,R),Ps(this,H,C))},f)),f.j=_}function Tg(f,_){const C=new Ro;if(u.Image){const R=new Image;R.onload=T(On,C,"TestLoadImage: loaded",!0,_,R),R.onerror=T(On,C,"TestLoadImage: error",!1,_,R),R.onabort=T(On,C,"TestLoadImage: abort",!1,_,R),R.ontimeout=T(On,C,"TestLoadImage: timeout",!1,_,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else _(!1)}function Nd(f,_){const C=new Ro,R=new AbortController,H=setTimeout(()=>{R.abort(),On(C,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:R.signal}).then(X=>{clearTimeout(H),X.ok?On(C,"TestPingServer: ok",!0,_):On(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),On(C,"TestPingServer: error",!1,_)})}function On(f,_,C,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(C)}catch{}}function Eg(){this.g=new Hu}function Md(f,_,C){const R=C||"";try{Ts(f,function(H,X){let ae=H;d(H)&&(ae=zu(H)),_.push(R+X+"="+encodeURIComponent(ae))})}catch(H){throw _.push(R+"type="+encodeURIComponent("_badmap")),H}}function xi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(xi,Ao),xi.prototype.g=function(){return new Lo(this.l,this.j)},xi.prototype.i=function(f){return function(){return f}}({});function Lo(f,_){Bt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Lo,Bt),t=Lo.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Mr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Od(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Od(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Nr(this):Mr(this),this.readyState==3&&Od(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Nr(this))},t.Qa=function(f){this.g&&(this.response=f,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Mr(f)}t.setRequestHeader=function(f,_){this.u.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,f.push(C[0]+": "+C[1]),C=_.next();return f.join(`\r
`)};function Mr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ri(f){let _="";return Y(f,function(C,R){_+=R,_+=":",_+=C,_+=`\r
`}),_}function As(f,_,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Ri(C),typeof f=="string"?C!=null&&encodeURIComponent(String(C)):nt(f,_,C))}function pt(f){Bt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(pt,Bt);var Sg=/^https?$/i,tc=["POST","PUT"];t=pt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,_,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?Va(this.o):Va(Rr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(X){Vo(this,X);return}if(f=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)C.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())C.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(tc,_,void 0))||R||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ae]of C)this.g.setRequestHeader(X,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qa(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){Vo(this,X)}};function Vo(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,qa(f),Zn(f)}function qa(f){f.A||(f.A=!0,Ut(f,"complete"),Ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ut(this,"complete"),Ut(this,"abort"),Zn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zn(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nc(this):this.bb())},t.bb=function(){nc(this)};function nc(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Ln(f)!=4||f.Z()!=2)){if(f.u&&Ln(f)==4)Bu(f.Ea,0,f);else if(Ut(f,"readystatechange"),Ln(f)==4){f.h=!1;try{const ae=f.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var R;if(R=ae===0){var H=String(f.D).match(Mo)[1]||null;!H&&u.self&&u.self.location&&(H=u.self.location.protocol.slice(0,-1)),R=!Sg.test(H?H.toLowerCase():"")}C=R}if(C)Ut(f,"complete"),Ut(f,"success");else{f.m=6;try{var X=2<Ln(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",qa(f)}}finally{Zn(f)}}}}function Zn(f,_){if(f.g){Qa(f);const C=f.g,R=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ut(f,"ready");try{C.onreadystatechange=R}catch{}}}function Qa(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Ln(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Wu(_)}};function rc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(f){const _={};f=(f.g&&2<=Ln(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(F(f[R]))continue;var C=M(f[R]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=_[H]||[];_[H]=X,X.push(C)}D(_,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(f,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||_}function ic(f){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,f),this.cb=Jr("retryDelaySeedMs",1e4,f),this.Wa=Jr("forwardChannelMaxRetries",2,f),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new No(f&&f.concurrentRequestLimit),this.Da=new Eg,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ic.prototype,t.la=8,t.G=1,t.connect=function(f,_,C,R){kt(0),this.W=f,this.H=_||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=$d(this,null,this.W),Zr(this)};function an(f){if(Xa(f),f.G==3){var _=f.U++,C=Jn(f.I);if(nt(C,"SID",f.K),nt(C,"RID",_),nt(C,"TYPE","terminate"),ki(f,C),_=new kr(f,f.j,_),_.L=2,_.v=Cs(Jn(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.v,C=!0),C||(_.g=Bd(_.j,null),_.g.ea(_.v)),_.F=Date.now(),at(_)}Fd(f)}function Or(f){f.g&&(sc(f),f.g.cancel(),f.g=null)}function Xa(f){Or(f),f.u&&(u.clearTimeout(f.u),f.u=null),el(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Zr(f){if(!Xn(f.h)&&!f.s){f.s=!0;var _=f.Ga;pe||le(),ne||(pe(),ne=!0),ge.add(_,f),f.B=0}}function Cg(f,_){return Pd(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ar(y(f.Ga,f,_),Vd(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const H=new kr(this,this.j,f);let X=this.o;if(this.S&&(X?(X=A(X),E(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=xs(this,H,_),C=Jn(this.I),nt(C,"RID",f),nt(C,"CVER",22),this.D&&nt(C,"X-HTTP-Session-Id",this.D),ki(this,C),X&&(this.O?_="headers="+encodeURIComponent(String(Ri(X)))+"&"+_:this.m&&As(C,this.m,X)),Zu(this.h,H),this.Ua&&nt(C,"TYPE","init"),this.P?(nt(C,"$req",_),nt(C,"SID","null"),H.T=!0,Wa(H,C,null)):Wa(H,C,_),this.G=2}}else this.G==3&&(f?Ja(this,f):this.i.length==0||Xn(this.h)||Ja(this))};function Ja(f,_){var C;_?C=_.l:C=f.U++;const R=Jn(f.I);nt(R,"SID",f.K),nt(R,"RID",C),nt(R,"AID",f.T),ki(f,R),f.m&&f.o&&As(R,f.m,f.o),C=new kr(f,f.j,C,f.B+1),f.m===null&&(C.H=f.o),_&&(f.i=_.D.concat(f.i)),_=xs(f,C,1e3),C.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Zu(f.h,C),Wa(C,R,_)}function ki(f,_){f.H&&Y(f.H,function(C,R){nt(_,R,C)}),f.l&&Ts({},function(C,R){nt(_,R,C)})}function xs(f,_,C){C=Math.min(f.i.length,C);var R=f.l?y(f.l.Na,f.l,f):null;e:{var H=f.i;let X=-1;for(;;){const ae=["count="+C];X==-1?0<C?(X=H[0].g,ae.push("ofs="+X)):X=0:ae.push("ofs="+X);let Ze=!0;for(let jt=0;jt<C;jt++){let Be=H[jt].g;const Yt=H[jt].map;if(Be-=X,0>Be)X=Math.max(0,H[jt].g-100),Ze=!1;else try{Md(Yt,ae,"req"+Be+"_")}catch{R&&R(Yt)}}if(Ze){R=ae.join("&");break e}}}return f=f.i.splice(0,C),_.D=f,R}function Fo(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;pe||le(),ne||(pe(),ne=!0),ge.add(_,f),f.v=0}}function Za(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ar(y(f.Fa,f),Vd(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ar(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Or(this),Ld(this))};function sc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Ld(f){f.g=new kr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Jn(f.qa);nt(_,"RID","rpc"),nt(_,"SID",f.K),nt(_,"AID",f.T),nt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&nt(_,"TO",f.ja),nt(_,"TYPE","xmlhttp"),ki(f,_),f.m&&f.o&&As(_,f.m,f.o),f.L&&(f.g.I=f.L);var C=f.g;f=f.ia,C.L=1,C.v=Cs(Jn(_)),C.m=null,C.P=!0,Xu(C,f)}t.Za=function(){this.C!=null&&(this.C=null,Or(this),Za(this),kt(19))};function el(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function tl(f,_){var C=null;if(f.g==_){el(f),sc(f),f.g=null;var R=2}else if(Rn(f.h,_))C=_.D,Ad(f.h,_),R=1;else return;if(f.G!=0){if(_.o)if(R==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var H=f.B;R=xo(),Ut(R,new Ba(R,C)),Zr(f)}else Fo(f);else if(H=_.s,H==3||H==0&&0<_.X||!(R==1&&Cg(f,_)||R==2&&Za(f)))switch(C&&0<C.length&&(_=f.h,_.i=_.i.concat(C)),H){case 1:bi(f,5);break;case 4:bi(f,10);break;case 3:bi(f,6);break;default:bi(f,2)}}}function Vd(f,_){let C=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(C*=2),C*_}function bi(f,_){if(f.j.info("Error code "+_),_==2){var C=y(f.fb,f),R=f.Xa;const H=!R;R=new Ai(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Oo(R,"https"),Cs(R),H?Tg(R.toString(),C):Nd(R.toString(),C)}else kt(2);f.G=0,f.l&&f.l.sa(_),Fd(f),Xa(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Fd(f){if(f.G=0,f.ka=[],f.l){const _=xd(f.h);(_.length!=0||f.i.length!=0)&&(x(f.ka,_),x(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function $d(f,_,C){var R=C instanceof Ai?Jn(C):new Ai(C);if(R.g!="")_&&(R.g=_+"."+R.g),Es(R,R.s);else{var H=u.location;R=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new Ai(null);R&&Oo(X,R),_&&(X.g=_),H&&Es(X,H),C&&(X.l=C),R=X}return C=f.D,_=f.ya,C&&_&&nt(R,C,_),nt(R,"VER",f.la),ki(f,R),R}function Bd(f,_,C){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new pt(new xi({eb:C})):new pt(f.pa),_.Ha(f.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}t=oc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(f,_){return new kn(f,_)};function kn(f,_){Bt.call(this),this.g=new ic(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!F(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new ei(this)}S(kn,Bt),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){an(this.g)},kn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var C={};C.__data__=f,f=C}else this.u&&(C={},C.__data__=zu(f),f=C);_.i.push(new Id(_.Ya++,f)),_.G==3&&Zr(_)},kn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,kn.aa.N.call(this)};function Ud(f){qr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const C in _){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}S(Ud,qr);function jd(){$a.call(this),this.status=1}S(jd,$a);function ei(f){this.g=f}S(ei,oc),ei.prototype.ua=function(){Ut(this.g,"a")},ei.prototype.ta=function(f){Ut(this.g,new Ud(f))},ei.prototype.sa=function(f){Ut(this.g,new jd)},ei.prototype.ra=function(){Ut(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,UR=function(){return new nl},BR=function(){return xo()},$R=Qr,l0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,up=ja,Td.COMPLETE="complete",FR=Td,Fa.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,zc=Fa,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,VR=pt}).apply(typeof $f<"u"?$f:typeof self<"u"?self:typeof window<"u"?window:{});const lC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zn.UNAUTHENTICATED=new zn(null),zn.GOOGLE_CREDENTIALS=new zn("google-credentials-uid"),zn.FIRST_PARTY=new zn("first-party-uid"),zn.MOCK_USER=new zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Sm("@firebase/firestore");function kl(){return Ta.logLevel}function he(t,...e){if(Ta.logLevel<=Oe.DEBUG){const n=e.map(H_);Ta.debug(`Firestore (${Pu}): ${t}`,...n)}}function us(t,...e){if(Ta.logLevel<=Oe.ERROR){const n=e.map(H_);Ta.error(`Firestore (${Pu}): ${t}`,...n)}}function wh(t,...e){if(Ta.logLevel<=Oe.WARN){const n=e.map(H_);Ta.warn(`Firestore (${Pu}): ${t}`,...n)}}function H_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t="Unexpected state"){const e=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: `+t;throw us(e),new Error(e)}function Et(t,e){t||ke()}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zn.UNAUTHENTICATED))}shutdown(){}}class y5{constructor(e){this.t=e,this.currentUser=zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fa,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fa)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string"),new m5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new zn(e)}}class v5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=zn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class _5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new v5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Et(this.o===void 0);const r=s=>{s.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string"),this.R=n.token,new w5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=E5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function nu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Gn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Gn(0,0))}static max(){return new xe(new Gn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r){n===void 0?n=0:n>e.length&&ke(),r===void 0?r=e.length-n:r>e.length-n&&ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Th.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Th?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends Th{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const S5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Th{construct(e,n,r){return new Nn(e,n,r)}static isValidIdentifier(e){return S5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ie(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ie(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new Ie(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(n)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(xt.fromString(e))}static fromName(e){return new Se(xt.fromString(e).popFirst(5))}static empty(){return new Se(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new xt(e.slice()))}}function C5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Gn(n+1,0):new Gn(n,r));return new io(i,Se.empty(),e)}function I5(t){return new io(t.readTime,t.key,-1)}class io{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new io(xe.min(),Se.empty(),-1)}static max(){return new io(xe.max(),Se.empty(),-1)}}function P5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==A5)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(m=>{a[d]=m,++u,u===s&&r(a)},m=>i(m))}})}static doWhile(e,n){return new ee((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function R5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Au(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xm.oe=-1;function Rm(t){return t==null}function u0(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uC(e)),e=b5(t.get(n),e);return uC(e)}function b5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function uC(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function td(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class c0{constructor(e,n){this.comparator=e,this.root=n||Zs.EMPTY}insert(e,n){return new c0(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zs.BLACK,null,null))}remove(e){return new c0(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}},Bf=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zs=class Ui{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ui.RED,this.left=i??Ui.EMPTY,this.right=s??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ui(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}};Zs.EMPTY=null,Zs.RED=!0,Zs.BLACK=!1;Zs.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Zs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hC(this.data.getIterator())}getIteratorFrom(e){return new hC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class hC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Qs([])}unionWith(e){let n=new qt(Nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zR("Invalid base64 string: "+s):s}}(e);return new fn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const N5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(t){if(Et(!!t),typeof t=="string"){let e=0;const n=N5.exec(t);if(Et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function km(t){const e=t.mapValue.fields.__previous_value__;return G_(e)?km(e):e}function Eh(t){const e=so(t.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,i,s,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Sh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Sh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G_(t)?4:L5(t)?9007199254740991:O5(t)?10:11:ke()}function vi(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eh(t).isEqual(Eh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=so(i.timestampValue),u=so(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return oo(i.bytesValue).isEqual(oo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Mt(i.geoPointValue.latitude)===Mt(s.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Mt(i.integerValue)===Mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Mt(i.doubleValue),u=Mt(s.doubleValue);return a===u?u0(a)===u0(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return nu(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(cC(a)!==cC(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!vi(a[c],u[c])))return!1;return!0}(t,e);default:return ke()}}function Ch(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function ru(t,e){if(t===e)return 0;const n=ao(t),r=ao(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=Mt(s.integerValue||s.doubleValue),c=Mt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return dC(t.timestampValue,e.timestampValue);case 4:return dC(Eh(t),Eh(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,a){const u=oo(s),c=oo(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const m=je(u[d],c[d]);if(m!==0)return m}return je(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=je(Mt(s.latitude),Mt(a.latitude));return u!==0?u:je(Mt(s.longitude),Mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fC(t.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,d,m;const g=s.fields||{},y=a.fields||{},T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=(c=y.value)===null||c===void 0?void 0:c.arrayValue,I=je(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return I!==0?I:fC(T,S)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Uf.mapValue&&a===Uf.mapValue)return 0;if(s===Uf.mapValue)return 1;if(a===Uf.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),d=a.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const y=je(c[g],m[g]);if(y!==0)return y;const T=ru(u[c[g]],d[m[g]]);if(T!==0)return T}return je(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ke()}}function dC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=so(t),r=so(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function fC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ru(n[i],r[i]);if(s)return s}return je(n.length,r.length)}function iu(t){return h0(t)}function h0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=so(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=h0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${h0(n.fields[a])}`;return i+"}"}(t.mapValue):ke()}function cp(t){switch(ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=km(t);return e?16+cp(e):16;case 5:return 2*t.stringValue.length;case 6:return oo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+cp(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return td(r.fields,(s,a)=>{i+=s.length+cp(a)}),i}(t.mapValue);default:throw ke()}}function d0(t){return!!t&&"integerValue"in t}function K_(t){return!!t&&"arrayValue"in t}function pC(t){return!!t&&"nullValue"in t}function mC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iv(t){return!!t&&"mapValue"in t}function O5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return td(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function L5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!iv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(n)}setAll(e){let n=Nn.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=Zc(a):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());iv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];iv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){td(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ui(Zc(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n,r,i,s,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new En(e,0,xe.min(),xe.min(),xe.min(),ui.empty(),0)}static newFoundDocument(e,n,r,i){return new En(e,1,n,xe.min(),r,i,0)}static newNoDocument(e,n){return new En(e,2,n,xe.min(),xe.min(),ui.empty(),0)}static newUnknownDocument(e,n){return new En(e,3,n,xe.min(),xe.min(),ui.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.position=e,this.inclusive=n}}function gC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Se.comparator(Se.fromName(a.referenceValue),n.key):r=ru(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n="asc"){this.field=e,this.dir=n}}function V5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{}class Gt extends WR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $5(e,n,r):n==="array-contains"?new j5(e,r):n==="in"?new z5(e,r):n==="not-in"?new W5(e,r):n==="array-contains-any"?new H5(e,r):new Gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B5(e,r):new U5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ru(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(ru(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends WR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _i(e,n)}matches(e){return HR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HR(t){return t.op==="and"}function GR(t){return F5(t)&&HR(t)}function F5(t){for(const e of t.filters)if(e instanceof _i)return!1;return!0}function f0(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+iu(t.value);if(GR(t))return t.filters.map(e=>f0(e)).join(",");{const e=t.filters.map(n=>f0(n)).join(",");return`${t.op}(${e})`}}function KR(t,e){return t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(t,e):t instanceof _i?function(r,i){return i instanceof _i&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&KR(a,i.filters[u]),!0):!1}(t,e):void ke()}function qR(t){return t instanceof Gt?function(n){return`${n.field.canonicalString()} ${n.op} ${iu(n.value)}`}(t):t instanceof _i?function(n){return n.op.toString()+" {"+n.getFilters().map(qR).join(" ,")+"}"}(t):"Filter"}class $5 extends Gt{constructor(e,n,r){super(e,n,r),this.key=Se.fromName(r.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class B5 extends Gt{constructor(e,n){super(e,"in",n),this.keys=QR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class U5 extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=QR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Se.fromName(r.referenceValue))}class j5 extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return K_(n)&&Ch(n.arrayValue,this.value)}}class z5 extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ch(this.value.arrayValue,n)}}class W5 extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ch(this.value.arrayValue,n)}}class H5 extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!K_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ch(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.ue=null}}function vC(t,e=null,n=[],r=[],i=null,s=null,a=null){return new G5(t,e,n,r,i,s,a)}function q_(t){const e=ze(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>f0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Rm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>iu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>iu(r)).join(",")),e.ue=n}return e.ue}function Q_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!V5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yC(t.startAt,e.startAt)&&yC(t.endAt,e.endAt)}function p0(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function K5(t,e,n,r,i,s,a,u){return new bm(t,e,n,r,i,s,a,u)}function Y_(t){return new bm(t)}function _C(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q5(t){return t.collectionGroup!==null}function eh(t){const e=ze(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new qt(Nn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lp(s,r))}),n.has(Nn.keyField().canonicalString())||e.ce.push(new Lp(Nn.keyField(),r))}return e.ce}function di(t){const e=ze(t);return e.le||(e.le=Q5(e,eh(t))),e.le}function Q5(t,e){if(t.limitType==="F")return vC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lp(i.field,s)});const n=t.endAt?new Op(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Op(t.startAt.position,t.startAt.inclusive):null;return vC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function m0(t,e,n){return new bm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dm(t,e){return Q_(di(t),di(e))&&t.limitType===e.limitType}function YR(t){return`${q_(di(t))}|lt:${t.limitType}`}function bl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qR(i)).join(", ")}]`),Rm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>iu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>iu(i)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function Nm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of eh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const d=gC(a,u,c);return a.inclusive?d<=0:d<0}(r.startAt,eh(r),i)||r.endAt&&!function(a,u,c){const d=gC(a,u,c);return a.inclusive?d>=0:d>0}(r.endAt,eh(r),i))}(t,e)}function Y5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XR(t){return(e,n)=>{let r=!1;for(const i of eh(t)){const s=X5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function X5(t,e,n){const r=t.field.isKeyField()?Se.comparator(e.key,n.key):function(s,a,u){const c=a.data.field(s),d=u.data.field(s);return c!==null&&d!==null?ru(c,d):ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){td(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return D5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new sn(Se.comparator);function lo(){return J5}const JR=new sn(Se.comparator);function Wc(...t){let e=JR;for(const n of t)e=e.insert(n.key,n);return e}function Z5(t){let e=JR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function aa(){return th()}function ZR(){return th()}function th(){return new xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const eB=new qt(Se.comparator);function He(...t){let e=eB;for(const n of t)e=e.add(n);return e}const tB=new qt(je);function nB(){return tB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u0(e)?"-0":e}}function iB(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this._=void 0}}function sB(t,e,n){return t instanceof g0?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&G_(s)&&(s=km(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Vp?ek(t,e):t instanceof Fp?tk(t,e):function(i,s){const a=aB(i,s),u=wC(a)+wC(i.Pe);return d0(a)&&d0(i.Pe)?iB(u):rB(i.serializer,u)}(t,e)}function oB(t,e,n){return t instanceof Vp?ek(t,e):t instanceof Fp?tk(t,e):n}function aB(t,e){return t instanceof y0?function(r){return d0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class g0 extends Mm{}class Vp extends Mm{constructor(e){super(),this.elements=e}}function ek(t,e){const n=nk(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fp extends Mm{constructor(e){super(),this.elements=e}}function tk(t,e){let n=nk(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class y0 extends Mm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wC(t){return Mt(t.integerValue||t.doubleValue)}function nk(t){return K_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vp&&i instanceof Vp||r instanceof Fp&&i instanceof Fp?nu(r.elements,i.elements,vi):r instanceof y0&&i instanceof y0?vi(r.Pe,i.Pe):r instanceof g0&&i instanceof g0}(t.transform,e.transform)}class pa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pa}static exists(e){return new pa(void 0,e)}static updateTime(e){return new pa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class X_{}function rk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cB(t.key,pa.none()):new J_(t.key,t.data,pa.none());{const n=t.data,r=ui.empty();let i=new qt(Nn.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Om(t.key,r,new Qs(i.toArray()),pa.none())}}function uB(t,e,n){t instanceof J_?function(i,s,a){const u=i.value.clone(),c=EC(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Om?function(i,s,a){if(!hp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=EC(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(ik(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function nh(t,e,n,r){return t instanceof J_?function(s,a,u,c){if(!hp(s.precondition,a))return u;const d=s.value.clone(),m=SC(s.fieldTransforms,c,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Om?function(s,a,u,c){if(!hp(s.precondition,a))return u;const d=SC(s.fieldTransforms,c,a),m=a.data;return m.setAll(ik(s)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,u){return hp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function TC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nu(r,i,(s,a)=>lB(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class J_ extends X_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Om extends X_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ik(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function EC(t,e,n){const r=new Map;Et(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,oB(a,u,n[i]))}return r}function SC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,sB(s,a,e))}return r}class cB extends X_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZR();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(i.key)?null:u;const c=rk(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,(n,r)=>TC(n,r))&&nu(this.baseMutations,e.baseMutations,(n,r)=>TC(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ue;function sk(t){if(t===void 0)return us("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Ft.OK:return ue.OK;case Ft.CANCELLED:return ue.CANCELLED;case Ft.UNKNOWN:return ue.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ue.INTERNAL;case Ft.UNAVAILABLE:return ue.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ue.NOT_FOUND;case Ft.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ft.ABORTED:return ue.ABORTED;case Ft.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ft.DATA_LOSS:return ue.DATA_LOSS;default:return ke()}}(Ue=Ft||(Ft={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=new da([4294967295,4294967295],0);function CC(t){const e=pB().encode(t),n=new LR;return n.update(e),new Uint8Array(n.digest())}function IC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new da([n,r],0),new da([i,s],0)]}class Z_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hc(`Invalid padding: ${n}`);if(r<0)throw new Hc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=da.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(da.fromNumber(r)));return i.compare(mB)===1&&(i=new da([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=CC(e),[r,i]=IC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Z_(s,i,n);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Te===0)return;const n=CC(e),[r,i]=IC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lm(xe.min(),i,new sn(je),lo(),He())}}class nd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nd(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ok{constructor(e,n){this.targetId=e,this.me=n}}class ak{constructor(e,n,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class PC{constructor(){this.fe=0,this.ge=AC(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),n=He(),r=He();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new nd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=AC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gB{constructor(e){this.Le=e,this.Be=new Map,this.ke=lo(),this.qe=jf(),this.Qe=jf(),this.Ke=new sn(je)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(p0(s))if(r===0){const a=new Se(s.path);this.We(n,a,En.newNoDocument(a,xe.min()))}else Et(r===1);else{const a=this.Ze(n);if(a!==r){const u=this.Xe(e),c=u?this.et(u,e,a):1;if(c!==0){this.He(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,u;try{a=oo(r).toUint8Array()}catch(c){if(c instanceof zR)return wh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Z_(a,i,s)}catch(c){return wh(c instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Te===0?null:u}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.nt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,a)=>{const u=this.Ye(a);if(u){if(s.current&&p0(u.target)){const c=new Se(u.target.path);this.st(c).has(a)||this.ot(a,c)||this.We(a,c,En.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=He();this.Qe.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Lm(e,n,this.Ke,this.ke,r);return this.ke=lo(),this.qe=jf(),this.Qe=jf(),this.Ke=new sn(je),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new PC,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new qt(je),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qt(je),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new PC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jf(){return new sn(Se.comparator)}function AC(){return new sn(Se.comparator)}const yB={asc:"ASCENDING",desc:"DESCENDING"},vB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_B={and:"AND",or:"OR"};class wB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v0(t,e){return t.useProto3Json||Rm(e)?e:{value:e}}function TB(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ql(t){return Et(!!t),xe.fromTimestamp(function(n){const r=so(n);return new Gn(r.seconds,r.nanos)}(t))}function SB(t,e){return _0(t,e).canonicalString()}function _0(t,e){const n=function(i){return new xt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lk(t){const e=xt.fromString(t);return Et(fk(e)),e}function sv(t,e){const n=lk(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(ck(n))}function uk(t,e){return SB(t.databaseId,e)}function CB(t){const e=lk(t);return e.length===4?xt.emptyPath():ck(e)}function xC(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ck(t){return Et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function IB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,m){return d.useProto3Json?(Et(m===void 0||typeof m=="string"),fn.fromBase64String(m||"")):(Et(m===void 0||m instanceof Buffer||m instanceof Uint8Array),fn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const m=d.code===void 0?ue.UNKNOWN:sk(d.code);return new Ie(m,d.message||"")}(a);n=new ak(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sv(t,r.document.name),s=Ql(r.document.updateTime),a=r.document.createTime?Ql(r.document.createTime):xe.min(),u=new ui({mapValue:{fields:r.document.fields}}),c=En.newFoundDocument(i,s,a,u),d=r.targetIds||[],m=r.removedTargetIds||[];n=new dp(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sv(t,r.document),s=r.readTime?Ql(r.readTime):xe.min(),a=En.newNoDocument(i,s),u=r.removedTargetIds||[];n=new dp([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sv(t,r.document),s=r.removedTargetIds||[];n=new dp([],s,i,null)}else{if(!("filter"in e))return ke();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new fB(i,s),u=r.targetId;n=new ok(u,a)}}return n}function PB(t,e){return{documents:[uk(t,e.path)]}}function AB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uk(t,i);const s=function(d){if(d.length!==0)return dk(_i.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(m=>function(y){return{field:Dl(y.field),direction:kB(y.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=v0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:n,parent:i}}function xB(t){let e=CB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(g){const y=hk(g);return y instanceof _i&&GR(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(S){return new Lp(Nl(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(g){let y;return y=typeof g=="object"?g.value:g,Rm(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(g){const y=!!g.before,T=g.values||[];return new Op(T,y)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const y=!g.before,T=g.values||[];return new Op(T,y)}(n.endAt)),K5(e,i,a,s,u,"F",c,d)}function RB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return Gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(n.unaryFilter.field);return Gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nl(n.unaryFilter.field);return Gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nl(n.unaryFilter.field);return Gt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(t):t.fieldFilter!==void 0?function(n){return Gt.create(Nl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _i.create(n.compositeFilter.filters.map(r=>hk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(n.compositeFilter.op))}(t):ke()}function kB(t){return yB[t]}function bB(t){return vB[t]}function DB(t){return _B[t]}function Dl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return Nn.fromServerFormat(t.fieldPath)}function dk(t){return t instanceof Gt?function(n){if(n.op==="=="){if(mC(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NAN"}};if(pC(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mC(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NAN"}};if(pC(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(n.field),op:bB(n.op),value:n.value}}}(t):t instanceof _i?function(n){const r=n.getFilters().map(i=>dk(i));return r.length===1?r[0]:{compositeFilter:{op:DB(n.op),filters:r}}}(t):ke()}function fk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r,i,s=xe.min(),a=xe.min(),u=fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.ht=e}}function MB(t){const e=xB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?m0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(){this.ln=new LB}addToCollectionParentIndex(e,n){return this.ln.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(io.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(io.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class LB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(xt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(41943040,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new su(0)}static Qn(){return new su(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC([t,e],[n,r]){const i=je(t,n);return i===0?je(e,r):i}class VB{constructor(e){this.Gn=e,this.buffer=new qt(kC),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Au(n)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Am(n)}await this.Yn(3e5)})}}class $B{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(xm.oe);const r=new VB(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(RC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RC):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,a,u,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),kl()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function BB(t,e){return new $B(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this.changes=new xa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&nh(r.mutation,i,Qs.empty(),Gn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const i=aa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Wc();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=aa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,r,i){let s=lo();const a=th(),u=function(){return th()}();return n.forEach((c,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof Om)?s=s.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),nh(m.mutation,d,m.mutation.getFieldMask(),Gn.now())):a.set(d.key,Qs.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>{var g;return u.set(d,new jB(m,(g=a.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=th();let i=new sn((a,u)=>a-u),s=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||Qs.empty();m=u.applyToLocalView(d,m),r.set(c,m);const g=(i.get(u.batchId)||He()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,m=c.value,g=ZR();m.forEach(y=>{if(!s.has(y)){const T=rk(n.get(y),r.get(y));T!==null&&g.set(y,T),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return ee.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ee.resolve(aa());let u=-1,c=s;return a.next(d=>ee.forEach(d,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?ee.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{c=c.insert(m,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,He())).next(m=>({batchId:u,changes:Z5(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(r=>{let i=Wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Wc();return this.indexManager.getCollectionParents(e,s).next(u=>ee.forEach(u,c=>{const d=function(g,y){return new bm(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,En.newInvalidDocument(m)))});let u=Wc();return a.forEach((c,d)=>{const m=s.get(c);m!==void 0&&nh(m.mutation,d,Qs.empty(),Gn.now()),Nm(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return ee.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ql(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:MB(i.bundledQuery),readTime:Ql(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.overlays=new sn(Se.comparator),this.Er=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=aa();return ee.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=aa(),s=n.length+1,a=new Se(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new sn((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=s.get(d.largestBatchId);m===null&&(m=aa(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const u=aa(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>u.set(d,m)),!(u.size()>=i)););return ee.resolve(u)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new dB(n,r));let s=this.Er.get(n);s===void 0&&(s=He(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.dr=new qt(tn.Ar),this.Rr=new qt(tn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new tn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Se(new xt([])),r=new tn(n,e),i=new tn(n,e+1),s=[];return this.Rr.forEachInRange([r,i],a=>{this.gr(a),s.push(a.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Se(new xt([])),r=new tn(n,e),i=new tn(n,e+1);let s=He();return this.Rr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Se.comparator(e.key,n.key)||je(e.br,n.br)}static Vr(e,n){return je(e.br,n.br)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new qt(tn.Ar)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hB(s,n,r,i);this.mutationQueue.push(a);for(const u of i)this.vr=this.vr.add(new tn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,n){return ee.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],a=>{const u=this.Cr(a.br);s.push(u)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(je);return n.forEach(i=>{const s=new tn(i,0),a=new tn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,a],u=>{r=r.add(u.br)})}),ee.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const a=new tn(new Se(s),0);let u=new qt(je);return this.vr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.br)),!0)},a),ee.resolve(this.Mr(u))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Et(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ee.forEach(n.mutations,i=>{const s=new tn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new tn(n,0),i=this.vr.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.Nr=e,this.docs=function(){return new sn(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():En.newInvalidDocument(n))}getEntries(e,n){let r=lo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():En.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lo();const a=n.path,u=new Se(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||P5(I5(m),r)<=0||(i.has(m.key)||Nm(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ke()}Lr(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QB(this)}getSize(e){return ee.resolve(this.size)}}class QB extends UB{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e){this.persistence=e,this.Br=new xa(n=>q_(n),Q_),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.kr=0,this.qr=new ew,this.targetCount=0,this.Qr=su.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),ee.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new su(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Un(n),ee.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Br.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.Kr={},this.overlays={},this.$r=new xm(0),this.Ur=!1,this.Ur=!0,this.Wr=new GB,this.referenceDelegate=e(this),this.Gr=new YB(this),this.indexManager=new OB,this.remoteDocumentCache=function(i){return new qB(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new NB(n),this.jr=new WB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new KB(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new XB(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return ee.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class XB extends x5{constructor(e){super(),this.currentSequenceNumber=e}}class tw{constructor(e){this.persistence=e,this.Zr=new ew,this.Xr=null}static ei(e){return new tw(e)}get ti(){if(this.Xr)return this.Xr;throw ke()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ti,r=>{const i=Se.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,xe.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return ee.or([()=>ee.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class $p{constructor(e,n){this.persistence=e,this.ri=new xa(r=>k5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BB(this,n)}static ei(e,n){return new $p(e,n)}Hr(){}Jr(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return ee.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?ee.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,a=>this.ir(e,a,n).next(u=>{u||(r++,s.removeEntry(a,xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),ee.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=cp(e.data.value)),n}ir(e,n,r){return ee.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=He(),i=He();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return O2()?8:R5(xn())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JB;return this.ts(e,n,a).next(u=>{if(s.result=u,this.Hi)return this.ns(e,n,a,u.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(kl()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ee.resolve()):(kl()<=Oe.DEBUG&&he("QueryEngine","Query:",bl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(kl()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):ee.resolve())}Xi(e,n){if(_C(n))return ee.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=m0(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=He(...s);return this.Zi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.rs(n,u);return this.ss(n,d,a,c.readTime)?this.Xi(e,m0(n,null,"F")):this.os(e,d,n,c)}))})))}es(e,n,r,i){return _C(n)||i.isEqual(xe.min())?ee.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const a=this.rs(n,s);return this.ss(n,a,r,i)?ee.resolve(null):(kl()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bl(n)),this.os(e,a,n,C5(i,-1)).next(u=>u))})}rs(e,n){let r=new qt(XR(e));return n.forEach((i,s)=>{Nm(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return kl()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",bl(n)),this.Zi.getDocumentsMatchingQuery(e,n,io.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new sn(je),this.cs=new xa(s=>q_(s),Q_),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zB(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function tU(t,e,n,r){return new eU(t,e,n,r)}async function mk(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=He();for(const d of i){a.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of s){u.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ts:d,removedBatchIds:a,addedBatchIds:u}))})})}function gk(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function nU(t,e){const n=ze(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const u=[];e.targetChanges.forEach((m,g)=>{const y=i.get(g);if(!y)return;u.push(n.Gr.removeMatchingKeys(s,m.removedDocuments,g).next(()=>n.Gr.addMatchingKeys(s,m.addedDocuments,g)));let T=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(fn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(g,T),function(I,x,k){return I.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,T,m)&&u.push(n.Gr.updateTargetData(s,T))});let c=lo(),d=He();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),u.push(rU(s,a,e.documentUpdates).next(m=>{c=m.Is,d=m.Es})),!r.isEqual(xe.min())){const m=n.Gr.getLastRemoteSnapshotVersion(s).next(g=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(m)}return ee.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.us=i,s))}function rU(t,e,n){let r=He(),i=He();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=lo();return n.forEach((u,c)=>{const d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):he("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Is:a,Es:i}})}function iU(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):n.Gr.allocateTargetId(r).next(a=>(i=new Ys(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function w0(t,e,n){const r=ze(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Au(a))throw a;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function bC(t,e,n){const r=ze(t);let i=xe.min(),s=He();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,m){const g=ze(c),y=g.cs.get(m);return y!==void 0?ee.resolve(g.us.get(y)):g.Gr.getTargetData(d,m)}(r,a,di(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,n?i:xe.min(),n?s:He())).next(u=>(sU(r,Y5(e),u),{documents:u,ds:s})))}function sU(t,e,n){let r=t.ls.get(e)||xe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class DC{constructor(){this.activeTargetIds=nB()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oU{constructor(){this._o=new DC,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new DC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function ov(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class cU extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,a){const u=ov(),c=this.No(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(d,s,a),this.Bo(n,c,d,i).then(m=>(he("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw wh("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",i),m})}ko(n,r,i,s,a,u){return this.Oo(n,r,i,s,a)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}No(n,r){const i=lU[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=ov();return new Promise((a,u)=>{const c=new VR;c.setWithCredentials(!0),c.listenOnce(FR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case up.NO_ERROR:const m=c.getResponseJson();he(vn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case up.TIMEOUT:he(vn,`RPC '${e}' ${s} timed out`),u(new Ie(ue.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:const g=c.getStatus();if(he(vn,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const S=function(x){const k=x.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(k)>=0?k:ue.UNKNOWN}(T.status);u(new Ie(S,T.message))}else u(new Ie(ue.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ie(ue.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{he(vn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);he(vn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)})}qo(e,n,r){const i=ov(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=UR(),u=BR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=s.join("");he(vn,`Creating RPC '${e}' stream ${i}: ${m}`,c);const g=a.createWebChannel(m,c);let y=!1,T=!1;const S=new uU({Eo:x=>{T?he(vn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(y||(he(vn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),he(vn,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},Ao:()=>g.close()}),I=(x,k,F)=>{x.listen(k,V=>{try{F(V)}catch(z){setTimeout(()=>{throw z},0)}})};return I(g,zc.EventType.OPEN,()=>{T||(he(vn,`RPC '${e}' stream ${i} transport opened.`),S.So())}),I(g,zc.EventType.CLOSE,()=>{T||(T=!0,he(vn,`RPC '${e}' stream ${i} transport closed`),S.Do())}),I(g,zc.EventType.ERROR,x=>{T||(T=!0,wh(vn,`RPC '${e}' stream ${i} transport errored:`,x),S.Do(new Ie(ue.UNAVAILABLE,"The operation could not be completed")))}),I(g,zc.EventType.MESSAGE,x=>{var k;if(!T){const F=x.data[0];Et(!!F);const V=F,z=(V==null?void 0:V.error)||((k=V[0])===null||k===void 0?void 0:k.error);if(z){he(vn,`RPC '${e}' stream ${i} received error:`,z);const j=z.status;let Y=function(b){const E=Ft[b];if(E!==void 0)return sk(E)}(j),D=z.message;Y===void 0&&(Y=ue.INTERNAL,D="Unknown error status: "+j+" with message "+z.message),T=!0,S.Do(new Ie(Y,D)),g.close()}else he(vn,`RPC '${e}' stream ${i} received:`,F),S.vo(F)}}),I(u,$R.STAT_EVENT,x=>{x.stat===l0.PROXY?he(vn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===l0.NOPROXY&&he(vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}}function av(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){return new wB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i,s,a,u,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new vk(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Ie(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dU extends hU{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=IB(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Ql(a.readTime):xe.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=xC(this.serializer),n.addTarget=function(s,a){let u;const c=a.target;if(u=p0(c)?{documents:PB(s,c)}:{query:AB(s,c).ct},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=EB(s,a.resumeToken);const d=v0(s,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){u.readTime=TB(s,a.snapshotVersion.toTimestamp());const d=v0(s,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=RB(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=xC(this.serializer),n.removeTarget=e,this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Ie(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Oo(e,_0(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(ue.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.ko(e,_0(n,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ue.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class pU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(us(n),this.C_=!1):he("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{id(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ze(c);d.k_.add(4),await rd(d),d.K_.set("Unknown"),d.k_.delete(4),await Vm(d)}(this))})}),this.K_=new pU(r,i)}}async function Vm(t){if(id(t))for(const e of t.q_)await e(!0)}async function rd(t){for(const e of t.q_)await e(!1)}function _k(t,e){const n=ze(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),ow(n)?sw(n):xu(n).s_()&&iw(n,e))}function rw(t,e){const n=ze(t),r=xu(n);n.B_.delete(e),r.s_()&&wk(n,e),n.B_.size===0&&(r.s_()?r.a_():id(n)&&n.K_.set("Unknown"))}function iw(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xu(t).V_(e)}function wk(t,e){t.U_.xe(e),xu(t).m_(e)}function sw(t){t.U_=new gB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),xu(t).start(),t.K_.F_()}function ow(t){return id(t)&&!xu(t).i_()&&t.B_.size>0}function id(t){return ze(t).k_.size===0}function Tk(t){t.U_=void 0}async function gU(t){t.K_.set("Online")}async function yU(t){t.B_.forEach((e,n)=>{iw(t,e)})}async function vU(t,e){Tk(t),ow(t)?(t.K_.O_(e),sw(t)):t.K_.set("Unknown")}async function _U(t,e,n){if(t.K_.set("Online"),e instanceof ak&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i.B_.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.B_.delete(u),i.U_.removeTarget(u))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await MC(t,r)}else if(e instanceof dp?t.U_.$e(e):e instanceof ok?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(xe.min()))try{const r=await gk(t.localStore);n.compareTo(r)>=0&&await function(s,a){const u=s.U_.it(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.B_.get(d);m&&s.B_.set(d,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const m=s.B_.get(c);if(!m)return;s.B_.set(c,m.withResumeToken(fn.EMPTY_BYTE_STRING,m.snapshotVersion)),wk(s,c);const g=new Ys(m.target,c,d,m.sequenceNumber);iw(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await MC(t,r)}}async function MC(t,e,n){if(!Au(e))throw e;t.k_.add(1),await rd(t),t.K_.set("Offline"),n||(n=()=>gk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Vm(t)})}async function OC(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=id(n);n.k_.add(3),await rd(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Vm(n)}async function wU(t,e){const n=ze(t);e?(n.k_.delete(2),await Vm(n)):e||(n.k_.add(2),await rd(n),n.K_.set("Unknown"))}function xu(t){return t.W_||(t.W_=function(n,r,i){const s=ze(n);return s.b_(),new dU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:gU.bind(null,t),mo:yU.bind(null,t),po:vU.bind(null,t),R_:_U.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),ow(t)?sw(t):t.K_.set("Unknown")):(await t.W_.stop(),Tk(t))})),t.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,u=new aw(e,n,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ek(t,e){if(us("AsyncQueue",`${e}: ${t}`),Au(t))return new Ie(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Se.comparator(n.key,r.key):(n,r)=>Se.comparator(n.key,r.key),this.keyedMap=Wc(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.z_=new sn(Se.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ke():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ou{constructor(e,n,r,i,s,a,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new ou(e,n,Yl.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class EU{constructor(){this.queries=VC(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ze(n),s=i.queries;i.queries=VC(),s.forEach((a,u)=>{for(const c of u.J_)c.onError(r)})})(this,new Ie(ue.ABORTED,"Firestore shutting down"))}}function VC(){return new xa(t=>YR(t),Dm)}async function SU(t,e){const n=ze(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new TU,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=Ek(a,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&lw(n)}async function CU(t,e){const n=ze(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.J_.indexOf(e);a>=0&&(s.J_.splice(a,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IU(t,e){const n=ze(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const u of a.J_)u.ta(i)&&(r=!0);a.H_=i}}r&&lw(n)}function PU(t,e,n){const r=ze(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function lw(t){t.X_.forEach(e=>{e.next()})}var T0,FC;(FC=T0||(T0={})).na="default",FC.Cache="cache";class AU{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==T0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.key=e}}class Ck{constructor(e){this.key=e}}class xU{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=He(),this.mutatedKeys=He(),this.Va=XR(e),this.ma=new Yl(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new LC,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{const y=i.get(m),T=Nm(this.query,g)?g:null,S=!!y&&this.mutatedKeys.has(y.key),I=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let x=!1;y&&T?y.data.isEqual(T.data)?S!==I&&(r.track({type:3,doc:T}),x=!0):this.ya(y,T)||(r.track({type:2,doc:T}),x=!0,(c&&this.Va(T,c)>0||d&&this.Va(T,d)<0)&&(u=!0)):!y&&T?(r.track({type:0,doc:T}),x=!0):y&&!T&&(r.track({type:1,doc:y}),x=!0,(c||d)&&(u=!0)),x&&(T?(a=a.add(T),s=I?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{ma:a,pa:r,ss:u,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((m,g)=>function(T,S){const I=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return I(T)-I(S)}(m.type,g.type)||this.Va(m.doc,g.doc)),this.wa(r),i=i!=null&&i;const u=n&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,d=c!==this.Aa;return this.Aa=c,a.length!==0||d?{snapshot:new ou(this.query,e.ma,s,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:u}:{ba:u}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new LC,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=He(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new Ck(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new Sk(r))}),n}va(e){this.da=e.ds,this.Ra=He();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return ou.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class RU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kU{constructor(e){this.key=e,this.Fa=!1}}class bU{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new xa(u=>YR(u),Dm),this.Oa=new Map,this.Na=new Set,this.La=new sn(Se.comparator),this.Ba=new Map,this.ka=new ew,this.qa={},this.Qa=new Map,this.Ka=su.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function DU(t,e,n=!0){const r=Rk(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Ik(r,e,n,!0),i}async function NU(t,e){const n=Rk(t);await Ik(n,e,!0,!1)}async function Ik(t,e,n,r){const i=await iU(t.localStore,di(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await MU(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&_k(t.remoteStore,i),u}async function MU(t,e,n,r,i){t.Ua=(g,y,T)=>async function(I,x,k,F){let V=x.view.ga(k);V.ss&&(V=await bC(I.localStore,x.query,!1).then(({documents:D})=>x.view.ga(D,V)));const z=F&&F.targetChanges.get(x.targetId),j=F&&F.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(V,I.isPrimaryClient,z,j);return BC(I,x.targetId,Y.ba),Y.snapshot}(t,g,y,T);const s=await bC(t.localStore,e,!0),a=new xU(e,s.ds),u=a.ga(s.documents),c=nd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(u,t.isPrimaryClient,c);BC(t,n,d.ba);const m=new RU(e,n,a);return t.xa.set(e,m),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),d.snapshot}async function OU(t,e,n){const r=ze(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(a=>!Dm(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await w0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rw(r.remoteStore,i.targetId),E0(r,i.targetId)}).catch(Am)):(E0(r,i.targetId),await w0(r.localStore,i.targetId,!0))}async function LU(t,e){const n=ze(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rw(n.remoteStore,r.targetId))}async function Pk(t,e){const n=ze(t);try{const r=await nU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Ba.get(s);a&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Fa=!0:i.modifiedDocuments.size>0?Et(a.Fa):i.removedDocuments.size>0&&(Et(a.Fa),a.Fa=!1))}),await xk(n,r,e)}catch(r){await Am(r)}}function $C(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,a)=>{const u=a.view.ea(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=ze(a);c.onlineState=u;let d=!1;c.queries.forEach((m,g)=>{for(const y of g.J_)y.ea(u)&&(d=!0)}),d&&lw(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VU(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let a=new sn(Se.comparator);a=a.insert(s,En.newNoDocument(s,xe.min()));const u=He().add(s),c=new Lm(xe.min(),new Map,new sn(je),a,u);await Pk(r,c),r.La=r.La.remove(s),r.Ba.delete(e),uw(r)}else await w0(r.localStore,e,!1).then(()=>E0(r,e,n)).catch(Am)}function E0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||Ak(t,r)})}function Ak(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(rw(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),uw(t))}function BC(t,e,n){for(const r of n)r instanceof Sk?(t.ka.addReference(r.key,e),FU(t,r)):r instanceof Ck?(he("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||Ak(t,r.key)):ke()}function FU(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(he("SyncEngine","New document in limbo: "+n),t.Na.add(r),uw(t))}function uw(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Se(xt.fromString(e)),r=t.Ka.next();t.Ba.set(r,new kU(n)),t.La=t.La.insert(n,r),_k(t.remoteStore,new Ys(di(Y_(n.path)),r,"TargetPurposeLimboResolution",xm.oe))}}async function xk(t,e,n){const r=ze(t),i=[],s=[],a=[];r.xa.isEmpty()||(r.xa.forEach((u,c)=>{a.push(r.Ua(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);const g=nw.zi(c.targetId,d);s.push(g)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(c,d){const m=ze(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ee.forEach(d,y=>ee.forEach(y.Wi,T=>m.persistence.referenceDelegate.addReference(g,y.targetId,T)).next(()=>ee.forEach(y.Gi,T=>m.persistence.referenceDelegate.removeReference(g,y.targetId,T)))))}catch(g){if(!Au(g))throw g;he("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const y=g.targetId;if(!g.fromCache){const T=m.us.get(y),S=T.snapshotVersion,I=T.withLastLimboFreeSnapshotVersion(S);m.us=m.us.insert(y,I)}}}(r.localStore,s))}async function $U(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await mk(n.localStore,e);n.currentUser=e,function(s,a){s.Qa.forEach(u=>{u.forEach(c=>{c.reject(new Ie(ue.CANCELLED,a))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xk(n,r.Ts)}}function BU(t,e){const n=ze(t),r=n.Ba.get(e);if(r&&r.Fa)return He().add(r.key);{let i=He();const s=n.Oa.get(e);if(!s)return i;for(const a of s){const u=n.xa.get(a);i=i.unionWith(u.view.fa)}return i}}function Rk(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VU.bind(null,e),e.Ma.R_=IU.bind(null,e.eventManager),e.Ma.Wa=PU.bind(null,e.eventManager),e}class Bp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yk(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return tU(this.persistence,new ZB,e.initialUser,this.serializer)}ja(e){return new pk(tw.ei,this.serializer)}za(e){return new oU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bp.provider={build:()=>new Bp};class UU extends Bp{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Et(this.persistence.referenceDelegate instanceof $p);const r=this.persistence.referenceDelegate.garbageCollector;return new FB(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new pk(r=>$p.ei(r,n),this.serializer)}}class S0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$C(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$U.bind(null,this.syncEngine),await wU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EU}()}createDatastore(e){const n=yk(e.databaseInfo.databaseId),r=function(s){return new cU(s)}(e.databaseInfo);return function(s,a,u,c){return new fU(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,u){return new mU(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>$C(this.syncEngine,n,0),function(){return NC.p()?new NC:new aU}())}createSyncEngine(e,n){return function(i,s,a,u,c,d,m){const g=new bU(i,s,a,u,c,d);return m&&(g.$a=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ze(i);he("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await rd(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}S0.provider={build:()=>new S0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zn.UNAUTHENTICATED,this.clientId=jR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{he("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ek(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lv(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WU(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>OC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>OC(e.remoteStore,i)),t._onlineComponents=e}async function WU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await lv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wh("Error using user provided cache. Falling back to memory cache: "+n),await lv(t,new Bp)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await lv(t,new UU(void 0));return t._offlineComponents}async function HU(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await UC(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await UC(t,new S0))),t._onlineComponents}async function GU(t){const e=await HU(t),n=e.eventManager;return n.onListen=DU.bind(null,e.syncEngine),n.onUnlisten=OU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),n}function KU(t,e,n={}){const r=new fa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,d){const m=new jU({next:y=>{m.eu(),a.enqueueAndForget(()=>CU(s,g));const T=y.docs.has(u);!T&&y.fromCache?d.reject(new Ie(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&y.fromCache&&c&&c.source==="server"?d.reject(new Ie(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),g=new AU(Y_(u.path),m,{includeMetadataChanges:!0,ua:!0});return SU(s,g)}(await GU(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t,e,n){if(!n)throw new Ie(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QU(t,e,n,r){if(e===!0&&r===!0)throw new Ie(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zC(t){if(!Se.isDocumentKey(t))throw new Ie(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YU(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke()}function WC(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=YU(t);throw new Ie(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bk{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g5;switch(r.type){case"firstParty":return new _5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jC.get(n);r&&(he("ComponentProvider","Removing Datastore"),jC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cw(this.firestore,e,this._query)}}class Xi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ih(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xi(this.firestore,e,this._key)}}class Ih extends cw{constructor(e,n,r){super(e,n,Y_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xi(this.firestore,null,new Se(e))}withConverter(e){return new Ih(this.firestore,e,this._path)}}function XU(t,e,...n){if(t=Yn(t),arguments.length===1&&(e=jR.newId()),qU("doc","path",e),t instanceof bk){const r=xt.fromString(e,...n);return zC(r),new Xi(t,null,new Se(r))}{if(!(t instanceof Xi||t instanceof Ih))throw new Ie(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return zC(r),new Xi(t.firestore,t instanceof Ih?t.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new vk(this,"async_queue_retry"),this.fu=()=>{const r=av();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=av();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=av();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new fa;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Au(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw us("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=aw.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ke()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Dk extends bk{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new GC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GC(e),this._firestoreClient=void 0,await e}}}function JU(t){if(t._terminated)throw new Ie(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZU(t),t._firestoreClient}function ZU(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,d,m){return new M5(u,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,kk(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zU(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Up(fn.fromBase64String(e))}catch(n){throw new Ie(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Up(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const nj=new RegExp("[~\\*/\\[\\]]");function rj(t,e,n){if(e.search(nj)>=0)throw KC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new Nk(...e.split("."))._internalPath}catch{throw KC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function KC(t,e,n,r,i){let s=`Function ${e}() called with invalid data`;s+=". ";let a="";return new Ie(ue.INVALID_ARGUMENT,s+t+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ij(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ok("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ij extends Mk{data(){return super.data()}}function Ok(t,e){return typeof e=="string"?rj(t,e):e instanceof Nk?e._internalPath:e._delegate._internalPath}class sj{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return td(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Mt(a.doubleValue));return new tj(s)}convertGeoPoint(e){return new ej(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=km(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eh(e));default:return null}}convertTimestamp(e){const n=so(e);return new Gn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);Et(fk(r));const i=new Sh(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(n)||us(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lk extends Mk{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ok("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class aj extends Lk{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){t=WC(t,Xi);const e=WC(t.firestore,Dk);return KU(JU(e),t._key).then(n=>cj(e,t,n))}class uj extends sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Up(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,n)}}function cj(t,e,n){const r=n.docs.get(e._key),i=new uj(t);return new Lk(t,i,e._key,r,new oj(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Pu=i})(Aa),va(new ro("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Dk(new y5(r.getProvider("auth-internal")),new T5(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ie(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sh(d.options.projectId,m)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ci(lC,"4.7.5",e),ci(lC,"4.7.5","esm2017")})();var qC={};const QC="@firebase/database",YC="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vk="";function hj(t){Vk=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ht(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dj(e)}}catch{}return new fj},la=Fk("localStorage"),pj=Fk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Sm("@firebase/database"),mj=function(){let t=1;return function(){return t++}}(),$k=function(t){const e=K2(t),n=new z2;n.update(e);const r=n.digest();return R_.encodeByteArray(r)},sd=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=sd.apply(null,r):typeof r=="object"?e+=Ht(r):e+=r,e+=" "}return e};let rh=null,XC=!0;const gj=function(t,e){oe(!e,"Can't turn on custom loggers persistently."),Xl.logLevel=Oe.VERBOSE,rh=Xl.log.bind(Xl)},Sn=function(...t){if(XC===!0&&(XC=!1,rh===null&&pj.get("logging_enabled")===!0&&gj()),rh){const e=sd.apply(null,t);rh(e)}},od=function(t){return function(...e){Sn(t,...e)}},C0=function(...t){const e="FIREBASE INTERNAL ERROR: "+sd(...t);Xl.error(e)},cs=function(...t){const e=`FIREBASE FATAL ERROR: ${sd(...t)}`;throw Xl.error(e),new Error(e)},Kn=function(...t){const e="FIREBASE WARNING: "+sd(...t);Xl.warn(e)},yj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},au="[MIN_NAME]",Ea="[MAX_NAME]",Ru=function(t,e){if(t===e)return 0;if(t===au||e===Ea)return-1;if(e===au||t===Ea)return 1;{const n=JC(t),r=JC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_j=function(t,e){return t===e?0:t<e?-1:1},Nc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ht(e))},hw=function(t){if(typeof t!="object"||t===null)return Ht(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ht(e[r]),n+=":",n+=hw(t[e[r]]);return n+="}",n},Uk=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function qn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jk=function(t){oe(!Bk(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,a,u,c;t===0?(s=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=u+r,a=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(c=n;c;c-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(i?1:0),d.reverse();const m=d.join("");let g="";for(c=0;c<64;c+=8){let y=parseInt(m.substr(c,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},wj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Tj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ej(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Sj=new RegExp("^-?(0*)\\d{1,10}$"),Cj=-2147483648,Ij=2147483647,JC=function(t){if(Sj.test(t)){const e=Number(t);if(e>=Cj&&e<=Ij)return e}return null},ku=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Pj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ih=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(e)}}class fp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="5",zk="v",Wk="s",Hk="r",Gk="f",Kk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qk="ls",Qk="p",I0="ac",Yk="websocket",Xk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,r,i,s=!1,a="",u=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=la.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&la.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Rj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Zk(t,e,n){oe(typeof e=="string","typeof type must == string"),oe(typeof n=="object","typeof params must == object");let r;if(e===Yk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Xk)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Rj(t)&&(n.ns=t.namespace);const i=[];return qn(n,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.counters_={}}incrementCounter(e,n=1){gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return S2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={},cv={};function fw(t){const e=t.toString();return uv[e]||(uv[e]=new kj),uv[e]}function bj(t,e){const n=t.toString();return cv[n]||(cv[n]=e()),cv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ku(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="start",Nj="close",Mj="pLPCommand",Oj="pRTLPCB",eb="id",tb="pw",nb="ser",Lj="cb",Vj="seg",Fj="ts",$j="d",Bj="dframe",rb=1870,ib=30,Uj=rb-ib,jj=25e3,zj=3e4;class Ml{constructor(e,n,r,i,s,a,u){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=od(e),this.stats_=fw(n),this.urlFn=c=>(this.appCheckToken&&(c[I0]=this.appCheckToken),Zk(n,Xk,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Dj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zj)),vj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pw((...s)=>{const[a,u,c,d,m]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===ZC)this.id=u,this.password=c;else if(a===Nj)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[ZC]="t",r[nb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Lj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[zk]=dw,this.transportSessionId&&(r[Wk]=this.transportSessionId),this.lastSessionId&&(r[qk]=this.lastSessionId),this.applicationId&&(r[Qk]=this.applicationId),this.appCheckToken&&(r[I0]=this.appCheckToken),typeof location<"u"&&location.hostname&&Kk.test(location.hostname)&&(r[Hk]=Gk);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ml.forceAllow_=!0}static forceDisallow(){Ml.forceDisallow_=!0}static isAvailable(){return Ml.forceAllow_?!0:!Ml.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wj()&&!Tj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ux(n),i=Uk(r,Uj);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Bj]="t",r[eb]=e,r[tb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ht(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class pw{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mj(),window[Mj+this.uniqueCallbackIdentifier]=e,window[Oj+this.uniqueCallbackIdentifier]=n,this.myIFrame=pw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Sn("frame writing exception"),u.stack&&Sn(u.stack),Sn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[eb]=this.myID,e[tb]=this.myPW,e[nb]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ib+r.length<=rb;){const a=this.pendingSegs.shift();r=r+"&"+Vj+i+"="+a.seg+"&"+Fj+i+"="+a.ts+"&"+$j+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(jj)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=16384,Hj=45e3;let jp=null;typeof MozWebSocket<"u"?jp=MozWebSocket:typeof WebSocket<"u"&&(jp=WebSocket);class jr{constructor(e,n,r,i,s,a,u){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=od(this.connId),this.stats_=fw(n),this.connURL=jr.connectionURL_(n,a,u,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const a={};return a[zk]=dw,typeof location<"u"&&location.hostname&&Kk.test(location.hostname)&&(a[Hk]=Gk),n&&(a[Wk]=n),r&&(a[qk]=r),i&&(a[I0]=i),s&&(a[Qk]=s),Zk(e,Yk,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,la.set("previous_websocket_failure",!0);try{let r;Kx(),this.mySock=new jp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&jp!==null&&!jr.forceDisallow_}static previouslyFailed(){return la.isInMemoryStorage||la.get("previous_websocket_failure")===!0}markConnectionHealthy(){la.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=gh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Uk(n,Wj);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jr.responsesRequiredToBeHealthy=2;jr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{static get ALL_TRANSPORTS(){return[Ml,jr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=jr&&jr.isAvailable();let r=n&&!jr.previouslyFailed();if(e.webSocketOnly&&(n||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jr];else{const i=this.transports_=[];for(const s of Ph.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ph.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ph.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=6e4,Kj=5e3,qj=10*1024,Qj=100*1024,hv="t",eI="d",Yj="s",tI="r",Xj="e",nI="o",rI="a",iI="n",sI="p",Jj="h";class Zj{constructor(e,n,r,i,s,a,u,c,d,m){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=od("c:"+this.id+":"),this.transportManager_=new Ph(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ih(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Qj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hv in e){const n=e[hv];n===rI?this.upgradeIfSecondaryHealthy_():n===tI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===nI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Nc("t",e),r=Nc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:iI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Nc("t",e),r=Nc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Nc(hv,e);if(eI in e){const r=e[eI];if(n===Jj){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===iI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Yj?this.onConnectionShutdown_(r):n===tI?this.onReset_(r):n===Xj?C0("Server Error: "+r):n===nI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),dw!==r&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ih(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ih(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Kj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(la.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends ob{static getInstance(){return new zp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!k_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=32,aI=768;class st{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ke(){return new st("")}function Ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function uo(t){return t.pieces_.length-t.pieceNum_}function ut(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function ab(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function e3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ub(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function Kt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new st(n,0)}function Le(t){return t.pieceNum_>=t.pieces_.length}function Mn(t,e){const n=Ve(t),r=Ve(e);if(n===null)return e;if(n===r)return Mn(ut(t),ut(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cb(t,e){if(uo(t)!==uo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Wr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(uo(t)>uo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class t3{constructor(e,n){this.errorPrefix_=n,this.parts_=lb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Em(this.parts_[r]);hb(this)}}function n3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Em(e),hb(t)}function r3(t){const e=t.parts_.pop();t.byteLength_-=Em(e),t.parts_.length>0&&(t.byteLength_-=1)}function hb(t){if(t.byteLength_>aI)throw new Error(t.errorPrefix_+"has a key path longer than "+aI+" bytes ("+t.byteLength_+").");if(t.parts_.length>oI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+oI+") or object contains a cycle "+ta(t))}function ta(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends ob{static getInstance(){return new mw}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=1e3,i3=60*5*1e3,lI=30*1e3,s3=1.3,o3=3e4,a3="server_kill",uI=3;class Ji extends sb{constructor(e,n,r,i,s,a,u,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=Ji.nextPersistentConnectionId_++,this.log_=od("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mc,this.maxReconnectDelay_=i3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Kx())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&zp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ht(s)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Tm,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const u={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,u=>{const c=u.d,d=u.s;Ji.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gs(e,"w")){const r=tu(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||j2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=U2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const a={p:n,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ht(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):C0("Unrecognized action received from server: "+Ht(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>o3&&(this.reconnectDelay_=Mc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*s3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ji.nextConnectionId_++,s=this.lastSessionId;let a=!1,u=null;const c=function(){u?u.close():(a=!0,r())},d=function(g){oe(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:d};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,u=new Zj(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,T=>{Kn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(a3)},s))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Kn(g),c())}}}interrupt(e){Sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Jv(this.interruptReasons_)&&(this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>hw(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new st(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Sn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uI&&(this.reconnectDelay_=lI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Sn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Vk.replace(/\./g,"-")]=1,k_()?e["framework.cordova"]=1:Gx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zp.getInstance().currentlyOnline();return Jv(this.interruptReasons_)&&e}}Ji.nextPersistentConnectionId_=0;Ji.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Me(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Me(au,e),i=new Me(au,n);return this.compare(r,i)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf;class db extends Fm{static get __EMPTY_NODE(){return Wf}static set __EMPTY_NODE(e){Wf=e}compare(e,n){return Ru(e.name,n.name)}isDefinedOn(e){throw Su("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Ea,Wf)}makePost(e,n){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,Wf)}toString(){return".key"}}const Jl=new db;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nn.RED,this.left=i??Hn.EMPTY_NODE,this.right=s??Hn.EMPTY_NODE}copy(e,n,r,i,s){return new nn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Hn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nn.RED=!0;nn.BLACK=!1;class l3{copy(e,n,r,i,s){return this}insert(e,n,r){return new nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Hn{constructor(e,n=Hn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Hn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new Hn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hf(this.root_,null,this.comparator_,!0,e)}}Hn.EMPTY_NODE=new l3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t,e){return Ru(t.name,e.name)}function gw(t,e){return Ru(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P0;function c3(t){P0=t}const fb=function(t){return typeof t=="number"?"number:"+jk(t):"string:"+t},pb=function(t){if(t.isLeafNode()){const e=t.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gs(e,".sv"),"Priority must be a string or number.")}else oe(t===P0||t.isEmpty(),"priority of unexpected type.");oe(t===P0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cI;class en{static set __childrenNodeConstructor(e){cI=e}static get __childrenNodeConstructor(){return cI}constructor(e,n=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Le(e)?this:Ve(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ve(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||uo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(ut(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=jk(this.value_):e+=this.value_,this.lazyHash_=$k(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=en.VALUE_TYPE_ORDER.indexOf(n),s=en.VALUE_TYPE_ORDER.indexOf(r);return oe(i>=0,"Unknown leaf type: "+n),oe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mb,gb;function h3(t){mb=t}function d3(t){gb=t}class f3 extends Fm{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ru(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Ea,new en("[PRIORITY-POST]",gb))}makePost(e,n){const r=mb(e);return new Me(n,new en("[PRIORITY-POST]",r))}toString(){return".priority"}}const Rt=new f3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=Math.log(2);class m3{constructor(e){const n=s=>parseInt(Math.log(s)/p3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wp=function(t,e,n,r){t.sort(e);const i=function(c,d){const m=d-c;let g,y;if(m===0)return null;if(m===1)return g=t[c],y=n?n(g):g,new nn(y,g.node,nn.BLACK,null,null);{const T=parseInt(m/2,10)+c,S=i(c,T),I=i(T+1,d);return g=t[T],y=n?n(g):g,new nn(y,g.node,nn.BLACK,S,I)}},s=function(c){let d=null,m=null,g=t.length;const y=function(S,I){const x=g-S,k=g;g-=S;const F=i(x+1,k),V=t[x],z=n?n(V):V;T(new nn(z,V.node,I,null,F))},T=function(S){d?(d.left=S,d=S):(m=S,d=S)};for(let S=0;S<c.count;++S){const I=c.nextBitIsOne(),x=Math.pow(2,c.count-(S+1));I?y(x,nn.BLACK):(y(x,nn.BLACK),y(x,nn.RED))}return m},a=new m3(t.length),u=s(a);return new Hn(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv;const Cl={};class Gi{static get Default(){return oe(Cl&&Rt,"ChildrenNode.ts has not been loaded"),dv=dv||new Gi({".priority":Cl},{".priority":Rt}),dv}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=tu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Hn?n:null}hasIndex(e){return gs(this.indexSet_,e.toString())}addIndex(e,n){oe(e!==Jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Me.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let u;i?u=Wp(r,e.getCompare()):u=Cl;const c=e.toString(),d=Object.assign({},this.indexSet_);d[c]=e;const m=Object.assign({},this.indexes_);return m[c]=u,new Gi(m,d)}addToIndexes(e,n){const r=Ap(this.indexes_,(i,s)=>{const a=tu(this.indexSet_,s);if(oe(a,"Missing index implementation for "+s),i===Cl)if(a.isDefinedOn(e.node)){const u=[],c=n.getIterator(Me.Wrap);let d=c.getNext();for(;d;)d.name!==e.name&&u.push(d),d=c.getNext();return u.push(e),Wp(u,a.getCompare())}else return Cl;else{const u=n.get(e.name);let c=i;return u&&(c=c.remove(new Me(e.name,u))),c.insert(e,e.node)}});return new Gi(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ap(this.indexes_,i=>{if(i===Cl)return i;{const s=n.get(e.name);return s?i.remove(new Me(e.name,s)):i}});return new Gi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;class Ce{static get EMPTY_NODE(){return Oc||(Oc=new Ce(new Hn(gw),null,Gi.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pb(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oc}updatePriority(e){return this.children_.isEmpty()?this:new Ce(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Oc:n}}getChild(e){const n=Ve(e);return n===null?this:this.getImmediateChild(n).getChild(ut(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Me(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?Oc:this.priorityNode_;return new Ce(i,a,s)}}updateChild(e,n){const r=Ve(e);if(r===null)return n;{oe(Ve(e)!==".priority"||uo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ut(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Rt,(a,u)=>{n[a]=u.val(e),r++,s&&Ce.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const u in n)a[u]=n[u];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fb(this.getPriority().val())+":"),this.forEachChild(Rt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":$k(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Me(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Me(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Me(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Me.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ad?-1:0}withIndex(e){if(e===Jl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ce(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Jl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Rt),i=n.getIterator(Rt);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Jl?null:this.indexMap_.get(e.toString())}}Ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class g3 extends Ce{constructor(){super(new Hn(gw),Ce.EMPTY_NODE,Gi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ce.EMPTY_NODE}isEmpty(){return!1}}const ad=new g3;Object.defineProperties(Me,{MIN:{value:new Me(au,Ce.EMPTY_NODE)},MAX:{value:new Me(Ea,ad)}});db.__EMPTY_NODE=Ce.EMPTY_NODE;en.__childrenNodeConstructor=Ce;c3(ad);d3(ad);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=!0;function rn(t,e=null){if(t===null)return Ce.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new en(n,rn(e))}if(!(t instanceof Array)&&y3){const n=[];let r=!1;if(qn(t,(a,u)=>{if(a.substring(0,1)!=="."){const c=rn(u);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Me(a,c)))}}),n.length===0)return Ce.EMPTY_NODE;const s=Wp(n,u3,a=>a.name,gw);if(r){const a=Wp(n,Rt.getCompare());return new Ce(s,rn(e),new Gi({".priority":a},{".priority":Rt}))}else return new Ce(s,rn(e),Gi.Default)}else{let n=Ce.EMPTY_NODE;return qn(t,(r,i)=>{if(gs(t,r)&&r.substring(0,1)!=="."){const s=rn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(rn(e))}}h3(rn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3 extends Fm{constructor(e){super(),this.indexPath_=e,oe(!Le(e)&&Ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ru(e.name,n.name):s}makePost(e,n){const r=rn(e),i=Ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new Me(n,i)}maxPost(){const e=Ce.EMPTY_NODE.updateChild(this.indexPath_,ad);return new Me(Ea,e)}toString(){return lb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3 extends Fm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ru(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,n){const r=rn(e);return new Me(n,r)}toString(){return".value"}}const w3=new _3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){return{type:"value",snapshotNode:t}}function lu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ah(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function T3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.index_=e}updateChild(e,n,r,i,s,a){oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(i).equals(r.getChild(i))&&u.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(Ah(n,u)):oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(lu(n,r)):a.trackChildChange(xh(n,r,u))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Rt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ah(i,s))}),n.isLeafNode()||n.forEachChild(Rt,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(xh(i,s,a))}else r.trackChildChange(lu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ce.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.indexedFilter_=new yw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rh.getStartPost_(e),this.endPost_=Rh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,a){return this.matches(new Me(n,r))||(r=Ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ce.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ce.EMPTY_NODE);const s=this;return n.forEachChild(Rt,(a,u)=>{s.matches(new Me(a,u))||(i=i.updateImmediateChild(a,Ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Rh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,a){return this.rangedFilter_.matches(new Me(n,r))||(r=Ce.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,a):this.fullLimitUpdateChild_(e,n,r,s,a)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ce.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const u=s.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))i=i.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ce.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const u=s.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:i=i.updateImmediateChild(u.name,Ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let a;if(this.reverse_){const g=this.index_.getCompare();a=(y,T)=>g(T,y)}else a=this.index_.getCompare();const u=e;oe(u.numChildren()===this.limit_,"");const c=new Me(n,r),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),m=this.rangedFilter_.matches(c);if(u.hasChild(n)){const g=u.getImmediateChild(n);let y=i.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||u.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);const T=y==null?1:a(y,c);if(m&&!r.isEmpty()&&T>=0)return s!=null&&s.trackChildChange(xh(n,r,g)),u.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ah(n,g));const I=u.updateImmediateChild(n,Ce.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(s!=null&&s.trackChildChange(lu(y.name,y.node)),I.updateImmediateChild(y.name,y.node)):I}}else return r.isEmpty()?e:m&&a(d,c)>=0?(s!=null&&(s.trackChildChange(Ah(d.name,d.node)),s.trackChildChange(lu(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(d.name,Ce.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:au}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ea}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rt}copy(){const e=new vw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function S3(t){return t.loadsAllData()?new yw(t.getIndex()):t.hasLimit()?new E3(t):new Rh(t)}function hI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Rt?n="$priority":t.index_===w3?n="$value":t.index_===Jl?n="$key":(oe(t.index_ instanceof v3,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ht(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ht(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ht(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ht(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ht(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Rt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends sb{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=od("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Hp.getListenId_(e,r),u={};this.listens_[a]=u;const c=hI(e._queryParams);this.restRequest_(s+".json",c,(d,m)=>{let g=m;if(d===404&&(g=null,d=null),d===null&&this.onDataUpdate_(s,g,!1,r),tu(this.listens_,a)===u){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",i(y,null)}})}unlisten(e,n){const r=Hp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=hI(e._queryParams),r=e._path.toString(),i=new Tm;return this.restRequest_(r+".json",n,(s,a)=>{let u=a;s===404&&(u=null,s=null),s===null?(this.onDataUpdate_(r,u,!1,null),i.resolve(u)):i.reject(new Error(u))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Cu(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=gh(u.responseText)}catch{Kn("Failed to parse JSON response for "+a+": "+u.responseText)}r(null,c)}else u.status!==401&&u.status!==404&&Kn("Got unsuccessful REST response for "+a+" Status: "+u.status),r(u.status);r=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.rootNode_=Ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){return{value:null,children:new Map}}function vb(t,e,n){if(Le(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ve(e);t.children.has(r)||t.children.set(r,Gp());const i=t.children.get(r);e=ut(e),vb(i,e,n)}}function A0(t,e,n){t.value!==null?n(e,t.value):I3(t,(r,i)=>{const s=new st(e.toString()+"/"+r);A0(i,s,n)})}function I3(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&qn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=10*1e3,A3=30*1e3,x3=5*60*1e3;class R3{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new P3(e);const r=fI+(A3-fI)*Math.random();ih(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;qn(e,(i,s)=>{s>0&&gs(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ih(this.reportStats_.bind(this),Math.floor(Math.random()*2*x3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Hr||(Hr={}));function _b(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _w(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ww(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Hr.ACK_USER_WRITE,this.source=_b()}operationForChild(e){if(Le(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new st(e));return new Kp(Ke(),n,this.revert)}}else return oe(Ve(this.path)===e,"operationForChild called for unrelated child."),new Kp(ut(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.source=e,this.path=n,this.type=Hr.LISTEN_COMPLETE}operationForChild(e){return Le(this.path)?new kh(this.source,Ke()):new kh(this.source,ut(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Hr.OVERWRITE}operationForChild(e){return Le(this.path)?new Sa(this.source,Ke(),this.snap.getImmediateChild(e)):new Sa(this.source,ut(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Hr.MERGE}operationForChild(e){if(Le(this.path)){const n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Sa(this.source,Ke(),n.value):new bh(this.source,Ke(),n)}else return oe(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bh(this.source,ut(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function b3(t,e,n,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(T3(a.childName,a.snapshotNode))}),Lc(t,i,"child_removed",e,r,n),Lc(t,i,"child_added",e,r,n),Lc(t,i,"child_moved",s,r,n),Lc(t,i,"child_changed",e,r,n),Lc(t,i,"value",e,r,n),i}function Lc(t,e,n,r,i,s){const a=r.filter(u=>u.type===n);a.sort((u,c)=>N3(t,u,c)),a.forEach(u=>{const c=D3(t,u,s);i.forEach(d=>{d.respondsTo(u.type)&&e.push(d.createEvent(c,t.query_))})})}function D3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function N3(t,e,n){if(e.childName==null||n.childName==null)throw Su("Should only compare child_ events.");const r=new Me(e.childName,e.snapshotNode),i=new Me(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){return{eventCache:t,serverCache:e}}function sh(t,e,n,r){return $m(new co(e,n,r),t.serverCache)}function wb(t,e,n,r){return $m(t.eventCache,new co(e,n,r))}function qp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ca(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv;const M3=()=>(fv||(fv=new Hn(_j)),fv);class dt{static fromObject(e){let n=new dt(null);return qn(e,(r,i)=>{n=n.set(new st(r),i)}),n}constructor(e,n=M3()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ke(),value:this.value};if(Le(e))return null;{const r=Ve(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ut(e),n);return s!=null?{path:Kt(new st(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Le(e))return this;{const n=Ve(e),r=this.children.get(n);return r!==null?r.subtree(ut(e)):new dt(null)}}set(e,n){if(Le(e))return new dt(n,this.children);{const r=Ve(e),s=(this.children.get(r)||new dt(null)).set(ut(e),n),a=this.children.insert(r,s);return new dt(this.value,a)}}remove(e){if(Le(e))return this.children.isEmpty()?new dt(null):new dt(null,this.children);{const n=Ve(e),r=this.children.get(n);if(r){const i=r.remove(ut(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new dt(null):new dt(this.value,s)}else return this}}get(e){if(Le(e))return this.value;{const n=Ve(e),r=this.children.get(n);return r?r.get(ut(e)):null}}setTree(e,n){if(Le(e))return n;{const r=Ve(e),s=(this.children.get(r)||new dt(null)).setTree(ut(e),n);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new dt(this.value,a)}}fold(e){return this.fold_(Ke(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Kt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ke(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Le(e))return null;{const s=Ve(e),a=this.children.get(s);return a?a.findOnPath_(ut(e),Kt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ke(),n)}foreachOnPath_(e,n,r){if(Le(e))return this;{this.value&&r(n,this.value);const i=Ve(e),s=this.children.get(i);return s?s.foreachOnPath_(ut(e),Kt(n,i),r):new dt(null)}}foreach(e){this.foreach_(Ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Kt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.writeTree_=e}static empty(){return new Kr(new dt(null))}}function oh(t,e,n){if(Le(e))return new Kr(new dt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=Mn(i,e);return s=s.updateChild(a,n),new Kr(t.writeTree_.set(i,s))}else{const i=new dt(n),s=t.writeTree_.setTree(e,i);return new Kr(s)}}}function pI(t,e,n){let r=t;return qn(n,(i,s)=>{r=oh(r,Kt(e,i),s)}),r}function mI(t,e){if(Le(e))return Kr.empty();{const n=t.writeTree_.setTree(e,new dt(null));return new Kr(n)}}function x0(t,e){return Ra(t,e)!=null}function Ra(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Mn(n.path,e)):null}function gI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Rt,(r,i)=>{e.push(new Me(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Me(r,i.value))}),e}function eo(t,e){if(Le(e))return t;{const n=Ra(t,e);return n!=null?new Kr(new dt(n)):new Kr(t.writeTree_.subtree(e))}}function R0(t){return t.writeTree_.isEmpty()}function uu(t,e){return Tb(Ke(),t.writeTree_,e)}function Tb(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(oe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Tb(Kt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Kt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){return Ib(e,t)}function O3(t,e,n,r,i){oe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=oh(t.visibleWrites,e,n)),t.lastWriteId=r}function L3(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function V3(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);oe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const u=t.allWrites[a];u.visible&&(a>=n&&F3(u,r.path)?i=!1:Wr(r.path,u.path)&&(s=!0)),a--}if(i){if(s)return $3(t),!0;if(r.snap)t.visibleWrites=mI(t.visibleWrites,r.path);else{const u=r.children;qn(u,c=>{t.visibleWrites=mI(t.visibleWrites,Kt(r.path,c))})}return!0}else return!1}function F3(t,e){if(t.snap)return Wr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Wr(Kt(t.path,n),e))return!0;return!1}function $3(t){t.visibleWrites=Eb(t.allWrites,B3,Ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function B3(t){return t.visible}function Eb(t,e,n){let r=Kr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const a=s.path;let u;if(s.snap)Wr(n,a)?(u=Mn(n,a),r=oh(r,u,s.snap)):Wr(a,n)&&(u=Mn(a,n),r=oh(r,Ke(),s.snap.getChild(u)));else if(s.children){if(Wr(n,a))u=Mn(n,a),r=pI(r,u,s.children);else if(Wr(a,n))if(u=Mn(a,n),Le(u))r=pI(r,Ke(),s.children);else{const c=tu(s.children,Ve(u));if(c){const d=c.getChild(ut(u));r=oh(r,Ke(),d)}}}else throw Su("WriteRecord should have .snap or .children")}}return r}function Sb(t,e,n,r,i){if(!r&&!i){const s=Ra(t.visibleWrites,e);if(s!=null)return s;{const a=eo(t.visibleWrites,e);if(R0(a))return n;if(n==null&&!x0(a,Ke()))return null;{const u=n||Ce.EMPTY_NODE;return uu(a,u)}}}else{const s=eo(t.visibleWrites,e);if(!i&&R0(s))return n;if(!i&&n==null&&!x0(s,Ke()))return null;{const a=function(d){return(d.visible||i)&&(!r||!~r.indexOf(d.writeId))&&(Wr(d.path,e)||Wr(e,d.path))},u=Eb(t.allWrites,a,e),c=n||Ce.EMPTY_NODE;return uu(u,c)}}}function U3(t,e,n){let r=Ce.EMPTY_NODE;const i=Ra(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rt,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(n){const s=eo(t.visibleWrites,e);return n.forEachChild(Rt,(a,u)=>{const c=uu(eo(s,new st(a)),u);r=r.updateImmediateChild(a,c)}),gI(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=eo(t.visibleWrites,e);return gI(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function j3(t,e,n,r,i){oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Kt(e,n);if(x0(t.visibleWrites,s))return null;{const a=eo(t.visibleWrites,s);return R0(a)?i.getChild(n):uu(a,i.getChild(n))}}function z3(t,e,n,r){const i=Kt(e,n),s=Ra(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const a=eo(t.visibleWrites,i);return uu(a,r.getNode().getImmediateChild(n))}else return null}function W3(t,e){return Ra(t.visibleWrites,e)}function H3(t,e,n,r,i,s,a){let u;const c=eo(t.visibleWrites,e),d=Ra(c,Ke());if(d!=null)u=d;else if(n!=null)u=uu(c,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const m=[],g=a.getCompare(),y=s?u.getReverseIteratorFrom(r,a):u.getIteratorFrom(r,a);let T=y.getNext();for(;T&&m.length<i;)g(T,r)!==0&&m.push(T),T=y.getNext();return m}else return[]}function G3(){return{visibleWrites:Kr.empty(),allWrites:[],lastWriteId:-1}}function Qp(t,e,n,r){return Sb(t.writeTree,t.treePath,e,n,r)}function Tw(t,e){return U3(t.writeTree,t.treePath,e)}function yI(t,e,n,r){return j3(t.writeTree,t.treePath,e,n,r)}function Yp(t,e){return W3(t.writeTree,Kt(t.treePath,e))}function K3(t,e,n,r,i,s){return H3(t.writeTree,t.treePath,e,n,r,i,s)}function Ew(t,e,n){return z3(t.writeTree,t.treePath,e,n)}function Cb(t,e){return Ib(Kt(t.treePath,e),t.writeTree)}function Ib(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,xh(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ah(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,lu(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,xh(r,e.snapshotNode,i.oldSnap));else throw Su("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Pb=new Q3;class Sw{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new co(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ew(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ca(this.viewCache_),s=K3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t){return{filter:t}}function X3(t,e){oe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function J3(t,e,n,r,i){const s=new q3;let a,u;if(n.type===Hr.OVERWRITE){const d=n;d.source.fromUser?a=k0(t,e,d.path,d.snap,r,i,s):(oe(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered()&&!Le(d.path),a=Xp(t,e,d.path,d.snap,r,i,u,s))}else if(n.type===Hr.MERGE){const d=n;d.source.fromUser?a=e9(t,e,d.path,d.children,r,i,s):(oe(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered(),a=b0(t,e,d.path,d.children,r,i,u,s))}else if(n.type===Hr.ACK_USER_WRITE){const d=n;d.revert?a=r9(t,e,d.path,r,i,s):a=t9(t,e,d.path,d.affectedTree,r,i,s)}else if(n.type===Hr.LISTEN_COMPLETE)a=n9(t,e,n.path,r,s);else throw Su("Unknown operation type: "+n.type);const c=s.getChanges();return Z3(e,a,c),{viewCache:a,changes:c}}function Z3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=qp(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(yb(qp(e)))}}function Ab(t,e,n,r,i,s){const a=e.eventCache;if(Yp(r,n)!=null)return e;{let u,c;if(Le(n))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Ca(e),m=d instanceof Ce?d:Ce.EMPTY_NODE,g=Tw(r,m);u=t.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const d=Qp(r,Ca(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const d=Ve(n);if(d===".priority"){oe(uo(n)===1,"Can't have a priority with additional path components");const m=a.getNode();c=e.serverCache.getNode();const g=yI(r,n,m,c);g!=null?u=t.filter.updatePriority(m,g):u=a.getNode()}else{const m=ut(n);let g;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();const y=yI(r,n,a.getNode(),c);y!=null?g=a.getNode().getImmediateChild(d).updateChild(m,y):g=a.getNode().getImmediateChild(d)}else g=Ew(r,d,e.serverCache);g!=null?u=t.filter.updateChild(a.getNode(),d,g,m,i,s):u=a.getNode()}}return sh(e,u,a.isFullyInitialized()||Le(n),t.filter.filtersNodes())}}function Xp(t,e,n,r,i,s,a,u){const c=e.serverCache;let d;const m=a?t.filter:t.filter.getIndexedFilter();if(Le(n))d=m.updateFullNode(c.getNode(),r,null);else if(m.filtersNodes()&&!c.isFiltered()){const T=c.getNode().updateChild(n,r);d=m.updateFullNode(c.getNode(),T,null)}else{const T=Ve(n);if(!c.isCompleteForPath(n)&&uo(n)>1)return e;const S=ut(n),x=c.getNode().getImmediateChild(T).updateChild(S,r);T===".priority"?d=m.updatePriority(c.getNode(),x):d=m.updateChild(c.getNode(),T,x,S,Pb,null)}const g=wb(e,d,c.isFullyInitialized()||Le(n),m.filtersNodes()),y=new Sw(i,g,s);return Ab(t,g,n,i,y,u)}function k0(t,e,n,r,i,s,a){const u=e.eventCache;let c,d;const m=new Sw(i,e,s);if(Le(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,a),c=sh(e,d,!0,t.filter.filtersNodes());else{const g=Ve(n);if(g===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),c=sh(e,d,u.isFullyInitialized(),u.isFiltered());else{const y=ut(n),T=u.getNode().getImmediateChild(g);let S;if(Le(y))S=r;else{const I=m.getCompleteChild(g);I!=null?ab(y)===".priority"&&I.getChild(ub(y)).isEmpty()?S=I:S=I.updateChild(y,r):S=Ce.EMPTY_NODE}if(T.equals(S))c=e;else{const I=t.filter.updateChild(u.getNode(),g,S,y,m,a);c=sh(e,I,u.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function vI(t,e){return t.eventCache.isCompleteForChild(e)}function e9(t,e,n,r,i,s,a){let u=e;return r.foreach((c,d)=>{const m=Kt(n,c);vI(e,Ve(m))&&(u=k0(t,u,m,d,i,s,a))}),r.foreach((c,d)=>{const m=Kt(n,c);vI(e,Ve(m))||(u=k0(t,u,m,d,i,s,a))}),u}function _I(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function b0(t,e,n,r,i,s,a,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,d;Le(n)?d=r:d=new dt(null).setTree(n,r);const m=e.serverCache.getNode();return d.children.inorderTraversal((g,y)=>{if(m.hasChild(g)){const T=e.serverCache.getNode().getImmediateChild(g),S=_I(t,T,y);c=Xp(t,c,new st(g),S,i,s,a,u)}}),d.children.inorderTraversal((g,y)=>{const T=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!m.hasChild(g)&&!T){const S=e.serverCache.getNode().getImmediateChild(g),I=_I(t,S,y);c=Xp(t,c,new st(g),I,i,s,a,u)}}),c}function t9(t,e,n,r,i,s,a){if(Yp(i,n)!=null)return e;const u=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Le(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Xp(t,e,n,c.getNode().getChild(n),i,s,u,a);if(Le(n)){let d=new dt(null);return c.getNode().forEachChild(Jl,(m,g)=>{d=d.set(new st(m),g)}),b0(t,e,n,d,i,s,u,a)}else return e}else{let d=new dt(null);return r.foreach((m,g)=>{const y=Kt(n,m);c.isCompleteForPath(y)&&(d=d.set(m,c.getNode().getChild(y)))}),b0(t,e,n,d,i,s,u,a)}}function n9(t,e,n,r,i){const s=e.serverCache,a=wb(e,s.getNode(),s.isFullyInitialized()||Le(n),s.isFiltered());return Ab(t,a,n,r,Pb,i)}function r9(t,e,n,r,i,s){let a;if(Yp(r,n)!=null)return e;{const u=new Sw(r,e,i),c=e.eventCache.getNode();let d;if(Le(n)||Ve(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Qp(r,Ca(e));else{const g=e.serverCache.getNode();oe(g instanceof Ce,"serverChildren would be complete if leaf node"),m=Tw(r,g)}m=m,d=t.filter.updateFullNode(c,m,s)}else{const m=Ve(n);let g=Ew(r,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=c.getImmediateChild(m)),g!=null?d=t.filter.updateChild(c,m,g,ut(n),u,s):e.eventCache.getNode().hasChild(m)?d=t.filter.updateChild(c,m,Ce.EMPTY_NODE,ut(n),u,s):d=c,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Qp(r,Ca(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,s)))}return a=e.serverCache.isFullyInitialized()||Yp(r,Ke())!=null,sh(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yw(r.getIndex()),s=S3(r);this.processor_=Y3(s);const a=n.serverCache,u=n.eventCache,c=i.updateFullNode(Ce.EMPTY_NODE,a.getNode(),null),d=s.updateFullNode(Ce.EMPTY_NODE,u.getNode(),null),m=new co(c,a.isFullyInitialized(),i.filtersNodes()),g=new co(d,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=$m(g,m),this.eventGenerator_=new k3(this.query_)}get query(){return this.query_}}function s9(t){return t.viewCache_.serverCache.getNode()}function o9(t){return qp(t.viewCache_)}function a9(t,e){const n=Ca(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Le(e)&&!n.getImmediateChild(Ve(e)).isEmpty())?n.getChild(e):null}function wI(t){return t.eventRegistrations_.length===0}function l9(t,e){t.eventRegistrations_.push(e)}function TI(t,e,n){const r=[];if(n){oe(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function EI(t,e,n,r){e.type===Hr.MERGE&&e.source.queryId!==null&&(oe(Ca(t.viewCache_),"We should always have a full cache before handling merges"),oe(qp(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=J3(t.processor_,i,e,n,r);return X3(t.processor_,s.viewCache),oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,xb(t,s.changes,s.viewCache.eventCache.getNode(),null)}function u9(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rt,(s,a)=>{r.push(lu(s,a))}),n.isFullyInitialized()&&r.push(yb(n.getNode())),xb(t,r,n.getNode(),e)}function xb(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return b3(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;class Rb{constructor(){this.views=new Map}}function c9(t){oe(!Jp,"__referenceConstructor has already been defined"),Jp=t}function h9(){return oe(Jp,"Reference.ts has not been loaded"),Jp}function d9(t){return t.views.size===0}function Cw(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return oe(s!=null,"SyncTree gave us an op for an invalid query."),EI(s,e,n,r)}else{let s=[];for(const a of t.views.values())s=s.concat(EI(a,e,n,r));return s}}function kb(t,e,n,r,i){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let u=Qp(n,i?r:null),c=!1;u?c=!0:r instanceof Ce?(u=Tw(n,r),c=!1):(u=Ce.EMPTY_NODE,c=!1);const d=$m(new co(u,c,!1),new co(r,i,!1));return new i9(e,d)}return a}function f9(t,e,n,r,i,s){const a=kb(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),l9(a,n),u9(a,n)}function p9(t,e,n,r){const i=e._queryIdentifier,s=[];let a=[];const u=ho(t);if(i==="default")for(const[c,d]of t.views.entries())a=a.concat(TI(d,n,r)),wI(d)&&(t.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=t.views.get(i);c&&(a=a.concat(TI(c,n,r)),wI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return u&&!ho(t)&&s.push(new(h9())(e._repo,e._path)),{removed:s,events:a}}function bb(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function to(t,e){let n=null;for(const r of t.views.values())n=n||a9(r,e);return n}function Db(t,e){if(e._queryParams.loadsAllData())return Um(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Nb(t,e){return Db(t,e)!=null}function ho(t){return Um(t)!=null}function Um(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zp;function m9(t){oe(!Zp,"__referenceConstructor has already been defined"),Zp=t}function g9(){return oe(Zp,"Reference.ts has not been loaded"),Zp}let y9=1;class SI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=G3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Mb(t,e,n,r,i){return O3(t.pendingWriteTree_,e,n,r,i),i?ud(t,new Sa(_b(),e,n)):[]}function ua(t,e,n=!1){const r=L3(t.pendingWriteTree_,e);if(V3(t.pendingWriteTree_,e)){let s=new dt(null);return r.snap!=null?s=s.set(Ke(),!0):qn(r.children,a=>{s=s.set(new st(a),!0)}),ud(t,new Kp(r.path,s,n))}else return[]}function ld(t,e,n){return ud(t,new Sa(_w(),e,n))}function v9(t,e,n){const r=dt.fromObject(n);return ud(t,new bh(_w(),e,r))}function _9(t,e){return ud(t,new kh(_w(),e))}function w9(t,e,n){const r=Pw(t,n);if(r){const i=Aw(r),s=i.path,a=i.queryId,u=Mn(s,e),c=new kh(ww(a),u);return xw(t,s,c)}else return[]}function Ob(t,e,n,r,i=!1){const s=e._path,a=t.syncPointTree_.get(s);let u=[];if(a&&(e._queryIdentifier==="default"||Nb(a,e))){const c=p9(a,e,n,r);d9(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const d=c.removed;if(u=c.events,!i){const m=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(s,(y,T)=>ho(T));if(m&&!g){const y=t.syncPointTree_.subtree(s);if(!y.isEmpty()){const T=C9(y);for(let S=0;S<T.length;++S){const I=T[S],x=I.query,k=$b(t,I);t.listenProvider_.startListening(ah(x),Dh(t,x),k.hashFn,k.onComplete)}}}!g&&d.length>0&&!r&&(m?t.listenProvider_.stopListening(ah(e),null):d.forEach(y=>{const T=t.queryToTagMap.get(jm(y));t.listenProvider_.stopListening(ah(y),T)}))}I9(t,d)}return u}function Lb(t,e,n,r){const i=Pw(t,r);if(i!=null){const s=Aw(i),a=s.path,u=s.queryId,c=Mn(a,e),d=new Sa(ww(u),c,n);return xw(t,a,d)}else return[]}function T9(t,e,n,r){const i=Pw(t,r);if(i){const s=Aw(i),a=s.path,u=s.queryId,c=Mn(a,e),d=dt.fromObject(n),m=new bh(ww(u),c,d);return xw(t,a,m)}else return[]}function E9(t,e,n,r=!1){const i=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(i,(y,T)=>{const S=Mn(y,i);s=s||to(T,S),a=a||ho(T)});let u=t.syncPointTree_.get(i);u?(a=a||ho(u),s=s||to(u,Ke())):(u=new Rb,t.syncPointTree_=t.syncPointTree_.set(i,u));let c;s!=null?c=!0:(c=!1,s=Ce.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((T,S)=>{const I=to(S,Ke());I&&(s=s.updateImmediateChild(T,I))}));const d=Nb(u,e);if(!d&&!e._queryParams.loadsAllData()){const y=jm(e);oe(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const T=P9();t.queryToTagMap.set(y,T),t.tagToQueryMap.set(T,y)}const m=Bm(t.pendingWriteTree_,i);let g=f9(u,e,n,m,s,c);if(!d&&!a&&!r){const y=Db(u,e);g=g.concat(A9(t,e,y))}return g}function Iw(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,u)=>{const c=Mn(a,e),d=to(u,c);if(d)return d});return Sb(i,e,s,n,!0)}function S9(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,m)=>{const g=Mn(d,n);r=r||to(m,g)});let i=t.syncPointTree_.get(n);i?r=r||to(i,Ke()):(i=new Rb,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,a=s?new co(r,!0,!1):null,u=Bm(t.pendingWriteTree_,e._path),c=kb(i,e,u,s?a.getNode():Ce.EMPTY_NODE,s);return o9(c)}function ud(t,e){return Vb(e,t.syncPointTree_,null,Bm(t.pendingWriteTree_,Ke()))}function Vb(t,e,n,r){if(Le(t.path))return Fb(t,e,n,r);{const i=e.get(Ke());n==null&&i!=null&&(n=to(i,Ke()));let s=[];const a=Ve(t.path),u=t.operationForChild(a),c=e.children.get(a);if(c&&u){const d=n?n.getImmediateChild(a):null,m=Cb(r,a);s=s.concat(Vb(u,c,d,m))}return i&&(s=s.concat(Cw(i,t,r,n))),s}}function Fb(t,e,n,r){const i=e.get(Ke());n==null&&i!=null&&(n=to(i,Ke()));let s=[];return e.children.inorderTraversal((a,u)=>{const c=n?n.getImmediateChild(a):null,d=Cb(r,a),m=t.operationForChild(a);m&&(s=s.concat(Fb(m,u,c,d)))}),i&&(s=s.concat(Cw(i,t,r,n))),s}function $b(t,e){const n=e.query,r=Dh(t,n);return{hashFn:()=>(s9(e)||Ce.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?w9(t,n._path,r):_9(t,n._path);{const s=Ej(i,n);return Ob(t,n,null,s)}}}}function Dh(t,e){const n=jm(e);return t.queryToTagMap.get(n)}function jm(t){return t._path.toString()+"$"+t._queryIdentifier}function Pw(t,e){return t.tagToQueryMap.get(e)}function Aw(t){const e=t.indexOf("$");return oe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function xw(t,e,n){const r=t.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const i=Bm(t.pendingWriteTree_,e);return Cw(r,n,i,null)}function C9(t){return t.fold((e,n,r)=>{if(n&&ho(n))return[Um(n)];{let i=[];return n&&(i=bb(n)),qn(r,(s,a)=>{i=i.concat(a)}),i}})}function ah(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(g9())(t._repo,t._path):t}function I9(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=jm(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function P9(){return y9++}function A9(t,e,n){const r=e._path,i=Dh(t,e),s=$b(t,n),a=t.listenProvider_.startListening(ah(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)oe(!ho(u.value),"If we're adding a query, it shouldn't be shadowed");else{const c=u.fold((d,m,g)=>{if(!Le(d)&&m&&ho(m))return[Um(m).query];{let y=[];return m&&(y=y.concat(bb(m).map(T=>T.query))),qn(g,(T,S)=>{y=y.concat(S)}),y}});for(let d=0;d<c.length;++d){const m=c[d];t.listenProvider_.stopListening(ah(m),Dh(t,m))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Rw(n)}node(){return this.node_}}class kw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Kt(this.path_,e);return new kw(this.syncTree_,n)}node(){return Iw(this.syncTree_,this.path_)}}const x9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},CI=function(t,e,n){if(!t||typeof t!="object")return t;if(oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return R9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return k9(t[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},R9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:oe(!1,"Unexpected server value: "+t)}},k9=function(t,e,n){t.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const i=e.node();if(oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},b9=function(t,e,n,r){return bw(e,new kw(n,t),r)},Bb=function(t,e,n){return bw(t,new Rw(e),n)};function bw(t,e,n){const r=t.getPriority().val(),i=CI(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,u=CI(a.getValue(),e,n);return u!==a.getValue()||i!==a.getPriority().val()?new en(u,rn(i)):t}else{const a=t;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new en(i))),a.forEachChild(Rt,(u,c)=>{const d=bw(c,e.getImmediateChild(u),n);d!==c&&(s=s.updateImmediateChild(u,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Nw(t,e){let n=e instanceof st?e:new st(e),r=t,i=Ve(n);for(;i!==null;){const s=tu(r.node.children,i)||{children:{},childCount:0};r=new Dw(i,r,s),n=ut(n),i=Ve(n)}return r}function bu(t){return t.node.value}function Ub(t,e){t.node.value=e,D0(t)}function jb(t){return t.node.childCount>0}function D9(t){return bu(t)===void 0&&!jb(t)}function zm(t,e){qn(t.node.children,(n,r)=>{e(new Dw(n,t,r))})}function zb(t,e,n,r){n&&!r&&e(t),zm(t,i=>{zb(i,e,!0,r)}),n&&r&&e(t)}function N9(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function cd(t){return new st(t.parent===null?t.name:cd(t.parent)+"/"+t.name)}function D0(t){t.parent!==null&&M9(t.parent,t.name,t)}function M9(t,e,n){const r=D9(n),i=gs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,D0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,D0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/[\[\].#$\/\u0000-\u001F\u007F]/,L9=/[\[\].#$\u0000-\u001F\u007F]/,pv=10*1024*1024,Wb=function(t){return typeof t=="string"&&t.length!==0&&!O9.test(t)},Hb=function(t){return typeof t=="string"&&t.length!==0&&!L9.test(t)},V9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Hb(t)},F9=function(t,e,n,r){Mw(b_(t,"value"),e,n)},Mw=function(t,e,n){const r=n instanceof st?new t3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ta(r));if(typeof e=="function")throw new Error(t+"contains a function "+ta(r)+" with contents = "+e.toString());if(Bk(e))throw new Error(t+"contains "+e.toString()+" "+ta(r));if(typeof e=="string"&&e.length>pv/3&&Em(e)>pv)throw new Error(t+"contains a string greater than "+pv+" utf8 bytes "+ta(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(qn(e,(a,u)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Wb(a)))throw new Error(t+" contains an invalid key ("+a+") "+ta(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);n3(r,a),Mw(t,u,r),r3(r)}),i&&s)throw new Error(t+' contains ".value" child '+ta(r)+" in addition to actual children.")}},Gb=function(t,e,n,r){if(!Hb(n))throw new Error(b_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gb(t,e,n)},Kb=function(t,e){if(Ve(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},B9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wb(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!V9(n))throw new Error(b_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qb(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!cb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wi(t,e,n){qb(t,n),j9(t,r=>Wr(r,e)||Wr(e,r))}function j9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(z9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function z9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();rh&&Sn("event: "+n.toString()),ku(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="repo_interrupt",H9=25;class G9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new U9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gp(),this.transactionQueueTree_=new Dw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function K9(t,e,n){if(t.stats_=fw(t.repoInfo_),t.forceRestClient_||Pj())t.server_=new Hp(t.repoInfo_,(r,i,s,a)=>{II(t,r,i,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>PI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ht(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ji(t.repoInfo_,e,(r,i,s,a)=>{II(t,r,i,s,a)},r=>{PI(t,r)},r=>{Q9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=bj(t.repoInfo_,()=>new R3(t.stats_,t.server_)),t.infoData_=new C3,t.infoSyncTree_=new SI({startListening:(r,i,s,a)=>{let u=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(u=ld(t.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),Lw(t,"connected",!1),t.serverSyncTree_=new SI({startListening:(r,i,s,a)=>(t.server_.listen(r,s,i,(u,c)=>{const d=a(u,c);wi(t.eventQueue_,r._path,d)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function q9(t){const n=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ow(t){return x9({timestamp:q9(t)})}function II(t,e,n,r,i){t.dataUpdateCount++;const s=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(i)if(r){const c=Ap(n,d=>rn(d));a=T9(t.serverSyncTree_,s,c,i)}else{const c=rn(n);a=Lb(t.serverSyncTree_,s,c,i)}else if(r){const c=Ap(n,d=>rn(d));a=v9(t.serverSyncTree_,s,c)}else{const c=rn(n);a=ld(t.serverSyncTree_,s,c)}let u=s;a.length>0&&(u=Hm(t,s)),wi(t.eventQueue_,u,a)}function PI(t,e){Lw(t,"connected",e),e===!1&&J9(t)}function Q9(t,e){qn(e,(n,r)=>{Lw(t,n,r)})}function Lw(t,e,n){const r=new st("/.info/"+e),i=rn(n);t.infoData_.updateSnapshot(r,i);const s=ld(t.infoSyncTree_,r,i);wi(t.eventQueue_,r,s)}function Qb(t){return t.nextWriteId_++}function Y9(t,e,n){const r=S9(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=rn(i).withIndex(e._queryParams.getIndex());E9(t.serverSyncTree_,e,n,!0);let a;if(e._queryParams.loadsAllData())a=ld(t.serverSyncTree_,e._path,s);else{const u=Dh(t.serverSyncTree_,e);a=Lb(t.serverSyncTree_,e._path,s,u)}return wi(t.eventQueue_,e._path,a),Ob(t.serverSyncTree_,e,n,null,!0),s},i=>(Wm(t,"get for query "+Ht(e)+" failed: "+i),Promise.reject(new Error(i))))}function X9(t,e,n,r,i){Wm(t,"set",{path:e.toString(),value:n,priority:r});const s=Ow(t),a=rn(n,r),u=Iw(t.serverSyncTree_,e),c=Bb(a,u,s),d=Qb(t),m=Mb(t.serverSyncTree_,e,c,d,!0);qb(t.eventQueue_,m),t.server_.put(e.toString(),a.val(!0),(y,T)=>{const S=y==="ok";S||Kn("set at "+e+" failed: "+y);const I=ua(t.serverSyncTree_,d,!S);wi(t.eventQueue_,e,I),e6(t,i,y,T)});const g=eD(t,e);Hm(t,g),wi(t.eventQueue_,g,[])}function J9(t){Wm(t,"onDisconnectEvents");const e=Ow(t),n=Gp();A0(t.onDisconnect_,Ke(),(i,s)=>{const a=b9(i,s,t.serverSyncTree_,e);vb(n,i,a)});let r=[];A0(n,Ke(),(i,s)=>{r=r.concat(ld(t.serverSyncTree_,i,s));const a=eD(t,i);Hm(t,a)}),t.onDisconnect_=Gp(),wi(t.eventQueue_,Ke(),r)}function Z9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(W9)}function Wm(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Sn(n,...e)}function e6(t,e,n,r){e&&ku(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function Yb(t,e,n){return Iw(t.serverSyncTree_,e,n)||Ce.EMPTY_NODE}function Vw(t,e=t.transactionQueueTree_){if(e||Gm(t,e),bu(e)){const n=Jb(t,e);oe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&t6(t,cd(e),n)}else jb(e)&&zm(e,n=>{Vw(t,n)})}function t6(t,e,n){const r=n.map(d=>d.currentWriteId),i=Yb(t,e,r);let s=i;const a=i.hash();for(let d=0;d<n.length;d++){const m=n[d];oe(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const g=Mn(e,m.path);s=s.updateChild(g,m.currentOutputSnapshotRaw)}const u=s.val(!0),c=e;t.server_.put(c.toString(),u,d=>{Wm(t,"transaction put response",{path:c.toString(),status:d});let m=[];if(d==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,m=m.concat(ua(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Gm(t,Nw(t.transactionQueueTree_,e)),Vw(t,t.transactionQueueTree_),wi(t.eventQueue_,e,m);for(let y=0;y<g.length;y++)ku(g[y])}else{if(d==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{Kn("transaction at "+c.toString()+" failed: "+d);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=d}Hm(t,e)}},a)}function Hm(t,e){const n=Xb(t,e),r=cd(n),i=Jb(t,n);return n6(t,i,r),r}function n6(t,e,n){if(e.length===0)return;const r=[];let i=[];const a=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const c=e[u],d=Mn(n,c.path);let m=!1,g;if(oe(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)m=!0,g=c.abortReason,i=i.concat(ua(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=H9)m=!0,g="maxretry",i=i.concat(ua(t.serverSyncTree_,c.currentWriteId,!0));else{const y=Yb(t,c.path,a);c.currentInputSnapshot=y;const T=e[u].update(y.val());if(T!==void 0){Mw("transaction failed: Data returned ",T,c.path);let S=rn(T);typeof T=="object"&&T!=null&&gs(T,".priority")||(S=S.updatePriority(y.getPriority()));const x=c.currentWriteId,k=Ow(t),F=Bb(S,y,k);c.currentOutputSnapshotRaw=S,c.currentOutputSnapshotResolved=F,c.currentWriteId=Qb(t),a.splice(a.indexOf(x),1),i=i.concat(Mb(t.serverSyncTree_,c.path,F,c.currentWriteId,c.applyLocally)),i=i.concat(ua(t.serverSyncTree_,x,!0))}else m=!0,g="nodata",i=i.concat(ua(t.serverSyncTree_,c.currentWriteId,!0))}wi(t.eventQueue_,n,i),i=[],m&&(e[u].status=2,function(y){setTimeout(y,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(g),!1,null))))}Gm(t,t.transactionQueueTree_);for(let u=0;u<r.length;u++)ku(r[u]);Vw(t,t.transactionQueueTree_)}function Xb(t,e){let n,r=t.transactionQueueTree_;for(n=Ve(e);n!==null&&bu(r)===void 0;)r=Nw(r,n),e=ut(e),n=Ve(e);return r}function Jb(t,e){const n=[];return Zb(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Zb(t,e,n){const r=bu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zm(e,i=>{Zb(t,i,n)})}function Gm(t,e){const n=bu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ub(e,n.length>0?n:void 0)}zm(e,r=>{Gm(t,r)})}function eD(t,e){const n=cd(Xb(t,e)),r=Nw(t.transactionQueueTree_,e);return N9(r,i=>{mv(t,i)}),mv(t,r),zb(r,i=>{mv(t,i)}),n}function mv(t,e){const n=bu(e);if(n){const r=[];let i=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(oe(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(oe(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(ua(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ub(e,void 0):n.length=s+1,wi(t.eventQueue_,cd(e),i);for(let a=0;a<r.length;a++)ku(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function i6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Kn(`Invalid query segment '${n}' in query '${t}'`)}return e}const AI=function(t,e){const n=s6(t),r=n.namespace;n.domain==="firebase.com"&&cs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&cs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yj();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jk(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new st(n.pathString)}},s6=function(t){let e="",n="",r="",i="",s="",a=!0,u="https",c=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(u=t.substring(0,d-1),t=t.substring(d+2));let m=t.indexOf("/");m===-1&&(m=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(m,g)),m<g&&(i=r6(t.substring(m,g)));const y=i6(t.substring(Math.min(t.length,g)));d=e.indexOf(":"),d>=0?(a=u==="https"||u==="wss",c=parseInt(e.substring(d+1),10)):d=e.length;const T=e.slice(0,d);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const S=e.indexOf(".");r=e.substring(0,S).toLowerCase(),n=e.substring(S+1),s=r}"ns"in y&&(s=y.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ht(this.snapshot.exportVal())}}class a6{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Le(this._path)?null:ab(this._path)}get ref(){return new ys(this._repo,this._path)}get _queryIdentifier(){const e=dI(this._queryParams),n=hw(e);return n==="{}"?"default":n}get _queryObject(){return dI(this._queryParams)}isEqual(e){if(e=Yn(e),!(e instanceof Fw))return!1;const n=this._repo===e._repo,r=cb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+e3(this._path)}}class ys extends Fw{constructor(e,n){super(e,n,new vw,!1)}get parent(){const e=ub(this._path);return e===null?null:new ys(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Nh{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new st(e),r=N0(this.ref,e);return new Nh(this._node.getChild(n),r,Rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Nh(i,N0(this.ref,r),Rt)))}hasChild(e){const n=new st(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function u6(t,e){return t=Yn(t),t._checkNotDeleted("ref"),e!==void 0?N0(t._root,e):t._root}function N0(t,e){return t=Yn(t),Ve(t._path)===null?$9("child","path",e):Gb("child","path",e),new ys(t._repo,Kt(t._path,e))}function c6(t){return Kb("remove",t._path),tD(t,null)}function tD(t,e){t=Yn(t),Kb("set",t._path),F9("set",e,t._path);const n=new Tm;return X9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function h6(t){t=Yn(t);const e=new l6(()=>{}),n=new $w(e);return Y9(t._repo,t,n).then(r=>new Nh(r,new ys(t._repo,t._path),t._queryParams.getIndex()))}class $w{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new o6("value",this,new Nh(e.snapshotNode,new ys(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new a6(this,e,n):null}matches(e){return e instanceof $w?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}c9(ys);m9(ys);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="FIREBASE_DATABASE_EMULATOR_HOST",M0={};let f6=!1;function p6(t,e,n,r){t.repoInfo_=new Jk(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function m6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||cs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=AI(s,i),u=a.repoInfo,c;typeof process<"u"&&qC&&(c=qC[d6]),c?(s=`http://${c}?ns=${u.namespace}`,a=AI(s,i),u=a.repoInfo):a.repoInfo.secure;const d=new xj(t.name,t.options,e);B9("Invalid Firebase Database URL",a),Le(a.path)||cs("Database URL must point to the root of a Firebase Database (not including a child path).");const m=y6(u,t,d,new Aj(t.name,n));return new v6(m,t)}function g6(t,e){const n=M0[e];(!n||n[t.key]!==t)&&cs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Z9(t),delete n[t.key]}function y6(t,e,n,r){let i=M0[e.name];i||(i={},M0[e.name]=i);let s=i[t.toURLString()];return s&&cs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new G9(t,f6,n,r),i[t.toURLString()]=s,s}class v6{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(K9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ys(this._repo,Ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(g6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&cs("Cannot call "+e+" on a deleted database.")}}function _6(t=Jx(),e){const n=N_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=R2("database");r&&w6(n,...r)}return n}function w6(t,e,n,r={}){t=Yn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&cs("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&cs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new fp(fp.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:k2(r.mockUserToken,t.app.options.projectId);s=new fp(a)}p6(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t){hj(Aa),va(new ro("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return m6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ci(QC,YC,t),ci(QC,YC,"esm2017")}Ji.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ji.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};T6();const E6={apiKey:"AIzaSyDPmE5CLXnEAjhw9wqER58iEuQ0zG3O95E",authDomain:"mediplanner-98f05.firebaseapp.com",databaseURL:"https://mediplanner-98f05-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"mediplanner-98f05",storageBucket:"mediplanner-98f05.firebasestorage.app",messagingSenderId:"745207549127",appId:"1:745207549127:web:6a593005b9ee3c0caec2e2",measurementId:"G-8TYENKFQLB"},nD=Xx(E6),cu=h5(nD),rD=_6(nD);function S6(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Km(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const O0=t=>Array.isArray(t);function iD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Mh(t){return typeof t=="string"||Array.isArray(t)}function xI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Bw(t,e,n,r){if(typeof e=="function"){const[i,s]=xI(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=xI(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function qm(t,e,n){const r=t.getProps();return Bw(r,e,n!==void 0?n:r.custom,t)}const Uw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jw=["initial",...Uw],hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ka=new Set(hd),Zi=t=>t*1e3,es=t=>t/1e3,C6={type:"spring",stiffness:500,damping:25,restSpeed:10},I6=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),P6={type:"keyframes",duration:.8},A6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},x6=(t,{keyframes:e})=>e.length>2?P6:ka.has(t)?t.startsWith("scale")?I6(e[1]):C6:A6;function zw(t,e){return t?t[e]||t.default||t:void 0}const R6={skipAnimations:!1,useManualTiming:!1},k6=t=>t!==null;function Qm(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(k6),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Pn=t=>t;function b6(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(d){s.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,m=!1,g=!1)=>{const T=g&&r?e:n;return m&&s.add(d),T.has(d)||T.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(a=d,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(u),r=!1,i&&(i=!1,c.process(d))}};return c}const Gf=["read","resolveKeyframes","update","preRender","render","postRender"],D6=40;function sD(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Gf.reduce((k,F)=>(k[F]=b6(s),k),{}),{read:u,resolveKeyframes:c,update:d,preRender:m,render:g,postRender:y}=a,T=()=>{const k=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,D6),1),i.timestamp=k,i.isProcessing=!0,u.process(i),c.process(i),d.process(i),m.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(T))},S=()=>{n=!0,r=!0,i.isProcessing||t(T)};return{schedule:Gf.reduce((k,F)=>{const V=a[F];return k[F]=(z,j=!1,Y=!1)=>(n||S(),V.schedule(z,j,Y)),k},{}),cancel:k=>{for(let F=0;F<Gf.length;F++)a[Gf[F]].cancel(k)},state:i,steps:a}}const{schedule:et,cancel:fo,state:cn,steps:gv}=sD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pn,!0),oD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,N6=1e-7,M6=12;function O6(t,e,n,r,i){let s,a,u=0;do a=e+(n-e)/2,s=oD(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>N6&&++u<M6);return a}function dd(t,e,n,r){if(t===e&&n===r)return Pn;const i=s=>O6(s,0,1,t,n);return s=>s===0||s===1?s:oD(i(s),e,r)}const aD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lD=t=>e=>1-t(1-e),uD=dd(.33,1.53,.69,.99),Ww=lD(uD),cD=aD(Ww),hD=t=>(t*=2)<1?.5*Ww(t):.5*(2-Math.pow(2,-10*(t-1))),Hw=t=>1-Math.sin(Math.acos(t)),dD=lD(Hw),fD=aD(Hw),pD=t=>/^0[^.\s]+$/u.test(t);function L6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pD(t):!0}let L0=Pn;const mD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),gD=t=>e=>typeof e=="string"&&e.startsWith(t),yD=gD("--"),V6=gD("var(--"),Gw=t=>V6(t)?F6.test(t.split("/*")[0].trim()):!1,F6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function B6(t){const e=$6.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function vD(t,e,n=1){const[r,i]=B6(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return mD(a)?parseFloat(a):a}return Gw(i)?vD(i,e,n+1):i}const hs=(t,e,n)=>n>e?e:n<t?t:n,Du={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Oh={...Du,transform:t=>hs(0,1,t)},Kf={...Du,default:1},fd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ws=fd("deg"),fi=fd("%"),Te=fd("px"),U6=fd("vh"),j6=fd("vw"),RI={...fi,parse:t=>fi.parse(t)/100,transform:t=>fi.transform(t*100)},z6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),kI=t=>t===Du||t===Te,bI=(t,e)=>parseFloat(t.split(", ")[e]),DI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return bI(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?bI(s[1],t):0}},W6=new Set(["x","y","z"]),H6=hd.filter(t=>!W6.has(t));function G6(t){const e=[];return H6.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const hu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:DI(4,13),y:DI(5,14)};hu.translateX=hu.x;hu.translateY=hu.y;const _D=t=>e=>e.test(t),K6={test:t=>t==="auto",parse:t=>t},wD=[Du,Te,fi,Ws,j6,U6,K6],NI=t=>wD.find(_D(t)),ma=new Set;let V0=!1,F0=!1;function TD(){if(F0){const t=Array.from(ma).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=G6(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var u;(u=r.getValue(s))===null||u===void 0||u.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}F0=!1,V0=!1,ma.forEach(t=>t.complete()),ma.clear()}function ED(){ma.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(F0=!0)})}function q6(){ED(),TD()}let Kw=class{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ma.add(this),V0||(V0=!0,et.read(ED),et.resolveKeyframes(TD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ma.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ma.delete(this))}resume(){this.isComplete||this.scheduleResolve()}};const lh=t=>Math.round(t*1e5)/1e5,qw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Q6(t){return t==null}const Y6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qw=(t,e)=>n=>!!(typeof n=="string"&&Y6.test(n)&&n.startsWith(t)||e&&!Q6(n)&&Object.prototype.hasOwnProperty.call(n,e)),SD=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,u]=r.match(qw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},X6=t=>hs(0,255,t),yv={...Du,transform:t=>Math.round(X6(t))},ca={test:Qw("rgb","red"),parse:SD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+yv.transform(t)+", "+yv.transform(e)+", "+yv.transform(n)+", "+lh(Oh.transform(r))+")"};function J6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $0={test:Qw("#"),parse:J6,transform:ca.transform},Ol={test:Qw("hsl","hue"),parse:SD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+fi.transform(lh(e))+", "+fi.transform(lh(n))+", "+lh(Oh.transform(r))+")"},wn={test:t=>ca.test(t)||$0.test(t)||Ol.test(t),parse:t=>ca.test(t)?ca.parse(t):Ol.test(t)?Ol.parse(t):$0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ca.transform(t):Ol.transform(t)},Z6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ez(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Z6))===null||n===void 0?void 0:n.length)||0)>0}const CD="number",ID="color",tz="var",nz="var(",MI="${}",rz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(rz,c=>(wn.test(c)?(r.color.push(s),i.push(ID),n.push(wn.parse(c))):c.startsWith(nz)?(r.var.push(s),i.push(tz),n.push(c)):(r.number.push(s),i.push(CD),n.push(parseFloat(c))),++s,MI)).split(MI);return{values:n,split:u,indexes:r,types:i}}function PD(t){return Lh(t).values}function AD(t){const{split:e,types:n}=Lh(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const u=n[a];u===CD?s+=lh(i[a]):u===ID?s+=wn.transform(i[a]):s+=i[a]}return s}}const iz=t=>typeof t=="number"?0:t;function sz(t){const e=PD(t);return AD(t)(e.map(iz))}const po={test:ez,parse:PD,createTransformer:AD,getAnimatableNone:sz},oz=new Set(["brightness","contrast","saturate","opacity"]);function az(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qw)||[];if(!r)return t;const i=n.replace(r,"");let s=oz.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lz=/\b([a-z-]*)\(.*?\)/gu,B0={...po,getAnimatableNone:t=>{const e=t.match(lz);return e?e.map(az).join(" "):t}},uz={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,backgroundPositionX:Te,backgroundPositionY:Te},cz={rotate:Ws,rotateX:Ws,rotateY:Ws,rotateZ:Ws,scale:Kf,scaleX:Kf,scaleY:Kf,scaleZ:Kf,skew:Ws,skewX:Ws,skewY:Ws,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Oh,originX:RI,originY:RI,originZ:Te},OI={...Du,transform:Math.round},Yw={...uz,...cz,zIndex:OI,size:Te,fillOpacity:Oh,strokeOpacity:Oh,numOctaves:OI},hz={...Yw,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:B0,WebkitFilter:B0},Xw=t=>hz[t];function xD(t,e){let n=Xw(t);return n!==B0&&(n=po),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dz=new Set(["auto","none","0"]);function fz(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!dz.has(s)&&Lh(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=xD(n,i)}let RD=class extends Kw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Gw(d))){const m=vD(d,n.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!z6.has(r)||e.length!==2)return;const[i,s]=e,a=NI(i),u=NI(s);if(a!==u)if(kI(a)&&kI(u))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)L6(e[i])&&r.push(i);r.length&&fz(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,u=i[a];i[a]=hu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}};function Jw(t){return typeof t=="function"}let pp;function pz(){pp=void 0}const pi={now:()=>(pp===void 0&&pi.set(cn.isProcessing||R6.useManualTiming?cn.timestamp:performance.now()),pp),set:t=>{pp=t,queueMicrotask(pz)}},LI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(po.test(t)||t==="0")&&!t.startsWith("url("));function mz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function gz(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=LI(i,e),u=LI(s,e);return!a||!u?!1:mz(t)||(n==="spring"||Jw(n))&&r}const yz=40;let kD=class{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=pi.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&q6(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=pi.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:u,onUpdate:c,isGenerator:d}=this.options;if(!d&&!gz(e,r,i,s))if(a)this.options.duration=0;else{c==null||c(Qm(e,this.options,n)),u==null||u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}};const du=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},bD=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(du(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function DD(t,e){return e?t*(1e3/e):0}const vz=5;function ND(t,e,n){const r=Math.max(e-vz,0);return DD(n-t(r),e-r)}const Pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vv=.001;function _z({duration:t=Pt.duration,bounce:e=Pt.bounce,velocity:n=Pt.velocity,mass:r=Pt.mass}){let i,s,a=1-e;a=hs(Pt.minDamping,Pt.maxDamping,a),t=hs(Pt.minDuration,Pt.maxDuration,es(t)),a<1?(i=d=>{const m=d*a,g=m*t,y=m-n,T=U0(d,a),S=Math.exp(-g);return vv-y/T*S},s=d=>{const g=d*a*t,y=g*n+n,T=Math.pow(a,2)*Math.pow(d,2)*t,S=Math.exp(-g),I=U0(Math.pow(d,2),a);return(-i(d)+vv>0?-1:1)*((y-T)*S)/I}):(i=d=>{const m=Math.exp(-d*t),g=(d-n)*t+1;return-vv+m*g},s=d=>{const m=Math.exp(-d*t),g=(n-d)*(t*t);return m*g});const u=5/t,c=Tz(i,s,u);if(t=Zi(t),isNaN(c))return{stiffness:Pt.stiffness,damping:Pt.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const wz=12;function Tz(t,e,n){let r=n;for(let i=1;i<wz;i++)r=r-t(r)/e(r);return r}function U0(t,e){return t*Math.sqrt(1-e*e)}const j0=2e4;function MD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<j0;)e+=n,r=t.next(e);return e>=j0?1/0:e}const Ez=["duration","bounce"],Sz=["stiffness","damping","mass"];function VI(t,e){return e.some(n=>t[n]!==void 0)}function Cz(t){let e={velocity:Pt.velocity,stiffness:Pt.stiffness,damping:Pt.damping,mass:Pt.mass,isResolvedFromDuration:!1,...t};if(!VI(t,Sz)&&VI(t,Ez))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*hs(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:Pt.mass,stiffness:i,damping:s}}else{const n=_z(t);e={...e,...n,mass:Pt.mass},e.isResolvedFromDuration=!0}return e}function OD(t=Pt.visualDuration,e=Pt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:s},{stiffness:c,damping:d,mass:m,duration:g,velocity:y,isResolvedFromDuration:T}=Cz({...n,velocity:-es(n.velocity||0)}),S=y||0,I=d/(2*Math.sqrt(c*m)),x=a-s,k=es(Math.sqrt(c/m)),F=Math.abs(x)<5;r||(r=F?Pt.restSpeed.granular:Pt.restSpeed.default),i||(i=F?Pt.restDelta.granular:Pt.restDelta.default);let V;if(I<1){const j=U0(k,I);V=Y=>{const D=Math.exp(-I*k*Y);return a-D*((S+I*k*x)/j*Math.sin(j*Y)+x*Math.cos(j*Y))}}else if(I===1)V=j=>a-Math.exp(-k*j)*(x+(S+k*x)*j);else{const j=k*Math.sqrt(I*I-1);V=Y=>{const D=Math.exp(-I*k*Y),A=Math.min(j*Y,300);return a-D*((S+I*k*x)*Math.sinh(A)+j*x*Math.cosh(A))/j}}const z={calculatedDuration:T&&g||null,next:j=>{const Y=V(j);if(T)u.done=j>=g;else{let D=0;I<1&&(D=j===0?Zi(S):ND(V,j,Y));const A=Math.abs(D)<=r,b=Math.abs(a-Y)<=i;u.done=A&&b}return u.value=u.done?a:Y,u},toString:()=>{const j=Math.min(MD(z),j0),Y=bD(D=>z.next(j*D).value,j,30);return j+"ms "+Y}};return z}function FI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:c,restDelta:d=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},T=A=>u!==void 0&&A<u||c!==void 0&&A>c,S=A=>u===void 0?c:c===void 0||Math.abs(u-A)<Math.abs(c-A)?u:c;let I=n*e;const x=g+I,k=a===void 0?x:a(x);k!==x&&(I=k-g);const F=A=>-I*Math.exp(-A/r),V=A=>k+F(A),z=A=>{const b=F(A),E=V(A);y.done=Math.abs(b)<=d,y.value=y.done?k:E};let j,Y;const D=A=>{T(y.value)&&(j=A,Y=OD({keyframes:[y.value,S(y.value)],velocity:ND(V,A,y.value),damping:i,stiffness:s,restDelta:d,restSpeed:m}))};return D(0),{calculatedDuration:null,next:A=>{let b=!1;return!Y&&j===void 0&&(b=!0,z(A),D(A)),j!==void 0&&A>=j?Y.next(A-j):(!b&&z(A),y)}}}const Iz=dd(.42,0,1,1),Pz=dd(0,0,.58,1),LD=dd(.42,0,.58,1),Az=t=>Array.isArray(t)&&typeof t[0]!="number",Zw=t=>Array.isArray(t)&&typeof t[0]=="number",$I={linear:Pn,easeIn:Iz,easeInOut:LD,easeOut:Pz,circIn:Hw,circInOut:fD,circOut:dD,backIn:Ww,backInOut:cD,backOut:uD,anticipate:hD},BI=t=>{if(Zw(t)){L0(t.length===4);const[e,n,r,i]=t;return dd(e,n,r,i)}else if(typeof t=="string")return L0($I[t]!==void 0),$I[t];return t},xz=(t,e)=>n=>e(t(n)),ts=(...t)=>t.reduce(xz),_t=(t,e,n)=>t+(e-t)*n;function _v(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Rz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;i=_v(c,u,t+1/3),s=_v(c,u,t),a=_v(c,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function em(t,e){return n=>n>0?e:t}const wv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},kz=[$0,ca,Ol],bz=t=>kz.find(e=>e.test(t));function UI(t){const e=bz(t);if(!e)return!1;let n=e.parse(t);return e===Ol&&(n=Rz(n)),n}const jI=(t,e)=>{const n=UI(t),r=UI(e);if(!n||!r)return em(t,e);const i={...n};return s=>(i.red=wv(n.red,r.red,s),i.green=wv(n.green,r.green,s),i.blue=wv(n.blue,r.blue,s),i.alpha=_t(n.alpha,r.alpha,s),ca.transform(i))},z0=new Set(["none","hidden"]);function Dz(t,e){return z0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Nz(t,e){return n=>_t(t,e,n)}function eT(t){return typeof t=="number"?Nz:typeof t=="string"?Gw(t)?em:wn.test(t)?jI:Lz:Array.isArray(t)?VD:typeof t=="object"?wn.test(t)?jI:Mz:em}function VD(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>eT(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Mz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=eT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Oz(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],u=t.indexes[a][i[a]],c=(n=t.values[u])!==null&&n!==void 0?n:0;r[s]=c,i[a]++}return r}const Lz=(t,e)=>{const n=po.createTransformer(e),r=Lh(t),i=Lh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?z0.has(t)&&!i.values.length||z0.has(e)&&!r.values.length?Dz(t,e):ts(VD(Oz(r,i),i.values),n):em(t,e)};function FD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?_t(t,e,n):eT(t)(t,e)}function Vz(t,e,n){const r=[],i=n||FD,s=t.length-1;for(let a=0;a<s;a++){let u=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Pn:e;u=ts(c,u)}r.push(u)}return r}function Fz(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(L0(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Vz(e,r,i),u=a.length,c=d=>{let m=0;if(u>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const g=du(t[m],t[m+1],d);return a[m](g)};return n?d=>c(hs(t[0],t[s-1],d)):c}function $z(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=du(0,e,r);t.push(_t(n,1,i))}}function Bz(t){const e=[0];return $z(e,t.length-1),e}function Uz(t,e){return t.map(n=>n*e)}function jz(t,e){return t.map(()=>e||LD).splice(0,t.length-1)}function tm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Az(r)?r.map(BI):BI(r),s={done:!1,value:e[0]},a=Uz(n&&n.length===e.length?n:Bz(e),t),u=Fz(a,e,{ease:Array.isArray(i)?i:jz(e,i)});return{calculatedDuration:t,next:c=>(s.value=u(c),s.done=c>=t,s)}}const zz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>et.update(e,!0),stop:()=>fo(e),now:()=>cn.isProcessing?cn.timestamp:pi.now()}},Wz={decay:FI,inertia:FI,tween:tm,keyframes:tm,spring:OD},Hz=t=>t/100;let tT=class extends kD{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||Kw,u=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new a(s,u,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,u=Jw(n)?n:Wz[n]||tm;let c,d;u!==tm&&typeof e[0]!="number"&&(c=ts(Hz,FD(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});s==="mirror"&&(d=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=MD(m));const{calculatedDuration:g}=m,y=g+i,T=y*(r+1)-i;return{generator:m,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:y,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:d,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return s.next(0);const{delay:y,repeat:T,repeatType:S,repeatDelay:I,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-y*(this.speed>=0?1:-1),F=this.speed>=0?k<0:k>m;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let V=this.currentTime,z=s;if(T){const A=Math.min(this.currentTime,m)/g;let b=Math.floor(A),E=A%1;!E&&A>=1&&(E=1),E===1&&b--,b=Math.min(b,T+1),!!(b%2)&&(S==="reverse"?(E=1-E,I&&(E-=I/g)):S==="mirror"&&(z=a)),V=hs(0,1,E)*g}const j=F?{done:!1,value:c[0]}:z.next(V);u&&(j.value=u(j.value));let{done:Y}=j;!F&&d!==null&&(Y=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return D&&i!==void 0&&(j.value=Qm(c,this.options,i)),x&&x(j.value),D&&this.finish(),j}get duration(){const{resolved:e}=this;return e?es(e.calculatedDuration):0}get time(){return es(this.currentTime)}set time(e){e=Zi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=es(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=zz,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}};const Gz=new Set(["opacity","clipPath","filter","transform"]);function nT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Kz={linearEasing:void 0};function qz(t,e){const n=nT(t);return()=>{var r;return(r=Kz[e])!==null&&r!==void 0?r:n()}}const nm=qz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function $D(t){return!!(typeof t=="function"&&nm()||!t||typeof t=="string"&&(t in W0||nm())||Zw(t)||Array.isArray(t)&&t.every($D))}const Gc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,W0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gc([0,.65,.55,1]),circOut:Gc([.55,0,1,.45]),backIn:Gc([.31,.01,.66,-.59]),backOut:Gc([.33,1.53,.69,.99])};function BD(t,e){if(t)return typeof t=="function"&&nm()?bD(t,e):Zw(t)?Gc(t):Array.isArray(t)?t.map(n=>BD(n,e)||W0.easeOut):W0[t]}function Qz(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:u="easeInOut",times:c}={}){const d={[e]:n};c&&(d.offset=c);const m=BD(u,i);return Array.isArray(m)&&(d.easing=m),t.animate(d,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function zI(t,e){t.timeline=e,t.onfinish=null}const Yz=nT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rm=10,Xz=2e4;function Jz(t){return Jw(t.type)||t.type==="spring"||!$D(t.ease)}function Zz(t,e){const n=new tT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Xz;)r=n.sample(s),i.push(r.value),s+=rm;return{times:void 0,keyframes:i,duration:s-rm,ease:"linear"}}const UD={anticipate:hD,backInOut:cD,circInOut:fD};function eW(t){return t in UD}let WI=class extends kD{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new RD(s,(a,u)=>this.onKeyframesResolved(a,u),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:a,type:u,motionValue:c,name:d,startTime:m}=this.options;if(!(!((r=c.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&nm()&&eW(a)&&(a=UD[a]),Jz(this.options)){const{onComplete:y,onUpdate:T,motionValue:S,element:I,...x}=this.options,k=Zz(e,x);e=k.keyframes,e.length===1&&(e[1]=e[0]),i=k.duration,s=k.times,a=k.ease,u="keyframes"}const g=Qz(c.owner.current,d,e,{...this.options,duration:i,times:s,ease:a});return g.startTime=m??this.calcStartTime(),this.pendingTimeline?(zI(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:y}=this.options;c.set(Qm(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:i,times:s,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return es(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return es(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Zi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Pn;const{animation:r}=n;zI(r,e)}return Pn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:m,onComplete:g,element:y,...T}=this.options,S=new tT({...T,keyframes:r,duration:i,type:s,ease:a,times:u,isGenerator:!0}),I=Zi(this.time);d.setWithVelocity(S.sample(I-rm).value,S.sample(I).value,rm)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:u}=e;return Yz()&&r&&Gz.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&u!=="inertia"}};const tW=nT(()=>window.ScrollTimeline!==void 0);let nW=class{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>tW()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}};function rW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:c,elapsed:d,...m}){return!!Object.keys(m).length}const rT=(t,e,n,r={},i,s)=>a=>{const u=zw(r,t)||{},c=u.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Zi(c);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-d,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:s?void 0:i};rW(u)||(m={...m,...x6(t,m)}),m.duration&&(m.duration=Zi(m.duration)),m.repeatDelay&&(m.repeatDelay=Zi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!s&&e.get()!==void 0){const y=Qm(m.keyframes,u);if(y!==void 0)return et.update(()=>{m.onUpdate(y),m.onComplete()}),new nW([])}return!s&&WI.supports(m)?new WI(m):new tT(m)},iW=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),sW=t=>O0(t)?t[t.length-1]||0:t;function iT(t,e){t.indexOf(e)===-1&&t.push(e)}function sT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let oT=class{constructor(){this.subscriptions=[]}add(e){return iT(this.subscriptions,e),()=>sT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};const HI=30,oW=t=>!isNaN(parseFloat(t));let aW=class{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=pi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=pi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new oT);const r=this.events[e].add(n);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=pi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HI);return DD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function Vh(t,e){return new aW(t,e)}function lW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vh(n))}function uW(t,e){const n=qm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const u=sW(s[a]);lW(t,a,u)}}const aT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cW="framerAppearId",jD="data-"+aT(cW);function zD(t){return t.props[jD]}const Cn=t=>!!(t&&t.getVelocity);function hW(t){return!!(Cn(t)&&t.add)}function H0(t,e){const n=t.getValue("willChange");if(hW(n))return n.add(e)}function dW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function WD(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...c}=e;r&&(a=r);const d=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in c){const y=t.getValue(g,(s=t.latestValues[g])!==null&&s!==void 0?s:null),T=c[g];if(T===void 0||m&&dW(m,g))continue;const S={delay:n,...zw(a||{},g)};let I=!1;if(window.MotionHandoffAnimation){const k=zD(t);if(k){const F=window.MotionHandoffAnimation(k,g,et);F!==null&&(S.startTime=F,I=!0)}}H0(t,g),y.start(rT(g,y,T,t.shouldReduceMotion&&ka.has(g)?{type:!1}:S,t,I));const x=y.animation;x&&d.push(x)}return u&&Promise.all(d).then(()=>{et.update(()=>{u&&uW(t,u)})}),d}function G0(t,e,n={}){var r;const i=qm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(WD(t,i,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:y}=s;return fW(t,e,m+d,g,y,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,m]=c==="beforeChildren"?[a,u]:[u,a];return d().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function fW(t,e,n=0,r=0,i=1,s){const a=[],u=(t.variantChildren.size-1)*r,c=i===1?(d=0)=>d*r:(d=0)=>u-d*r;return Array.from(t.variantChildren).sort(pW).forEach((d,m)=>{d.notify("AnimationStart",e),a.push(G0(d,e,{...s,delay:n+c(m)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function pW(t,e){return t.sortNodePosition(e)}function mW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>G0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=G0(t,e,n);else{const i=typeof e=="function"?qm(t,e,n.custom):e;r=Promise.all(WD(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const gW=jw.length;function HD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?HD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gW;n++){const r=jw[n],i=t.props[r];(Mh(i)||i===!1)&&(e[r]=i)}return e}const yW=[...Uw].reverse(),vW=Uw.length;function _W(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mW(t,n,r)))}function wW(t){let e=_W(t),n=GI(),r=!0;const i=c=>(d,m)=>{var g;const y=qm(t,m,c==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:T,transitionEnd:S,...I}=y;d={...d,...I,...S}}return d};function s(c){e=c(t)}function a(c){const{props:d}=t,m=HD(t.parent)||{},g=[],y=new Set;let T={},S=1/0;for(let x=0;x<vW;x++){const k=yW[x],F=n[k],V=d[k]!==void 0?d[k]:m[k],z=Mh(V),j=k===c?F.isActive:null;j===!1&&(S=x);let Y=V===m[k]&&V!==d[k]&&z;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),F.protectedKeys={...T},!F.isActive&&j===null||!V&&!F.prevProp||Km(V)||typeof V=="boolean")continue;const D=TW(F.prevProp,V);let A=D||k===c&&F.isActive&&!Y&&z||x>S&&z,b=!1;const E=Array.isArray(V)?V:[V];let M=E.reduce(i(k),{});j===!1&&(M={});const{prevResolvedValues:$={}}=F,N={...$,...M},Re=pe=>{A=!0,y.has(pe)&&(b=!0,y.delete(pe)),F.needsAnimating[pe]=!0;const ne=t.getValue(pe);ne&&(ne.liveStyle=!1)};for(const pe in N){const ne=M[pe],ge=$[pe];if(T.hasOwnProperty(pe))continue;let le=!1;O0(ne)&&O0(ge)?le=!iD(ne,ge):le=ne!==ge,le?ne!=null?Re(pe):y.add(pe):ne!==void 0&&y.has(pe)?Re(pe):F.protectedKeys[pe]=!0}F.prevProp=V,F.prevResolvedValues=M,F.isActive&&(T={...T,...M}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(Y&&D)||b)&&g.push(...E.map(pe=>({animation:pe,options:{type:k}})))}if(y.size){const x={};y.forEach(k=>{const F=t.getBaseTarget(k),V=t.getValue(k);V&&(V.liveStyle=!0),x[k]=F??null}),g.push({animation:x})}let I=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(g):Promise.resolve()}function u(c,d){var m;if(n[c].isActive===d)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(y=>{var T;return(T=y.animationState)===null||T===void 0?void 0:T.setActive(c,d)}),n[c].isActive=d;const g=a(c);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>n,reset:()=>{n=GI(),r=!0}}}function TW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iD(e,t):!1}function Jo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GI(){return{animate:Jo(!0),whileInView:Jo(),whileHover:Jo(),whileTap:Jo(),whileDrag:Jo(),whileFocus:Jo(),exit:Jo()}}let Eo=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},EW=class extends Eo{constructor(e){super(e),e.animationState||(e.animationState=wW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Km(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}},SW=0,CW=class extends Eo{constructor(){super(...arguments),this.id=SW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}};const IW={animation:{Feature:EW},exit:{Feature:CW}},GD=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Ym(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const PW=t=>e=>GD(e)&&t(e,Ym(e));function Ki(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ns(t,e,n,r){return Ki(t,e,PW(n),r)}const KI=(t,e)=>Math.abs(t-e);function AW(t,e){const n=KI(t.x,e.x),r=KI(t.y,e.y);return Math.sqrt(n**2+r**2)}let KD=class{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ev(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,T=AW(g.offset,{x:0,y:0})>=3;if(!y&&!T)return;const{point:S}=g,{timestamp:I}=cn;this.history.push({...S,timestamp:I});const{onStart:x,onMove:k}=this.handlers;y||(x&&x(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Tv(y,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:T,onSessionEnd:S,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ev(g.type==="pointercancel"?this.lastMoveEventInfo:Tv(y,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,x),S&&S(g,x)},!GD(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Ym(e),u=Tv(a,this.transformPagePoint),{point:c}=u,{timestamp:d}=cn;this.history=[{...c,timestamp:d}];const{onSessionStart:m}=n;m&&m(e,Ev(u,this.history)),this.removeListeners=ts(ns(this.contextWindow,"pointermove",this.handlePointerMove),ns(this.contextWindow,"pointerup",this.handlePointerUp),ns(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fo(this.updatePoint)}};function Tv(t,e){return e?{point:e(t.point)}:t}function qI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ev({point:t},e){return{point:t,delta:qI(t,qD(e)),offset:qI(t,xW(e)),velocity:RW(e,.1)}}function xW(t){return t[0]}function qD(t){return t[t.length-1]}function RW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=qD(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Zi(e)));)n--;if(!r)return{x:0,y:0};const s=es(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function QD(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const QI=QD("dragHorizontal"),YI=QD("dragVertical");function YD(t){let e=!1;if(t==="y")e=YI();else if(t==="x")e=QI();else{const n=QI(),r=YI();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function XD(){const t=YD(!0);return t?(t(),!1):!0}function Ll(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const JD=1e-4,kW=1-JD,bW=1+JD,ZD=.01,DW=0-ZD,NW=0+ZD;function ar(t){return t.max-t.min}function MW(t,e,n){return Math.abs(t-e)<=n}function XI(t,e,n,r=.5){t.origin=r,t.originPoint=_t(e.min,e.max,t.origin),t.scale=ar(n)/ar(e),t.translate=_t(n.min,n.max,t.origin)-t.originPoint,(t.scale>=kW&&t.scale<=bW||isNaN(t.scale))&&(t.scale=1),(t.translate>=DW&&t.translate<=NW||isNaN(t.translate))&&(t.translate=0)}function uh(t,e,n,r){XI(t.x,e.x,n.x,r?r.originX:void 0),XI(t.y,e.y,n.y,r?r.originY:void 0)}function JI(t,e,n){t.min=n.min+e.min,t.max=t.min+ar(e)}function OW(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function ZI(t,e,n){t.min=e.min-n.min,t.max=t.min+ar(e)}function ch(t,e,n){ZI(t.x,e.x,n.x),ZI(t.y,e.y,n.y)}function LW(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?_t(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?_t(n,t,r.max):Math.min(t,n)),t}function eP(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function VW(t,{top:e,left:n,bottom:r,right:i}){return{x:eP(t.x,n,i),y:eP(t.y,e,r)}}function tP(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function FW(t,e){return{x:tP(t.x,e.x),y:tP(t.y,e.y)}}function $W(t,e){let n=.5;const r=ar(t),i=ar(e);return i>r?n=du(e.min,e.max-r,t.min):r>i&&(n=du(t.min,t.max-i,e.min)),hs(0,1,n)}function BW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const K0=.35;function UW(t=K0){return t===!1?t=0:t===!0&&(t=K0),{x:nP(t,"left","right"),y:nP(t,"top","bottom")}}function nP(t,e,n){return{min:rP(t,e),max:rP(t,n)}}function rP(t,e){return typeof t=="number"?t:t[e]||0}const iP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vl=()=>({x:iP(),y:iP()}),sP=()=>({min:0,max:0}),Dt=()=>({x:sP(),y:sP()});function Tr(t){return[t("x"),t("y")]}function eN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Sv(t){return t===void 0||t===1}function q0({scale:t,scaleX:e,scaleY:n}){return!Sv(t)||!Sv(e)||!Sv(n)}function na(t){return q0(t)||tN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tN(t){return oP(t.x)||oP(t.y)}function oP(t){return t&&t!=="0%"}function im(t,e,n){const r=t-n,i=e*r;return n+i}function aP(t,e,n,r,i){return i!==void 0&&(t=im(t,i,r)),im(t,n,r)+e}function Q0(t,e=0,n=1,r,i){t.min=aP(t.min,e,n,r,i),t.max=aP(t.max,e,n,r,i)}function nN(t,{x:e,y:n}){Q0(t.x,e.translate,e.scale,e.originPoint),Q0(t.y,n.translate,n.scale,n.originPoint)}const lP=.999999999999,uP=1.0000000000001;function WW(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=n[u],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&$l(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,nN(t,a)),r&&na(s.latestValues)&&$l(t,s.latestValues))}e.x<uP&&e.x>lP&&(e.x=1),e.y<uP&&e.y>lP&&(e.y=1)}function Fl(t,e){t.min=t.min+e,t.max=t.max+e}function cP(t,e,n,r,i=.5){const s=_t(t.min,t.max,i);Q0(t,e,n,s,r)}function $l(t,e){cP(t.x,e.x,e.scaleX,e.scale,e.originX),cP(t.y,e.y,e.scaleY,e.scale,e.originY)}function rN(t,e){return eN(zW(t.getBoundingClientRect(),e))}function HW(t,e,n){const r=rN(t,n),{scroll:i}=e;return i&&(Fl(r.x,i.offset.x),Fl(r.y,i.offset.y)),r}const iN=({current:t})=>t?t.ownerDocument.defaultView:null,GW=new WeakMap;let KW=class{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ym(m,"page").point)},s=(m,g)=>{const{drag:y,dragPropagation:T,onDragStart:S}=this.getProps();if(y&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=YD(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tr(x=>{let k=this.getAxisMotionValue(x).get()||0;if(fi.test(k)){const{projection:F}=this.visualElement;if(F&&F.layout){const V=F.layout.layoutBox[x];V&&(k=ar(V)*(parseFloat(k)/100))}}this.originPoint[x]=k}),S&&et.postRender(()=>S(m,g)),H0(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:y,dragDirectionLock:T,onDirectionLock:S,onDrag:I}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:x}=g;if(T&&this.currentDirection===null){this.currentDirection=qW(x),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,x),this.updateAxis("y",g.point,x),this.visualElement.render(),I&&I(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Tr(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new KD(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:iN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&et.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!qf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=LW(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ll(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=VW(i.layoutBox,n):this.constraints=!1,this.elastic=UW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Tr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ll(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=HW(r,i.root,this.visualElement.getTransformPagePoint());let a=FW(i.layout.layoutBox,s);if(n){const u=n(jW(a));this.hasMutatedConstraints=!!u,u&&(a=eN(u))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},d=Tr(m=>{if(!qf(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const y=i?200:1e6,T=i?40:1e7,S={type:"inertia",velocity:r?e[m]:0,bounceStiffness:y,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,S)});return Promise.all(d).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return H0(this.visualElement,e),r.start(rT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Tr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Tr(n=>{const{drag:r}=this.getProps();if(!qf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[n];s.set(e[n]-_t(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ll(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Tr(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const c=u.get();i[a]=$W({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Tr(a=>{if(!qf(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];u.set(_t(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;GW.set(this.visualElement,this);const e=this.visualElement.current,n=ns(e,"pointerdown",c=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ll(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),et.read(r);const a=Ki(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Tr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=K0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}};function qf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}let QW=class extends Eo{constructor(e){super(e),this.removeGroupControls=Pn,this.removeListeners=Pn,this.controls=new KW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pn}unmount(){this.removeGroupControls(),this.removeListeners()}};const hP=t=>(e,n)=>{t&&et.postRender(()=>t(e,n))};let YW=class extends Eo{constructor(){super(...arguments),this.removePointerDownListener=Pn}onPointerDown(e){this.session=new KD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hP(e),onStart:hP(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&et.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=ns(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};const Xm=O.createContext(null);function XW(){const t=O.useContext(Xm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=O.useId();O.useEffect(()=>r(i),[]);const s=O.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const lT=O.createContext({}),sN=O.createContext({}),mp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dP(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Te.test(t))t=parseFloat(t);else return t;const n=dP(t,e.target.x),r=dP(t,e.target.y);return`${n}% ${r}%`}},JW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=po.parse(t);if(i.length>5)return r;const s=po.createTransformer(t),a=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=u,i[1+a]/=c;const d=_t(u,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),s(i)}},sm={};function ZW(t){Object.assign(sm,t)}const{schedule:uT,cancel:rZ}=sD(queueMicrotask,!1);let eH=class extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;ZW(tH),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||et.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),uT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}};function oN(t){const[e,n]=XW(),r=O.useContext(lT);return Q.jsx(eH,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(sN),isPresent:e,safeToRemove:n})}const tH={borderRadius:{...Vc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vc,borderTopRightRadius:Vc,borderBottomLeftRadius:Vc,borderBottomRightRadius:Vc,boxShadow:JW},aN=["TopLeft","TopRight","BottomLeft","BottomRight"],nH=aN.length,fP=t=>typeof t=="string"?parseFloat(t):t,pP=t=>typeof t=="number"||Te.test(t);function rH(t,e,n,r,i,s){i?(t.opacity=_t(0,n.opacity!==void 0?n.opacity:1,iH(r)),t.opacityExit=_t(e.opacity!==void 0?e.opacity:1,0,sH(r))):s&&(t.opacity=_t(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<nH;a++){const u=`border${aN[a]}Radius`;let c=mP(e,u),d=mP(n,u);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||pP(c)===pP(d)?(t[u]=Math.max(_t(fP(c),fP(d),r),0),(fi.test(d)||fi.test(c))&&(t[u]+="%")):t[u]=d}(e.rotate||n.rotate)&&(t.rotate=_t(e.rotate||0,n.rotate||0,r))}function mP(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iH=lN(0,.5,dD),sH=lN(.5,.95,Pn);function lN(t,e,n){return r=>r<t?0:r>e?1:n(du(t,e,r))}function gP(t,e){t.min=e.min,t.max=e.max}function _r(t,e){gP(t.x,e.x),gP(t.y,e.y)}function yP(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function vP(t,e,n,r,i){return t-=e,t=im(t,1/n,r),i!==void 0&&(t=im(t,1/i,r)),t}function oH(t,e=0,n=1,r=.5,i,s=t,a=t){if(fi.test(e)&&(e=parseFloat(e),e=_t(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=_t(s.min,s.max,r);t===s&&(u-=e),t.min=vP(t.min,e,n,u,i),t.max=vP(t.max,e,n,u,i)}function _P(t,e,[n,r,i],s,a){oH(t,e[n],e[r],e[i],e.scale,s,a)}const aH=["x","scaleX","originX"],lH=["y","scaleY","originY"];function wP(t,e,n,r){_P(t.x,e,aH,n?n.x:void 0,r?r.x:void 0),_P(t.y,e,lH,n?n.y:void 0,r?r.y:void 0)}function TP(t){return t.translate===0&&t.scale===1}function uN(t){return TP(t.x)&&TP(t.y)}function EP(t,e){return t.min===e.min&&t.max===e.max}function uH(t,e){return EP(t.x,e.x)&&EP(t.y,e.y)}function SP(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cN(t,e){return SP(t.x,e.x)&&SP(t.y,e.y)}function CP(t){return ar(t.x)/ar(t.y)}function IP(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}let cH=class{constructor(){this.members=[]}add(e){iT(this.members,e),e.scheduleRender()}remove(e){if(sT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function hH(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:m,rotateX:g,rotateY:y,skewX:T,skewY:S}=n;d&&(r=`perspective(${d}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),T&&(r+=`skewX(${T}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const dH=(t,e)=>t.depth-e.depth;let fH=class{constructor(){this.children=[],this.isDirty=!1}add(e){iT(this.children,e),this.isDirty=!0}remove(e){sT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dH),this.isDirty=!1,this.children.forEach(e)}};function gp(t){const e=Cn(t)?t.get():t;return iW(e)?e.toValue():e}function pH(t,e){const n=pi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(fo(r),t(s-e))};return et.read(r,!0),()=>fo(r)}function mH(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gH(t,e,n){const r=Cn(t)?t:Vh(t);return r.start(rT("",r,e,n)),r.animation}const ra={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Kc=typeof window<"u"&&window.MotionDebug!==void 0,Cv=["","X","Y","Z"],yH={visibility:"hidden"},PP=1e3;let vH=0;function Iv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function hN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&hN(r)}function dN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e==null?void 0:e()){this.id=vH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kc&&(ra.totalNodes=ra.resolvedTargetDeltas=ra.recalculatedProjection=0),this.nodes.forEach(TH),this.nodes.forEach(PH),this.nodes.forEach(AH),this.nodes.forEach(EH),Kc&&window.MotionDebug.record(ra)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new fH)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oT),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mH(a),this.instance=a;const{layoutId:c,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(d||c)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=pH(y,250),mp.hasAnimatedSinceResize&&(mp.hasAnimatedSinceResize=!1,this.nodes.forEach(xP))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:T,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||m.getDefaultTransition()||DH,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=m.getProps(),F=!this.targetLayout||!cN(this.targetLayout,S)||T,V=!y&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||V||y&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,V);const z={...zw(I,"layout"),onPlay:x,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else y||xP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xH),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AP);return}this.isUpdating||this.nodes.forEach(CH),this.isUpdating=!1,this.nodes.forEach(IH),this.nodes.forEach(_H),this.nodes.forEach(wH),this.clearAllSnapshots();const u=pi.now();cn.delta=hs(0,1e3/60,u-cn.timestamp),cn.timestamp=u,cn.isProcessing=!0,gv.update.process(cn),gv.preRender.process(cn),gv.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SH),this.sharedNodes.forEach(RH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!uN(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;a&&(u||na(this.latestValues)||m)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),NH(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return Dt();const c=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(MH))){const{scroll:m}=this.root;m&&(Fl(c.x,m.offset.x),Fl(c.y,m.offset.y))}return c}removeElementScroll(a){var u;const c=Dt();if(_r(c,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:g,options:y}=m;m!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&_r(c,a),Fl(c.x,g.offset.x),Fl(c.y,g.offset.y))}return c}applyTransform(a,u=!1){const c=Dt();_r(c,a);for(let d=0;d<this.path.length;d++){const m=this.path[d];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&$l(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),na(m.latestValues)&&$l(c,m.latestValues)}return na(this.latestValues)&&$l(c,this.latestValues),c}removeTransform(a){const u=Dt();_r(u,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!na(d.latestValues))continue;q0(d.latestValues)&&d.updateSnapshot();const m=Dt(),g=d.measurePageBox();_r(m,g),wP(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return na(this.latestValues)&&wP(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),ch(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),nN(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),ch(this.relativeTargetOrigin,this.target,T.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kc&&ra.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||q0(this.parent.latestValues)||tN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;_r(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,T=this.treeScale.y;WW(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Dt());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yP(this.prevProjectionDelta.x,this.projectionDelta.x),yP(this.prevProjectionDelta.y,this.projectionDelta.y)),uh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==T||!IP(this.projectionDelta.x,this.prevProjectionDelta.x)||!IP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Kc&&ra.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vl(),this.projectionDelta=Vl(),this.projectionDeltaWithTransform=Vl()}setAnimationOrigin(a,u=!1){const c=this.snapshot,d=c?c.latestValues:{},m={...this.latestValues},g=Vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Dt(),T=c?c.source:void 0,S=this.layout?this.layout.source:void 0,I=T!==S,x=this.getStack(),k=!x||x.members.length<=1,F=!!(I&&!k&&this.options.crossfade===!0&&!this.path.some(bH));this.animationProgress=0;let V;this.mixTargetDelta=z=>{const j=z/1e3;RP(g.x,a.x,j),RP(g.y,a.y,j),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ch(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kH(this.relativeTarget,this.relativeTargetOrigin,y,j),V&&uH(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Dt()),_r(V,this.relativeTarget)),I&&(this.animationValues=m,rH(m,d,this.latestValues,j,F,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{mp.hasAnimatedSinceResize=!0,this.currentAnimation=gH(0,PP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:d,latestValues:m}=a;if(!(!u||!c||!d)){if(this!==a&&this.layout&&d&&fN(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Dt();const g=ar(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const y=ar(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+y}_r(u,c),$l(u,m),uh(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new cH),this.sharedNodes.get(a).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const d={};c.z&&Iv("z",a,d,this.animationValues);for(let m=0;m<Cv.length;m++)Iv(`rotate${Cv[m]}`,a,d,this.animationValues),Iv(`skew${Cv[m]}`,a,d,this.animationValues);a.render();for(const m in d)a.setStaticValue(m,d[m]),this.animationValues&&(this.animationValues[m]=d[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yH;const d={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=gp(a==null?void 0:a.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none",d;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=gp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!na(this.latestValues)&&(I.transform=m?m({},""):"none",this.hasProjected=!1),I}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),d.transform=hH(this.projectionDeltaWithTransform,this.treeScale,y),m&&(d.transform=m(y,d.transform));const{x:T,y:S}=this.projectionDelta;d.transformOrigin=`${T.origin*100}% ${S.origin*100}% 0`,g.animationValues?d.opacity=g===this?(c=(u=y.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const I in sm){if(y[I]===void 0)continue;const{correct:x,applyTo:k}=sm[I],F=d.transform==="none"?y[I]:x(y[I],g);if(k){const V=k.length;for(let z=0;z<V;z++)d[k[z]]=F}else d[I]=F}return this.options.layoutId&&(d.pointerEvents=g===this?gp(a==null?void 0:a.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(AP),this.root.sharedNodes.clear()}}}function _H(t){t.updateLayout()}function wH(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Tr(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=ar(y);y.min=r[g].min,y.max=y.min+T}):fN(s,n.layoutBox,r)&&Tr(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=ar(r[g]);y.max=y.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=Vl();uh(u,r,n.layoutBox);const c=Vl();a?uh(c,t.applyTransform(i,!0),n.measuredBox):uh(c,r,n.layoutBox);const d=!uN(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:T}=g;if(y&&T){const S=Dt();ch(S,n.layoutBox,y.layoutBox);const I=Dt();ch(I,r,T.layoutBox),cN(S,I)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:d,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TH(t){Kc&&ra.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function EH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function SH(t){t.clearSnapshot()}function AP(t){t.clearMeasurements()}function CH(t){t.isLayoutDirty=!1}function IH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xP(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function PH(t){t.resolveTargetDelta()}function AH(t){t.calcProjection()}function xH(t){t.resetSkewAndRotation()}function RH(t){t.removeLeadSnapshot()}function RP(t,e,n){t.translate=_t(e.translate,0,n),t.scale=_t(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kP(t,e,n,r){t.min=_t(e.min,n.min,r),t.max=_t(e.max,n.max,r)}function kH(t,e,n,r){kP(t.x,e.x,n.x,r),kP(t.y,e.y,n.y,r)}function bH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const DH={duration:.45,ease:[.4,0,.1,1]},bP=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),DP=bP("applewebkit/")&&!bP("chrome/")?Math.round:Pn;function NP(t){t.min=DP(t.min),t.max=DP(t.max)}function NH(t){NP(t.x),NP(t.y)}function fN(t,e,n){return t==="position"||t==="preserve-aspect"&&!MW(CP(e),CP(n),.2)}function MH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const OH=dN({attachResizeListener:(t,e)=>Ki(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pv={current:void 0},pN=dN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pv.current){const t=new OH({});t.mount(window),t.setOptions({layoutScroll:!0}),Pv.current=t}return Pv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LH={pan:{Feature:YW},drag:{Feature:QW,ProjectionNode:pN,MeasureLayout:oN}};function MP(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,a)=>{if(s.pointerType==="touch"||XD())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e);const c=u[r];c&&et.postRender(()=>c(s,a))};return ns(t.current,n,i,{passive:!t.getProps()[r]})}let VH=class extends Eo{mount(){this.unmount=ts(MP(this.node,!0),MP(this.node,!1))}unmount(){}},FH=class extends Eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ts(Ki(this.node.current,"focus",()=>this.onFocus()),Ki(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};const mN=(t,e)=>e?t===e?!0:mN(t,e.parentElement):!1;function Av(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ym(n))}let $H=class extends Eo{constructor(){super(...arguments),this.removeStartListeners=Pn,this.removeEndListeners=Pn,this.removeAccessibleListeners=Pn,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ns(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:m,globalTapTarget:g}=this.node.getProps(),y=!g&&!mN(this.node.current,u.target)?m:d;y&&et.update(()=>y(u,c))},{passive:!(r.onTap||r.onPointerUp)}),a=ns(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ts(s,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Av("up",(c,d)=>{const{onTap:m}=this.node.getProps();m&&et.postRender(()=>m(c,d))})};this.removeEndListeners(),this.removeEndListeners=Ki(this.node.current,"keyup",a),Av("down",(u,c)=>{this.startPress(u,c)})},n=Ki(this.node.current,"keydown",e),r=()=>{this.isPressing&&Av("cancel",(s,a)=>this.cancelPress(s,a))},i=Ki(this.node.current,"blur",r);this.removeAccessibleListeners=ts(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&et.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!XD()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&et.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ns(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Ki(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ts(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}};const Y0=new WeakMap,xv=new WeakMap,BH=t=>{const e=Y0.get(t.target);e&&e(t)},UH=t=>{t.forEach(BH)};function jH({root:t,...e}){const n=t||document;xv.has(n)||xv.set(n,{});const r=xv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(UH,{root:t,...e})),r[i]}function zH(t,e,n){const r=jH(e);return Y0.set(t,n),r.observe(t),()=>{Y0.delete(t),r.unobserve(t)}}const WH={some:0,all:1};let HH=class extends Eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:WH[i]},u=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=d?m:g;y&&y(c)};return zH(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(GH(e,n))&&this.startObserver()}unmount(){}};function GH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const KH={inView:{Feature:HH},tap:{Feature:$H},focus:{Feature:FH},hover:{Feature:VH}},qH={layout:{ProjectionNode:pN,MeasureLayout:oN}},cT=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Jm=O.createContext({}),hT=typeof window<"u",gN=hT?O.useLayoutEffect:O.useEffect,yN=O.createContext({strict:!1});function QH(t,e,n,r,i){var s,a;const{visualElement:u}=O.useContext(Jm),c=O.useContext(yN),d=O.useContext(Xm),m=O.useContext(cT).reducedMotion,g=O.useRef();r=r||c.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:u,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,T=O.useContext(sN);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&YH(g.current,n,i,T);const S=O.useRef(!1);O.useInsertionEffect(()=>{y&&S.current&&y.update(n,d)});const I=n[jD],x=O.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,I)));return gN(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),uT.render(y.render),x.current&&y.animationState&&y.animationState.animateChanges())}),O.useEffect(()=>{y&&(!x.current&&y.animationState&&y.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,I)}),x.current=!1))}),y}function YH(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:u,layoutScroll:c,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:vN(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||u&&Ll(u),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:d})}function vN(t){if(t)return t.options.allowProjection!==!1?t.projection:vN(t.parent)}function XH(t,e,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ll(n)&&(n.current=r))},[e])}function Zm(t){return Km(t.animate)||jw.some(e=>Mh(t[e]))}function _N(t){return!!(Zm(t)||t.variants)}function JH(t,e){if(Zm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Mh(n)?n:void 0,animate:Mh(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZH(t){const{initial:e,animate:n}=JH(t,O.useContext(Jm));return O.useMemo(()=>({initial:e,animate:n}),[OP(e),OP(n)])}function OP(t){return Array.isArray(t)?t.join(" "):t}const LP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fu={};for(const t in LP)fu[t]={isEnabled:e=>LP[t].some(n=>!!e[n])};function e8(t){for(const e in t)fu[e]={...fu[e],...t[e]}}const t8=Symbol.for("motionComponentSymbol");function n8({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&e8(t);function s(u,c){let d;const m={...O.useContext(cT),...u,layoutId:r8(u)},{isStatic:g}=m,y=ZH(u),T=r(u,g);if(!g&&hT){i8();const S=s8(m);d=S.MeasureLayout,y.visualElement=QH(i,T,m,e,S.ProjectionNode)}return Q.jsxs(Jm.Provider,{value:y,children:[d&&y.visualElement?Q.jsx(d,{visualElement:y.visualElement,...m}):null,n(i,u,XH(T,y.visualElement,c),T,g,y.visualElement)]})}const a=O.forwardRef(s);return a[t8]=i,a}function r8({layoutId:t}){const e=O.useContext(lT).id;return e&&t!==void 0?e+"-"+t:t}function i8(t,e){O.useContext(yN).strict}function s8(t){const{drag:e,layout:n}=fu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const o8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dT(t){return typeof t!="string"||t.includes("-")?!1:!!(o8.indexOf(t)>-1||/[A-Z]/u.test(t))}function wN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const TN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EN(t,e,n,r){wN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(TN.has(i)?i:aT(i),e.attrs[i])}function SN(t,{layout:e,layoutId:n}){return ka.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sm[t]||t==="opacity")}function fT(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Cn(i[a])||e.style&&Cn(e.style[a])||SN(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function CN(t,e,n){const r=fT(t,e,n);for(const i in t)if(Cn(t[i])||Cn(e[i])){const s=hd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function pT(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}function a8({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const a={latestValues:l8(r,i,s,t),renderState:e()};return n&&(a.mount=u=>n(r,u,a)),a}const IN=t=>(e,n)=>{const r=O.useContext(Jm),i=O.useContext(Xm),s=()=>a8(t,e,r,i);return n?s():pT(s)};function l8(t,e,n,r){const i={},s=r(t,{});for(const y in s)i[y]=gp(s[y]);let{initial:a,animate:u}=t;const c=Zm(t),d=_N(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!Km(g)){const y=Array.isArray(g)?g:[g];for(let T=0;T<y.length;T++){const S=Bw(t,y[T]);if(S){const{transitionEnd:I,transition:x,...k}=S;for(const F in k){let V=k[F];if(Array.isArray(V)){const z=m?V.length-1:0;V=V[z]}V!==null&&(i[F]=V)}for(const F in I)i[F]=I[F]}}}return i}const mT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),PN=()=>({...mT(),attrs:{}}),AN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,u8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c8=hd.length;function h8(t,e,n){let r="",i=!0;for(let s=0;s<c8;s++){const a=hd[s],u=t[a];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(a.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const d=AN(u,Yw[a]);if(!c){i=!1;const m=u8[a]||a;r+=`${m}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function gT(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,u=!1;for(const c in e){const d=e[c];if(ka.has(c)){a=!0;continue}else if(yD(c)){i[c]=d;continue}else{const m=AN(d,Yw[c]);c.startsWith("origin")?(u=!0,s[c]=m):r[c]=m}}if(e.transform||(a||n?r.transform=h8(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:d="50%",originZ:m=0}=s;r.transformOrigin=`${c} ${d} ${m}`}}function VP(t,e,n){return typeof t=="string"?t:Te.transform(e+n*t)}function d8(t,e,n){const r=VP(e,t.x,t.width),i=VP(n,t.y,t.height);return`${r} ${i}`}const f8={offset:"stroke-dashoffset",array:"stroke-dasharray"},p8={offset:"strokeDashoffset",array:"strokeDasharray"};function m8(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?f8:p8;t[s.offset]=Te.transform(-r);const a=Te.transform(e),u=Te.transform(n);t[s.array]=`${a} ${u}`}function yT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...d},m,g){if(gT(t,d,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:T,dimensions:S}=t;y.transform&&(S&&(T.transform=y.transform),delete y.transform),S&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=d8(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),a!==void 0&&m8(y,a,u,c,!1)}const vT=t=>typeof t=="string"&&t.toLowerCase()==="svg",g8={useVisualState:IN({scrapeMotionValuesFromProps:CN,createRenderState:PN,onMount:(t,e,{renderState:n,latestValues:r})=>{et.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{yT(n,r,vT(e.tagName),t.transformTemplate),EN(e,n)})}})},y8={useVisualState:IN({scrapeMotionValuesFromProps:fT,createRenderState:mT})};function xN(t,e,n){for(const r in e)!Cn(e[r])&&!SN(r,n)&&(t[r]=e[r])}function v8({transformTemplate:t},e){return O.useMemo(()=>{const n=mT();return gT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _8(t,e){const n=t.style||{},r={};return xN(r,n,t),Object.assign(r,v8(t,e)),r}function w8(t,e){const n={},r=_8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const T8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function om(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||T8.has(t)}let RN=t=>!om(t);function E8(t){t&&(RN=e=>e.startsWith("on")?!om(e):t(e))}try{E8(require("@emotion/is-prop-valid").default)}catch{}function S8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(RN(i)||n===!0&&om(i)||!e&&!om(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function C8(t,e,n,r){const i=O.useMemo(()=>{const s=PN();return yT(s,e,vT(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};xN(s,t.style,t),i.style={...s,...i.style}}return i}function I8(t=!1){return(n,r,i,{latestValues:s},a)=>{const c=(dT(n)?C8:w8)(r,s,a,n),d=S8(r,typeof n=="string",t),m=n!==O.Fragment?{...d,...c,ref:i}:{},{children:g}=r,y=O.useMemo(()=>Cn(g)?g.get():g,[g]);return O.createElement(n,{...m,children:y})}}function P8(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...dT(r)?g8:y8,preloadedFeatures:t,useRender:I8(i),createVisualElement:e,Component:r};return n8(a)}}const X0={current:null},kN={current:!1};function A8(){if(kN.current=!0,!!hT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>X0.current=t.matches;t.addListener(e),e()}else X0.current=!1}function x8(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Cn(i))t.addValue(r,i);else if(Cn(s))t.addValue(r,Vh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Vh(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const FP=new WeakMap,R8=[...wD,wn,po],k8=t=>R8.find(_D(t)),$P=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let b8=class{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=pi.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,et.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=Zm(n),this.isVariantNode=_N(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const T=g[y];c[y]!==void 0&&Cn(T)&&T.set(c[y],!1)}}mount(e){this.current=e,FP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kN.current||A8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:X0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FP.delete(this.current),this.projection&&this.projection.unmount(),fo(this.notifyUpdate),fo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ka.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fu){const n=fu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<$P.length;r++){const i=$P[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=x8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(mD(i)||pD(i))?i=parseFloat(i):!k8(i)&&po.test(n)&&(i=xD(e,n)),this.setBaseTarget(e,Cn(i)?i.get():i)),Cn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=Bw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Cn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new oT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}},bN=class extends b8{constructor(){super(...arguments),this.KeyframeResolver=RD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}};function D8(t){return window.getComputedStyle(t)}let N8=class extends bN{constructor(){super(...arguments),this.type="html",this.renderInstance=wN}readValueFromInstance(e,n){if(ka.has(n)){const r=Xw(n);return r&&r.default||0}else{const r=D8(e),i=(yD(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rN(e,n)}build(e,n,r){gT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return fT(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Cn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}},M8=class extends bN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ka.has(n)){const r=Xw(n);return r&&r.default||0}return n=TN.has(n)?n:aT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return CN(e,n,r)}build(e,n,r){yT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){EN(e,n,r,i)}mount(e){this.isSVGTag=vT(e.tagName),super.mount(e)}};const O8=(t,e)=>dT(t)?new M8(e):new N8(e,{allowProjection:t!==O.Fragment}),L8=P8({...IW,...KH,...LH,...qH},O8),Cr=S6(L8);class V8 extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function F8({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=O.useContext(cT);return O.useInsertionEffect(()=>{const{width:a,height:u,top:c,left:d}=i.current;if(e||!r.current||!a||!u)return;r.current.dataset.motionPopId=n;const m=document.createElement("style");return s&&(m.nonce=s),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),Q.jsx(V8,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const $8=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const u=pT(B8),c=O.useId(),d=O.useCallback(g=>{u.set(g,!0);for(const y of u.values())if(!y)return;r&&r()},[u,r]),m=O.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:d,register:g=>(u.set(g,!1),()=>u.delete(g))}),s?[Math.random(),d]:[n,d]);return O.useMemo(()=>{u.forEach((g,y)=>u.set(y,!1))},[n]),O.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(t=Q.jsx(F8,{isPresent:n,children:t})),Q.jsx(Xm.Provider,{value:m,children:t})};function B8(){return new Map}const Qf=t=>t.key||"";function BP(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const _T=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const u=O.useMemo(()=>BP(t),[t]),c=u.map(Qf),d=O.useRef(!0),m=O.useRef(u),g=pT(()=>new Map),[y,T]=O.useState(u),[S,I]=O.useState(u);gN(()=>{d.current=!1,m.current=u;for(let F=0;F<S.length;F++){const V=Qf(S[F]);c.includes(V)?g.delete(V):g.get(V)!==!0&&g.set(V,!1)}},[S,c.length,c.join("-")]);const x=[];if(u!==y){let F=[...u];for(let V=0;V<S.length;V++){const z=S[V],j=Qf(z);c.includes(j)||(F.splice(V,0,z),x.push(z))}a==="wait"&&x.length&&(F=x),I(BP(F)),T(u);return}const{forceRender:k}=O.useContext(lT);return Q.jsx(Q.Fragment,{children:S.map(F=>{const V=Qf(F),z=u===S||c.includes(V),j=()=>{if(g.has(V))g.set(V,!0);else return;let Y=!0;g.forEach(D=>{D||(Y=!1)}),Y&&(k==null||k(),I(m.current),i&&i())};return Q.jsx($8,{isPresent:z,initial:!d.current||r?void 0:!1,custom:z?void 0:n,presenceAffectsLayout:s,mode:a,onExitComplete:z?void 0:j,children:F},V)})})};var U8={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function j8(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return U8[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function Yf(t){var e=j8(t);return"".concat(e.value).concat(e.unit)}var z8=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,a=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(a,0),r},am=function(){return am=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},am.apply(this,arguments)},W8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},H8=z8("BounceLoader","0% {transform: scale(0)} 50% {transform: scale(1.0)} 100% {transform: scale(0)}","bounce");function DN(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,i=r===void 0?"#000000":r,s=t.speedMultiplier,a=s===void 0?1:s,u=t.cssOverride,c=u===void 0?{}:u,d=t.size,m=d===void 0?60:d,g=W8(t,["loading","color","speedMultiplier","cssOverride","size"]),y=function(S){var I=S===1?"".concat(1/a,"s"):"0s";return{position:"absolute",height:Yf(m),width:Yf(m),backgroundColor:i,borderRadius:"100%",opacity:.6,top:0,left:0,animationFillMode:"both",animation:"".concat(H8," ").concat(2.1/a,"s ").concat(I," infinite ease-in-out")}},T=am({display:"inherit",position:"relative",width:Yf(m),height:Yf(m)},c);return n?O.createElement("span",am({style:T},g),O.createElement("span",{style:y(1)}),O.createElement("span",{style:y(2)})):null}function ji(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function NN(t){if(O.isValidElement(t)||!ji(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=NN(t[n])}),e}function sr(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return ji(t)&&ji(e)&&Object.keys(e).forEach(i=>{O.isValidElement(e[i])?r[i]=e[i]:ji(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&ji(t[i])?r[i]=sr(t[i],e[i],n):n.clone?r[i]=ji(e[i])?NN(e[i]):e[i]:r[i]=e[i]}),r}var Rv={exports:{}},kv,UP;function G8(){if(UP)return kv;UP=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kv=t,kv}var bv,jP;function K8(){if(jP)return bv;jP=1;var t=G8();function e(){}function n(){}return n.resetWarningCache=e,bv=function(){function r(a,u,c,d,m,g){if(g!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},bv}var zP;function q8(){return zP||(zP=1,Rv.exports=K8()()),Rv.exports}var Q8=q8();const Bl=Sx(Q8);function Ia(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function pu(t){if(typeof t!="string")throw new Error(Ia(7));return t.charAt(0).toUpperCase()+t.slice(1)}function J0(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const s=t[i],a=e[i];if(!a)n[i]=s||{};else if(!s)n[i]=a;else{n[i]={...a};for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=u;n[i][c]=J0(s[c],a[c])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function Y8(t,e,n=void 0){const r={};for(const i in t){const s=t[i];let a="",u=!0;for(let c=0;c<s.length;c+=1){const d=s[c];d&&(a+=(u===!0?"":" ")+e(d),u=!1,n&&n[d]&&(a+=" "+n[d]))}r[i]=a}return r}const WP=t=>t,X8=()=>{let t=WP;return{configure(e){t=e},generate(e){return t(e)},reset(){t=WP}}},J8=X8(),Z8={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function MN(t,e,n="Mui"){const r=Z8[e];return r?`${n}-${r}`:`${J8.generate(t)}-${e}`}function eG(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=MN(t,i,n)}),r}function tG(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function ON(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ON(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nG(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ON(t))&&(r&&(r+=" "),r+=e);return r}function hh(t,e){return e?sr(t,e,{clone:!1}):t}function rG(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var a,u;const s=/min-width:\s*([0-9.]+)/;return+(((a=r.match(s))==null?void 0:a[1])||0)-+(((u=i.match(s))==null?void 0:u[1])||0)});return n.length?n.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function iG(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function sG(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(s)}function oG(t){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function n(s,a){s.up=(...u)=>e(t.breakpoints.up(...u),a),s.down=(...u)=>e(t.breakpoints.down(...u),a),s.between=(...u)=>e(t.breakpoints.between(...u),a),s.only=(...u)=>e(t.breakpoints.only(...u),a),s.not=(...u)=>{const c=e(t.breakpoints.not(...u),a);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},i=s=>(n(r,s),r);return n(i),{...t,containerQueries:i}}const eg={xs:0,sm:600,md:900,lg:1200,xl:1536},HP={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${eg[t]}px)`},aG={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:eg[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function ds(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||HP;return e.reduce((a,u,c)=>(a[s.up(s.keys[c])]=n(e[c]),a),{})}if(typeof e=="object"){const s=r.breakpoints||HP;return Object.keys(e).reduce((a,u)=>{if(iG(s.keys,u)){const c=sG(r.containerQueries?r:aG,u);c&&(a[c]=n(e[u],u))}else if(Object.keys(s.values||eg).includes(u)){const c=s.up(u);a[c]=n(e[u],u)}else{const c=u;a[c]=e[c]}return a},{})}return n(e)}function lG(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function uG(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function tg(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function lm(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=tg(t,n)||r,e&&(i=e(i,r,t)),i}function Ot(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=a=>{if(a[e]==null)return null;const u=a[e],c=a.theme,d=tg(c,r)||{};return ds(a,u,g=>{let y=lm(d,i,g);return g===y&&typeof g=="string"&&(y=lm(d,i,`${e}${g==="default"?"":pu(g)}`,g)),n===!1?y:{[n]:y}})};return s.propTypes={},s.filterProps=[e],s}function cG(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const hG={m:"margin",p:"padding"},dG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},GP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},fG=cG(t=>{if(t.length>2)if(GP[t])t=GP[t];else return[t];const[e,n]=t.split(""),r=hG[e],i=dG[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),wT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],TT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...wT,...TT];function pd(t,e,n,r){const i=tg(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),u=i[a];return s>=0?u:typeof u=="number"?-u:`-${u}`}:typeof i=="function"?i:()=>{}}function ET(t){return pd(t,"spacing",8)}function md(t,e){return typeof e=="string"||e==null?e:t(e)}function pG(t,e){return n=>t.reduce((r,i)=>(r[i]=md(e,n),r),{})}function mG(t,e,n,r){if(!e.includes(n))return null;const i=fG(n),s=pG(i,r),a=t[n];return ds(t,a,s)}function LN(t,e){const n=ET(t.theme);return Object.keys(t).map(r=>mG(t,e,r,n)).reduce(hh,{})}function Ct(t){return LN(t,wT)}Ct.propTypes={};Ct.filterProps=wT;function It(t){return LN(t,TT)}It.propTypes={};It.filterProps=TT;function ng(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?hh(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Sr(t){return typeof t!="number"?t:`${t}px solid`}function Pr(t,e){return Ot({prop:t,themeKey:"borders",transform:e})}const gG=Pr("border",Sr),yG=Pr("borderTop",Sr),vG=Pr("borderRight",Sr),_G=Pr("borderBottom",Sr),wG=Pr("borderLeft",Sr),TG=Pr("borderColor"),EG=Pr("borderTopColor"),SG=Pr("borderRightColor"),CG=Pr("borderBottomColor"),IG=Pr("borderLeftColor"),PG=Pr("outline",Sr),AG=Pr("outlineColor"),rg=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=pd(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:md(e,r)});return ds(t,t.borderRadius,n)}return null};rg.propTypes={};rg.filterProps=["borderRadius"];ng(gG,yG,vG,_G,wG,TG,EG,SG,CG,IG,rg,PG,AG);const ig=t=>{if(t.gap!==void 0&&t.gap!==null){const e=pd(t.theme,"spacing",8),n=r=>({gap:md(e,r)});return ds(t,t.gap,n)}return null};ig.propTypes={};ig.filterProps=["gap"];const sg=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=pd(t.theme,"spacing",8),n=r=>({columnGap:md(e,r)});return ds(t,t.columnGap,n)}return null};sg.propTypes={};sg.filterProps=["columnGap"];const og=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=pd(t.theme,"spacing",8),n=r=>({rowGap:md(e,r)});return ds(t,t.rowGap,n)}return null};og.propTypes={};og.filterProps=["rowGap"];const xG=Ot({prop:"gridColumn"}),RG=Ot({prop:"gridRow"}),kG=Ot({prop:"gridAutoFlow"}),bG=Ot({prop:"gridAutoColumns"}),DG=Ot({prop:"gridAutoRows"}),NG=Ot({prop:"gridTemplateColumns"}),MG=Ot({prop:"gridTemplateRows"}),OG=Ot({prop:"gridTemplateAreas"}),LG=Ot({prop:"gridArea"});ng(ig,sg,og,xG,RG,kG,bG,DG,NG,MG,OG,LG);function Zl(t,e){return e==="grey"?e:t}const VG=Ot({prop:"color",themeKey:"palette",transform:Zl}),FG=Ot({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Zl}),$G=Ot({prop:"backgroundColor",themeKey:"palette",transform:Zl});ng(VG,FG,$G);function ir(t){return t<=1&&t!==0?`${t*100}%`:t}const BG=Ot({prop:"width",transform:ir}),ST=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,s,a,u,c;const r=((a=(s=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:a[n])||eg[n];return r?((c=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ir(n)}};return ds(t,t.maxWidth,e)}return null};ST.filterProps=["maxWidth"];const UG=Ot({prop:"minWidth",transform:ir}),jG=Ot({prop:"height",transform:ir}),zG=Ot({prop:"maxHeight",transform:ir}),WG=Ot({prop:"minHeight",transform:ir});Ot({prop:"size",cssProperty:"width",transform:ir});Ot({prop:"size",cssProperty:"height",transform:ir});const HG=Ot({prop:"boxSizing"});ng(BG,ST,UG,jG,zG,WG,HG);const ag={border:{themeKey:"borders",transform:Sr},borderTop:{themeKey:"borders",transform:Sr},borderRight:{themeKey:"borders",transform:Sr},borderBottom:{themeKey:"borders",transform:Sr},borderLeft:{themeKey:"borders",transform:Sr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Sr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:rg},color:{themeKey:"palette",transform:Zl},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Zl},backgroundColor:{themeKey:"palette",transform:Zl},p:{style:It},pt:{style:It},pr:{style:It},pb:{style:It},pl:{style:It},px:{style:It},py:{style:It},padding:{style:It},paddingTop:{style:It},paddingRight:{style:It},paddingBottom:{style:It},paddingLeft:{style:It},paddingX:{style:It},paddingY:{style:It},paddingInline:{style:It},paddingInlineStart:{style:It},paddingInlineEnd:{style:It},paddingBlock:{style:It},paddingBlockStart:{style:It},paddingBlockEnd:{style:It},m:{style:Ct},mt:{style:Ct},mr:{style:Ct},mb:{style:Ct},ml:{style:Ct},mx:{style:Ct},my:{style:Ct},margin:{style:Ct},marginTop:{style:Ct},marginRight:{style:Ct},marginBottom:{style:Ct},marginLeft:{style:Ct},marginX:{style:Ct},marginY:{style:Ct},marginInline:{style:Ct},marginInlineStart:{style:Ct},marginInlineEnd:{style:Ct},marginBlock:{style:Ct},marginBlockStart:{style:Ct},marginBlockEnd:{style:Ct},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ig},rowGap:{style:og},columnGap:{style:sg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ir},maxWidth:{style:ST},minWidth:{transform:ir},height:{transform:ir},maxHeight:{transform:ir},minHeight:{transform:ir},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function GG(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function KG(t,e){return typeof t=="function"?t(e):t}function qG(){function t(n,r,i,s){const a={[n]:r,theme:i},u=s[n];if(!u)return{[n]:r};const{cssProperty:c=n,themeKey:d,transform:m,style:g}=u;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[n]:r};const y=tg(i,d)||{};return g?g(a):ds(a,r,S=>{let I=lm(y,m,S);return S===I&&typeof S=="string"&&(I=lm(y,m,`${n}${S==="default"?"":pu(S)}`,S)),c===!1?I:{[c]:I}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??ag;function a(u){let c=u;if(typeof u=="function")c=u(i);else if(typeof u!="object")return u;if(!c)return null;const d=lG(i.breakpoints),m=Object.keys(d);let g=d;return Object.keys(c).forEach(y=>{const T=KG(c[y],i);if(T!=null)if(typeof T=="object")if(s[y])g=hh(g,t(y,T,i,s));else{const S=ds({theme:i},T,I=>({[y]:I}));GG(S,T)?g[y]=e({sx:T,theme:i}):g=hh(g,S)}else g=hh(g,t(y,T,i,s))}),rG(i,uG(m,g))}return Array.isArray(r)?r.map(a):a(r)}return e}const mu=qG();mu.filterProps=["sx"];function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z0.apply(null,arguments)}function VN(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var QG=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,YG=VN(function(t){return QG.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),XG=!1;function JG(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function ZG(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var eK=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!XG:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ZG(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=JG(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),_n="-ms-",um="-moz-",Ye="-webkit-",FN="comm",CT="rule",IT="decl",tK="@import",$N="@keyframes",nK="@layer",rK=Math.abs,lg=String.fromCharCode,iK=Object.assign;function sK(t,e){return dn(t,0)^45?(((e<<2^dn(t,0))<<2^dn(t,1))<<2^dn(t,2))<<2^dn(t,3):0}function BN(t){return t.trim()}function oK(t,e){return(t=e.exec(t))?t[0]:t}function Xe(t,e,n){return t.replace(e,n)}function e_(t,e){return t.indexOf(e)}function dn(t,e){return t.charCodeAt(e)|0}function Fh(t,e,n){return t.slice(e,n)}function oi(t){return t.length}function PT(t){return t.length}function Xf(t,e){return e.push(t),t}function aK(t,e){return t.map(e).join("")}var ug=1,gu=1,UN=0,Qn=0,$t=0,Nu="";function cg(t,e,n,r,i,s,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:ug,column:gu,length:a,return:""}}function Fc(t,e){return iK(cg("",null,null,"",null,null,0),t,{length:-t.length},e)}function lK(){return $t}function uK(){return $t=Qn>0?dn(Nu,--Qn):0,gu--,$t===10&&(gu=1,ug--),$t}function or(){return $t=Qn<UN?dn(Nu,Qn++):0,gu++,$t===10&&(gu=1,ug++),$t}function mi(){return dn(Nu,Qn)}function yp(){return Qn}function gd(t,e){return Fh(Nu,t,e)}function $h(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function jN(t){return ug=gu=1,UN=oi(Nu=t),Qn=0,[]}function zN(t){return Nu="",t}function vp(t){return BN(gd(Qn-1,t_(t===91?t+2:t===40?t+1:t)))}function cK(t){for(;($t=mi())&&$t<33;)or();return $h(t)>2||$h($t)>3?"":" "}function hK(t,e){for(;--e&&or()&&!($t<48||$t>102||$t>57&&$t<65||$t>70&&$t<97););return gd(t,yp()+(e<6&&mi()==32&&or()==32))}function t_(t){for(;or();)switch($t){case t:return Qn;case 34:case 39:t!==34&&t!==39&&t_($t);break;case 40:t===41&&t_(t);break;case 92:or();break}return Qn}function dK(t,e){for(;or()&&t+$t!==57;)if(t+$t===84&&mi()===47)break;return"/*"+gd(e,Qn-1)+"*"+lg(t===47?t:or())}function fK(t){for(;!$h(mi());)or();return gd(t,Qn)}function pK(t){return zN(_p("",null,null,null,[""],t=jN(t),0,[0],t))}function _p(t,e,n,r,i,s,a,u,c){for(var d=0,m=0,g=a,y=0,T=0,S=0,I=1,x=1,k=1,F=0,V="",z=i,j=s,Y=r,D=V;x;)switch(S=F,F=or()){case 40:if(S!=108&&dn(D,g-1)==58){e_(D+=Xe(vp(F),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:D+=vp(F);break;case 9:case 10:case 13:case 32:D+=cK(S);break;case 92:D+=hK(yp()-1,7);continue;case 47:switch(mi()){case 42:case 47:Xf(mK(dK(or(),yp()),e,n),c);break;default:D+="/"}break;case 123*I:u[d++]=oi(D)*k;case 125*I:case 59:case 0:switch(F){case 0:case 125:x=0;case 59+m:k==-1&&(D=Xe(D,/\f/g,"")),T>0&&oi(D)-g&&Xf(T>32?qP(D+";",r,n,g-1):qP(Xe(D," ","")+";",r,n,g-2),c);break;case 59:D+=";";default:if(Xf(Y=KP(D,e,n,d,m,i,u,V,z=[],j=[],g),s),F===123)if(m===0)_p(D,e,Y,Y,z,s,g,u,j);else switch(y===99&&dn(D,3)===110?100:y){case 100:case 108:case 109:case 115:_p(t,Y,Y,r&&Xf(KP(t,Y,Y,0,0,i,u,V,i,z=[],g),j),i,j,g,u,r?z:j);break;default:_p(D,Y,Y,Y,[""],j,0,u,j)}}d=m=T=0,I=k=1,V=D="",g=a;break;case 58:g=1+oi(D),T=S;default:if(I<1){if(F==123)--I;else if(F==125&&I++==0&&uK()==125)continue}switch(D+=lg(F),F*I){case 38:k=m>0?1:(D+="\f",-1);break;case 44:u[d++]=(oi(D)-1)*k,k=1;break;case 64:mi()===45&&(D+=vp(or())),y=mi(),m=g=oi(V=D+=fK(yp())),F++;break;case 45:S===45&&oi(D)==2&&(I=0)}}return s}function KP(t,e,n,r,i,s,a,u,c,d,m){for(var g=i-1,y=i===0?s:[""],T=PT(y),S=0,I=0,x=0;S<r;++S)for(var k=0,F=Fh(t,g+1,g=rK(I=a[S])),V=t;k<T;++k)(V=BN(I>0?y[k]+" "+F:Xe(F,/&\f/g,y[k])))&&(c[x++]=V);return cg(t,e,n,i===0?CT:u,c,d,m)}function mK(t,e,n){return cg(t,e,n,FN,lg(lK()),Fh(t,2,-2),0)}function qP(t,e,n,r){return cg(t,e,n,IT,Fh(t,0,r),Fh(t,r+1,-1),r)}function eu(t,e){for(var n="",r=PT(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function gK(t,e,n,r){switch(t.type){case nK:if(t.children.length)break;case tK:case IT:return t.return=t.return||t.value;case FN:return"";case $N:return t.return=t.value+"{"+eu(t.children,r)+"}";case CT:t.value=t.props.join(",")}return oi(n=eu(t.children,r))?t.return=t.value+"{"+n+"}":""}function yK(t){var e=PT(t);return function(n,r,i,s){for(var a="",u=0;u<e;u++)a+=t[u](n,r,i,s)||"";return a}}function vK(t){return function(e){e.root||(e=e.return)&&t(e)}}var _K=function(e,n,r){for(var i=0,s=0;i=s,s=mi(),i===38&&s===12&&(n[r]=1),!$h(s);)or();return gd(e,Qn)},wK=function(e,n){var r=-1,i=44;do switch($h(i)){case 0:i===38&&mi()===12&&(n[r]=1),e[r]+=_K(Qn-1,n,r);break;case 2:e[r]+=vp(i);break;case 4:if(i===44){e[++r]=mi()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=lg(i)}while(i=or());return e},TK=function(e,n){return zN(wK(jN(e),n))},QP=new WeakMap,EK=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!QP.get(r))&&!i){QP.set(e,!0);for(var s=[],a=TK(n,s),u=r.props,c=0,d=0;c<a.length;c++)for(var m=0;m<u.length;m++,d++)e.props[d]=s[c]?a[c].replace(/&\f/g,u[m]):u[m]+" "+a[c]}}},SK=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function WN(t,e){switch(sK(t,e)){case 5103:return Ye+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ye+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ye+t+um+t+_n+t+t;case 6828:case 4268:return Ye+t+_n+t+t;case 6165:return Ye+t+_n+"flex-"+t+t;case 5187:return Ye+t+Xe(t,/(\w+).+(:[^]+)/,Ye+"box-$1$2"+_n+"flex-$1$2")+t;case 5443:return Ye+t+_n+"flex-item-"+Xe(t,/flex-|-self/,"")+t;case 4675:return Ye+t+_n+"flex-line-pack"+Xe(t,/align-content|flex-|-self/,"")+t;case 5548:return Ye+t+_n+Xe(t,"shrink","negative")+t;case 5292:return Ye+t+_n+Xe(t,"basis","preferred-size")+t;case 6060:return Ye+"box-"+Xe(t,"-grow","")+Ye+t+_n+Xe(t,"grow","positive")+t;case 4554:return Ye+Xe(t,/([^-])(transform)/g,"$1"+Ye+"$2")+t;case 6187:return Xe(Xe(Xe(t,/(zoom-|grab)/,Ye+"$1"),/(image-set)/,Ye+"$1"),t,"")+t;case 5495:case 3959:return Xe(t,/(image-set\([^]*)/,Ye+"$1$`$1");case 4968:return Xe(Xe(t,/(.+:)(flex-)?(.*)/,Ye+"box-pack:$3"+_n+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ye+t+t;case 4095:case 3583:case 4068:case 2532:return Xe(t,/(.+)-inline(.+)/,Ye+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(oi(t)-1-e>6)switch(dn(t,e+1)){case 109:if(dn(t,e+4)!==45)break;case 102:return Xe(t,/(.+:)(.+)-([^]+)/,"$1"+Ye+"$2-$3$1"+um+(dn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~e_(t,"stretch")?WN(Xe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(dn(t,e+1)!==115)break;case 6444:switch(dn(t,oi(t)-3-(~e_(t,"!important")&&10))){case 107:return Xe(t,":",":"+Ye)+t;case 101:return Xe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ye+(dn(t,14)===45?"inline-":"")+"box$3$1"+Ye+"$2$3$1"+_n+"$2box$3")+t}break;case 5936:switch(dn(t,e+11)){case 114:return Ye+t+_n+Xe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ye+t+_n+Xe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ye+t+_n+Xe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ye+t+_n+t+t}return t}var CK=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case IT:e.return=WN(e.value,e.length);break;case $N:return eu([Fc(e,{value:Xe(e.value,"@","@"+Ye)})],i);case CT:if(e.length)return aK(e.props,function(s){switch(oK(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return eu([Fc(e,{props:[Xe(s,/:(read-\w+)/,":"+um+"$1")]})],i);case"::placeholder":return eu([Fc(e,{props:[Xe(s,/:(plac\w+)/,":"+Ye+"input-$1")]}),Fc(e,{props:[Xe(s,/:(plac\w+)/,":"+um+"$1")]}),Fc(e,{props:[Xe(s,/:(plac\w+)/,_n+"input-$1")]})],i)}return""})}},IK=[CK],PK=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(I){var x=I.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(I),I.setAttribute("data-s",""))})}var i=e.stylisPlugins||IK,s={},a,u=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(I){for(var x=I.getAttribute("data-emotion").split(" "),k=1;k<x.length;k++)s[x[k]]=!0;u.push(I)});var c,d=[EK,SK];{var m,g=[gK,vK(function(I){m.insert(I)})],y=yK(d.concat(i,g)),T=function(x){return eu(pK(x),y)};c=function(x,k,F,V){m=F,T(x?x+"{"+k.styles+"}":k.styles),V&&(S.inserted[k.name]=!0)}}var S={key:n,sheet:new eK({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return S.sheet.hydrate(u),S},AK=!0;function xK(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var HN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||AK===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},RK=function(e,n,r){HN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function kK(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var bK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},DK=!1,NK=/[A-Z]|^ms/g,MK=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GN=function(e){return e.charCodeAt(1)===45},YP=function(e){return e!=null&&typeof e!="boolean"},Dv=VN(function(t){return GN(t)?t:t.replace(NK,"-$&").toLowerCase()}),XP=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(MK,function(r,i,s){return ai={name:i,styles:s,next:ai},i})}return bK[e]!==1&&!GN(e)&&typeof n=="number"&&n!==0?n+"px":n},OK="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Bh(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ai={name:i.name,styles:i.styles,next:ai},i.name;var s=n;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)ai={name:a.name,styles:a.styles,next:ai},a=a.next;var u=s.styles+";";return u}return LK(t,e,n)}case"function":{if(t!==void 0){var c=ai,d=n(t);return ai=c,Bh(t,e,d)}break}}var m=n;if(e==null)return m;var g=e[m];return g!==void 0?g:m}function LK(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Bh(t,e,n[i])+";";else for(var s in n){var a=n[s];if(typeof a!="object"){var u=a;e!=null&&e[u]!==void 0?r+=s+"{"+e[u]+"}":YP(u)&&(r+=Dv(s)+":"+XP(s,u)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&DK)throw new Error(OK);if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var c=0;c<a.length;c++)YP(a[c])&&(r+=Dv(s)+":"+XP(s,a[c])+";");else{var d=Bh(t,e,a);switch(s){case"animation":case"animationName":{r+=Dv(s)+":"+d+";";break}default:r+=s+"{"+d+"}"}}}}return r}var JP=/label:\s*([^\s;{]+)\s*(;|$)/g,ai;function KN(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";ai=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=Bh(n,e,s);else{var a=s;i+=a[0]}for(var u=1;u<t.length;u++)if(i+=Bh(n,e,t[u]),r){var c=s;i+=c[u]}JP.lastIndex=0;for(var d="",m;(m=JP.exec(i))!==null;)d+="-"+m[1];var g=kK(i)+d;return{name:g,styles:i,next:ai}}var VK=function(e){return e()},FK=wS.useInsertionEffect?wS.useInsertionEffect:!1,$K=FK||VK,qN=O.createContext(typeof HTMLElement<"u"?PK({key:"css"}):null);qN.Provider;var BK=function(e){return O.forwardRef(function(n,r){var i=O.useContext(qN);return e(n,i,r)})},UK=O.createContext({}),jK=YG,zK=function(e){return e!=="theme"},ZP=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?jK:zK},eA=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},WK=!1,HK=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return HN(n,r,i),$K(function(){return RK(n,r,i)}),null},GK=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,a;n!==void 0&&(s=n.label,a=n.target);var u=eA(e,n,r),c=u||ZP(i),d=!c("as");return function(){var m=arguments,g=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&g.push("label:"+s+";"),m[0]==null||m[0].raw===void 0)g.push.apply(g,m);else{g.push(m[0][0]);for(var y=m.length,T=1;T<y;T++)g.push(m[T],m[0][T])}var S=BK(function(I,x,k){var F=d&&I.as||i,V="",z=[],j=I;if(I.theme==null){j={};for(var Y in I)j[Y]=I[Y];j.theme=O.useContext(UK)}typeof I.className=="string"?V=xK(x.registered,z,I.className):I.className!=null&&(V=I.className+" ");var D=KN(g.concat(z),x.registered,j);V+=x.key+"-"+D.name,a!==void 0&&(V+=" "+a);var A=d&&u===void 0?ZP(F):c,b={};for(var E in I)d&&E==="as"||A(E)&&(b[E]=I[E]);return b.className=V,k&&(b.ref=k),O.createElement(O.Fragment,null,O.createElement(HK,{cache:x,serialized:D,isStringTag:typeof F=="string"}),O.createElement(F,b))});return S.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",S.defaultProps=e.defaultProps,S.__emotion_real=S,S.__emotion_base=i,S.__emotion_styles=g,S.__emotion_forwardProp=u,Object.defineProperty(S,"toString",{value:function(){return a===void 0&&WK?"NO_COMPONENT_SELECTOR":"."+a}}),S.withComponent=function(I,x){return t(I,Z0({},n,x,{shouldForwardProp:eA(S,x,!0)})).apply(void 0,g)},S}},KK=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],n_=GK.bind();KK.forEach(function(t){n_[t]=n_(t)});/**
 * @mui/styled-engine v6.1.9
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function qK(t,e){return n_(t,e)}function QK(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const tA=[];function nA(t){return tA[0]=t,KN(tA)}const YK=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function XK(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,s=YK(e),a=Object.keys(s);function u(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function c(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-r/100}${n})`}function d(y,T){const S=a.indexOf(T);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${(S!==-1&&typeof e[a[S]]=="number"?e[a[S]]:T)-r/100}${n})`}function m(y){return a.indexOf(y)+1<a.length?d(y,a[a.indexOf(y)+1]):u(y)}function g(y){const T=a.indexOf(y);return T===0?u(a[1]):T===a.length-1?c(a[T]):d(y,a[a.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:u,down:c,between:d,only:m,not:g,unit:n,...i}}const JK={borderRadius:4};function QN(t=8,e=ET({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function ZK(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function YN(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={},...a}=t,u=XK(n),c=QN(i);let d=sr({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...JK,...s}},a);return d=oG(d),d.applyStyles=ZK,d=e.reduce((m,g)=>sr(m,g),d),d.unstable_sxConfig={...ag,...a==null?void 0:a.unstable_sxConfig},d.unstable_sx=function(g){return mu({sx:g,theme:this})},d}function XN(t){const{variants:e,...n}=t,r={variants:e,style:nA(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=nA(i.style))}),r}const e7=YN();function Nv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function t7(t){return t?(e,n)=>n[t]:null}function n7(t,e,n){t.theme=s7(t.theme)?n:t.theme[e]||t.theme}function wp(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>wp(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...s}=n;r=s}return JN(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function JN(t,e,n=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!a.props(r))continue}else for(const u in a.props)if(t[u]!==a.props[u]&&((i=t.ownerState)==null?void 0:i[u])!==a.props[u])continue e;typeof a.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(a.style(r))):n.push(a.style)}return n}function r7(t={}){const{themeId:e,defaultTheme:n=e7,rootShouldForwardProp:r=Nv,slotShouldForwardProp:i=Nv}=t;function s(u){n7(u,e,n)}return(u,c={})=>{QK(u,j=>j.filter(Y=>Y!==mu));const{name:d,slot:m,skipVariantsResolver:g,skipSx:y,overridesResolver:T=t7(a7(m)),...S}=c,I=g!==void 0?g:m&&m!=="Root"&&m!=="root"||!1,x=y||!1;let k=Nv;m==="Root"||m==="root"?k=r:m?k=i:o7(u)&&(k=void 0);const F=qK(u,{shouldForwardProp:k,label:i7(),...S}),V=j=>{if(typeof j=="function"&&j.__emotion_real!==j)return function(D){return wp(D,j)};if(ji(j)){const Y=XN(j);return Y.variants?function(A){return wp(A,Y)}:Y.style}return j},z=(...j)=>{const Y=[],D=j.map(V),A=[];if(Y.push(s),d&&T&&A.push(function($){var ft,pe;const Re=(pe=(ft=$.theme.components)==null?void 0:ft[d])==null?void 0:pe.styleOverrides;if(!Re)return null;const Je={};for(const ne in Re)Je[ne]=wp($,Re[ne]);return T($,Je)}),d&&!I&&A.push(function($){var Je,ft;const N=$.theme,Re=(ft=(Je=N==null?void 0:N.components)==null?void 0:Je[d])==null?void 0:ft.variants;return Re?JN($,Re):null}),x||A.push(mu),Array.isArray(D[0])){const M=D.shift(),$=new Array(Y.length).fill(""),N=new Array(A.length).fill("");let Re;Re=[...$,...M,...N],Re.raw=[...$,...M.raw,...N],Y.unshift(Re)}const b=[...Y,...D,...A],E=F(...b);return u.muiName&&(E.muiName=u.muiName),E};return F.withConfig&&(z.withConfig=F.withConfig),z}}function i7(t,e){return void 0}function s7(t){for(const e in t)return!1;return!0}function o7(t){return typeof t=="string"&&t.charCodeAt(0)>96}function a7(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function AT(t,e=0,n=1){return tG(t,e,n)}function l7(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function mo(t){if(t.type)return t;if(t.charAt(0)==="#")return mo(l7(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ia(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Ia(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const u7=t=>{const e=mo(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},qc=(t,e)=>{try{return u7(t)}catch{return t}};function hg(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function ZN(t){t=mo(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),a=(d,m=(d+n/30)%12)=>i-s*Math.max(Math.min(m-3,9-m,1),-1);let u="rgb";const c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(u+="a",c.push(e[3])),hg({type:u,values:c})}function r_(t){t=mo(t);let e=t.type==="hsl"||t.type==="hsla"?mo(ZN(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function c7(t,e){const n=r_(t),r=r_(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function h7(t,e){return t=mo(t),e=AT(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,hg(t)}function Jf(t,e,n){try{return h7(t,e)}catch{return t}}function xT(t,e){if(t=mo(t),e=AT(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return hg(t)}function rt(t,e,n){try{return xT(t,e)}catch{return t}}function RT(t,e){if(t=mo(t),e=AT(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return hg(t)}function it(t,e,n){try{return RT(t,e)}catch{return t}}function d7(t,e=.15){return r_(t)>.5?xT(t,e):RT(t,e)}function Zf(t,e,n){try{return d7(t,e)}catch{return t}}const f7=O.createContext(void 0);function p7(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?J0(i.defaultProps,r):!i.styleOverrides&&!i.variants?J0(i,r):r}function m7({props:t,name:e}){const n=O.useContext(f7);return p7({props:t,name:e,theme:{components:n}})}const rA={theme:void 0};function g7(t){let e,n;return function(i){let s=e;return(s===void 0||i.theme!==n)&&(rA.theme=i.theme,s=XN(t(rA)),e=s,n=i.theme),s}}function y7(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const iA=(t,e,n,r=[])=>{let i=t;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},v7=(t,e,n)=>{function r(i,s=[],a=[]){Object.entries(i).forEach(([u,c])=>{(!n||n&&!n([...s,u]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...s,u],Array.isArray(c)?[...a,u]:a):e([...s,u],c,a))})}r(t)},_7=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Mv(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},s={},a={};return v7(t,(u,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(u,c))){const m=`--${n?`${n}-`:""}${u.join("-")}`,g=_7(u,c);Object.assign(i,{[m]:g}),iA(s,u,`var(${m})`,d),iA(a,u,`var(${m}, ${g})`,d)}},u=>u[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function w7(t,e={}){const{getSelector:n=x,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:a,defaultColorScheme:u="light",...c}=t,{vars:d,css:m,varsWithDefaults:g}=Mv(c,e);let y=g;const T={},{[u]:S,...I}=s;if(Object.entries(I||{}).forEach(([V,z])=>{const{vars:j,css:Y,varsWithDefaults:D}=Mv(z,e);y=sr(y,D),T[V]={css:Y,vars:j}}),S){const{css:V,vars:z,varsWithDefaults:j}=Mv(S,e);y=sr(y,j),T[u]={css:V,vars:z}}function x(V,z){var Y,D;let j=i;if(i==="class"&&(j=".%s"),i==="data"&&(j="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(j=`[${i}="%s"]`),V){if(j==="media")return t.defaultColorScheme===V?":root":{[`@media (prefers-color-scheme: ${((D=(Y=s[V])==null?void 0:Y.palette)==null?void 0:D.mode)||V})`]:{":root":z}};if(j)return t.defaultColorScheme===V?`:root, ${j.replace("%s",String(V))}`:j.replace("%s",String(V))}return":root"}return{vars:y,generateThemeVars:()=>{let V={...d};return Object.entries(T).forEach(([,{vars:z}])=>{V=sr(V,z)}),V},generateStyleSheets:()=>{var A,b;const V=[],z=t.defaultColorScheme||"light";function j(E,M){Object.keys(M).length&&V.push(typeof E=="string"?{[E]:{...M}}:E)}j(n(void 0,{...m}),m);const{[z]:Y,...D}=T;if(Y){const{css:E}=Y,M=(b=(A=s[z])==null?void 0:A.palette)==null?void 0:b.mode,$=!r&&M?{colorScheme:M,...E}:{...E};j(n(z,{...$}),$)}return Object.entries(D).forEach(([E,{css:M}])=>{var Re,Je;const $=(Je=(Re=s[E])==null?void 0:Re.palette)==null?void 0:Je.mode,N=!r&&$?{colorScheme:$,...M}:{...M};j(n(E,{...N}),N)}),V}}}function T7(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Uh={black:"#000",white:"#fff"},E7={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Il={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Pl={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},$c={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Al={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},xl={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Rl={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function eM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Uh.white,default:Uh.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const S7=eM();function tM(){return{text:{primary:Uh.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Uh.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const sA=tM();function oA(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=RT(t.main,i):e==="dark"&&(t.dark=xT(t.main,s)))}function C7(t="light"){return t==="dark"?{main:Al[200],light:Al[50],dark:Al[400]}:{main:Al[700],light:Al[400],dark:Al[800]}}function I7(t="light"){return t==="dark"?{main:Il[200],light:Il[50],dark:Il[400]}:{main:Il[500],light:Il[300],dark:Il[700]}}function P7(t="light"){return t==="dark"?{main:Pl[500],light:Pl[300],dark:Pl[700]}:{main:Pl[700],light:Pl[400],dark:Pl[800]}}function A7(t="light"){return t==="dark"?{main:xl[400],light:xl[300],dark:xl[700]}:{main:xl[700],light:xl[500],dark:xl[900]}}function x7(t="light"){return t==="dark"?{main:Rl[400],light:Rl[300],dark:Rl[700]}:{main:Rl[800],light:Rl[500],dark:Rl[900]}}function R7(t="light"){return t==="dark"?{main:$c[400],light:$c[300],dark:$c[700]}:{main:"#ed6c02",light:$c[500],dark:$c[900]}}function kT(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,s=t.primary||C7(e),a=t.secondary||I7(e),u=t.error||P7(e),c=t.info||A7(e),d=t.success||x7(e),m=t.warning||R7(e);function g(I){return c7(I,sA.text.primary)>=n?sA.text.primary:S7.text.primary}const y=({color:I,name:x,mainShade:k=500,lightShade:F=300,darkShade:V=700})=>{if(I={...I},!I.main&&I[k]&&(I.main=I[k]),!I.hasOwnProperty("main"))throw new Error(Ia(11,x?` (${x})`:"",k));if(typeof I.main!="string")throw new Error(Ia(12,x?` (${x})`:"",JSON.stringify(I.main)));return oA(I,"light",F,r),oA(I,"dark",V,r),I.contrastText||(I.contrastText=g(I.main)),I};let T;return e==="light"?T=eM():e==="dark"&&(T=tM()),sr({common:{...Uh},mode:e,primary:y({color:s,name:"primary"}),secondary:y({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:u,name:"error"}),warning:y({color:m,name:"warning"}),info:y({color:c,name:"info"}),success:y({color:d,name:"success"}),grey:E7,contrastThreshold:n,getContrastText:g,augmentColor:y,tonalOffset:r,...T},i)}function k7(t){const e={};return Object.entries(t).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function b7(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function D7(t){return Math.round(t*1e5)/1e5}const aA={textTransform:"uppercase"},lA='"Roboto", "Helvetica", "Arial", sans-serif';function N7(t,e){const{fontFamily:n=lA,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:d,pxToRem:m,...g}=typeof e=="function"?e(t):e,y=r/14,T=m||(x=>`${x/c*y}rem`),S=(x,k,F,V,z)=>({fontFamily:n,fontWeight:x,fontSize:T(k),lineHeight:F,...n===lA?{letterSpacing:`${D7(V/k)}em`}:{},...z,...d}),I={h1:S(i,96,1.167,-1.5),h2:S(i,60,1.2,-.5),h3:S(s,48,1.167,0),h4:S(s,34,1.235,.25),h5:S(s,24,1.334,0),h6:S(a,20,1.6,.15),subtitle1:S(s,16,1.75,.15),subtitle2:S(a,14,1.57,.1),body1:S(s,16,1.5,.15),body2:S(s,14,1.43,.15),button:S(a,14,1.75,.4,aA),caption:S(s,12,1.66,.4),overline:S(s,12,2.66,1,aA),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sr({htmlFontSize:c,pxToRem:T,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:u,...I},g,{clone:!1})}const M7=.2,O7=.14,L7=.12;function gt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${M7})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${O7})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${L7})`].join(",")}const V7=["none",gt(0,2,1,-1,0,1,1,0,0,1,3,0),gt(0,3,1,-2,0,2,2,0,0,1,5,0),gt(0,3,3,-2,0,3,4,0,0,1,8,0),gt(0,2,4,-1,0,4,5,0,0,1,10,0),gt(0,3,5,-1,0,5,8,0,0,1,14,0),gt(0,3,5,-1,0,6,10,0,0,1,18,0),gt(0,4,5,-2,0,7,10,1,0,2,16,1),gt(0,5,5,-3,0,8,10,1,0,3,14,2),gt(0,5,6,-3,0,9,12,1,0,3,16,2),gt(0,6,6,-3,0,10,14,1,0,4,18,3),gt(0,6,7,-4,0,11,15,1,0,4,20,3),gt(0,7,8,-4,0,12,17,2,0,5,22,4),gt(0,7,8,-4,0,13,19,2,0,5,24,4),gt(0,7,9,-4,0,14,21,2,0,5,26,4),gt(0,8,9,-5,0,15,22,2,0,6,28,5),gt(0,8,10,-5,0,16,24,2,0,6,30,5),gt(0,8,11,-5,0,17,26,2,0,6,32,5),gt(0,9,11,-5,0,18,28,2,0,7,34,6),gt(0,9,12,-6,0,19,29,2,0,7,36,6),gt(0,10,13,-6,0,20,31,3,0,8,38,7),gt(0,10,13,-6,0,21,33,3,0,8,40,7),gt(0,10,14,-6,0,22,35,3,0,8,42,7),gt(0,11,14,-7,0,23,36,3,0,9,44,8),gt(0,11,15,-7,0,24,38,3,0,9,46,8)],F7={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},$7={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function uA(t){return`${Math.round(t)}ms`}function B7(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function U7(t){const e={...F7,...t.easing},n={...$7,...t.duration};return{getAutoHeightDuration:B7,create:(i=["all"],s={})=>{const{duration:a=n.standard,easing:u=e.easeInOut,delay:c=0,...d}=s;return(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof a=="string"?a:uA(a)} ${u} ${typeof c=="string"?c:uA(c)}`).join(",")},...t,easing:e,duration:n}}const j7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function z7(t){return ji(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function nM(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[a,u]=i[s];!z7(u)||a.startsWith("unstable_")?delete r[a]:ji(u)&&(r[a]={...u},n(r[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function i_(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:s={},transitions:a={},typography:u={},shape:c,...d}=t;if(t.vars)throw new Error(Ia(20));const m=kT(s),g=YN(t);let y=sr(g,{mixins:b7(g.breakpoints,r),palette:m,shadows:V7.slice(),typography:N7(m,u),transitions:U7(a),zIndex:{...j7}});return y=sr(y,d),y=e.reduce((T,S)=>sr(T,S),y),y.unstable_sxConfig={...ag,...d==null?void 0:d.unstable_sxConfig},y.unstable_sx=function(S){return mu({sx:S,theme:this})},y.toRuntimeSource=nM,y}function W7(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const H7=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=W7(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function rM(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function iM(t){return t==="dark"?H7:[]}function G7(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,s=kT(e);return{palette:s,opacity:{...rM(s.mode),...n},overlays:r||iM(s.mode),...i}}function K7(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const q7=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Q7=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return q7(t.cssVarPrefix).forEach(u=>{a[u]=n[u],delete n[u]}),s==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",e)]:a,[`${r}, ${s.replace("%s",e)}`]:n}:{[r]:{...n,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(s)return s.replace("%s",String(e))}return r};function Y7(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function J(t,e,n){!t[e]&&n&&(t[e]=n)}function Qc(t){return!t||!t.startsWith("hsl")?t:ZN(t)}function Bi(t,e){`${e}Channel`in t||(t[`${e}Channel`]=qc(Qc(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function X7(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const si=t=>{try{return t()}catch{}},J7=(t="mui")=>y7(t);function Ov(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=G7({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...a}=i_({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:s,opacity:{...rM(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||iM(i)},a}function Z7(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=K7,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...d}=t,m=Object.keys(n)[0],g=r||(n.light&&m!=="light"?"light":m),y=J7(s),{[g]:T,light:S,dark:I,...x}=n,k={...x};let F=T;if((g==="dark"&&!("dark"in n)||g==="light"&&!("light"in n))&&(F=!0),!F)throw new Error(Ia(21,g));const V=Ov(k,F,d,g);S&&!k.light&&Ov(k,S,void 0,"light"),I&&!k.dark&&Ov(k,I,void 0,"dark");let z={defaultColorScheme:g,...V,cssVarPrefix:s,colorSchemeSelector:u,rootSelector:c,getCssVar:y,colorSchemes:k,font:{...k7(V.typography),...V.font},spacing:X7(d.spacing)};Object.keys(z.colorSchemes).forEach(b=>{const E=z.colorSchemes[b].palette,M=$=>{const N=$.split("-"),Re=N[1],Je=N[2];return y($,E[Re][Je])};if(E.mode==="light"&&(J(E.common,"background","#fff"),J(E.common,"onBackground","#000")),E.mode==="dark"&&(J(E.common,"background","#000"),J(E.common,"onBackground","#fff")),Y7(E,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),E.mode==="light"){J(E.Alert,"errorColor",rt(E.error.light,.6)),J(E.Alert,"infoColor",rt(E.info.light,.6)),J(E.Alert,"successColor",rt(E.success.light,.6)),J(E.Alert,"warningColor",rt(E.warning.light,.6)),J(E.Alert,"errorFilledBg",M("palette-error-main")),J(E.Alert,"infoFilledBg",M("palette-info-main")),J(E.Alert,"successFilledBg",M("palette-success-main")),J(E.Alert,"warningFilledBg",M("palette-warning-main")),J(E.Alert,"errorFilledColor",si(()=>E.getContrastText(E.error.main))),J(E.Alert,"infoFilledColor",si(()=>E.getContrastText(E.info.main))),J(E.Alert,"successFilledColor",si(()=>E.getContrastText(E.success.main))),J(E.Alert,"warningFilledColor",si(()=>E.getContrastText(E.warning.main))),J(E.Alert,"errorStandardBg",it(E.error.light,.9)),J(E.Alert,"infoStandardBg",it(E.info.light,.9)),J(E.Alert,"successStandardBg",it(E.success.light,.9)),J(E.Alert,"warningStandardBg",it(E.warning.light,.9)),J(E.Alert,"errorIconColor",M("palette-error-main")),J(E.Alert,"infoIconColor",M("palette-info-main")),J(E.Alert,"successIconColor",M("palette-success-main")),J(E.Alert,"warningIconColor",M("palette-warning-main")),J(E.AppBar,"defaultBg",M("palette-grey-100")),J(E.Avatar,"defaultBg",M("palette-grey-400")),J(E.Button,"inheritContainedBg",M("palette-grey-300")),J(E.Button,"inheritContainedHoverBg",M("palette-grey-A100")),J(E.Chip,"defaultBorder",M("palette-grey-400")),J(E.Chip,"defaultAvatarColor",M("palette-grey-700")),J(E.Chip,"defaultIconColor",M("palette-grey-700")),J(E.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),J(E.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),J(E.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),J(E.LinearProgress,"primaryBg",it(E.primary.main,.62)),J(E.LinearProgress,"secondaryBg",it(E.secondary.main,.62)),J(E.LinearProgress,"errorBg",it(E.error.main,.62)),J(E.LinearProgress,"infoBg",it(E.info.main,.62)),J(E.LinearProgress,"successBg",it(E.success.main,.62)),J(E.LinearProgress,"warningBg",it(E.warning.main,.62)),J(E.Skeleton,"bg",`rgba(${M("palette-text-primaryChannel")} / 0.11)`),J(E.Slider,"primaryTrack",it(E.primary.main,.62)),J(E.Slider,"secondaryTrack",it(E.secondary.main,.62)),J(E.Slider,"errorTrack",it(E.error.main,.62)),J(E.Slider,"infoTrack",it(E.info.main,.62)),J(E.Slider,"successTrack",it(E.success.main,.62)),J(E.Slider,"warningTrack",it(E.warning.main,.62));const $=Zf(E.background.default,.8);J(E.SnackbarContent,"bg",$),J(E.SnackbarContent,"color",si(()=>E.getContrastText($))),J(E.SpeedDialAction,"fabHoverBg",Zf(E.background.paper,.15)),J(E.StepConnector,"border",M("palette-grey-400")),J(E.StepContent,"border",M("palette-grey-400")),J(E.Switch,"defaultColor",M("palette-common-white")),J(E.Switch,"defaultDisabledColor",M("palette-grey-100")),J(E.Switch,"primaryDisabledColor",it(E.primary.main,.62)),J(E.Switch,"secondaryDisabledColor",it(E.secondary.main,.62)),J(E.Switch,"errorDisabledColor",it(E.error.main,.62)),J(E.Switch,"infoDisabledColor",it(E.info.main,.62)),J(E.Switch,"successDisabledColor",it(E.success.main,.62)),J(E.Switch,"warningDisabledColor",it(E.warning.main,.62)),J(E.TableCell,"border",it(Jf(E.divider,1),.88)),J(E.Tooltip,"bg",Jf(E.grey[700],.92))}if(E.mode==="dark"){J(E.Alert,"errorColor",it(E.error.light,.6)),J(E.Alert,"infoColor",it(E.info.light,.6)),J(E.Alert,"successColor",it(E.success.light,.6)),J(E.Alert,"warningColor",it(E.warning.light,.6)),J(E.Alert,"errorFilledBg",M("palette-error-dark")),J(E.Alert,"infoFilledBg",M("palette-info-dark")),J(E.Alert,"successFilledBg",M("palette-success-dark")),J(E.Alert,"warningFilledBg",M("palette-warning-dark")),J(E.Alert,"errorFilledColor",si(()=>E.getContrastText(E.error.dark))),J(E.Alert,"infoFilledColor",si(()=>E.getContrastText(E.info.dark))),J(E.Alert,"successFilledColor",si(()=>E.getContrastText(E.success.dark))),J(E.Alert,"warningFilledColor",si(()=>E.getContrastText(E.warning.dark))),J(E.Alert,"errorStandardBg",rt(E.error.light,.9)),J(E.Alert,"infoStandardBg",rt(E.info.light,.9)),J(E.Alert,"successStandardBg",rt(E.success.light,.9)),J(E.Alert,"warningStandardBg",rt(E.warning.light,.9)),J(E.Alert,"errorIconColor",M("palette-error-main")),J(E.Alert,"infoIconColor",M("palette-info-main")),J(E.Alert,"successIconColor",M("palette-success-main")),J(E.Alert,"warningIconColor",M("palette-warning-main")),J(E.AppBar,"defaultBg",M("palette-grey-900")),J(E.AppBar,"darkBg",M("palette-background-paper")),J(E.AppBar,"darkColor",M("palette-text-primary")),J(E.Avatar,"defaultBg",M("palette-grey-600")),J(E.Button,"inheritContainedBg",M("palette-grey-800")),J(E.Button,"inheritContainedHoverBg",M("palette-grey-700")),J(E.Chip,"defaultBorder",M("palette-grey-700")),J(E.Chip,"defaultAvatarColor",M("palette-grey-300")),J(E.Chip,"defaultIconColor",M("palette-grey-300")),J(E.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),J(E.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),J(E.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),J(E.LinearProgress,"primaryBg",rt(E.primary.main,.5)),J(E.LinearProgress,"secondaryBg",rt(E.secondary.main,.5)),J(E.LinearProgress,"errorBg",rt(E.error.main,.5)),J(E.LinearProgress,"infoBg",rt(E.info.main,.5)),J(E.LinearProgress,"successBg",rt(E.success.main,.5)),J(E.LinearProgress,"warningBg",rt(E.warning.main,.5)),J(E.Skeleton,"bg",`rgba(${M("palette-text-primaryChannel")} / 0.13)`),J(E.Slider,"primaryTrack",rt(E.primary.main,.5)),J(E.Slider,"secondaryTrack",rt(E.secondary.main,.5)),J(E.Slider,"errorTrack",rt(E.error.main,.5)),J(E.Slider,"infoTrack",rt(E.info.main,.5)),J(E.Slider,"successTrack",rt(E.success.main,.5)),J(E.Slider,"warningTrack",rt(E.warning.main,.5));const $=Zf(E.background.default,.98);J(E.SnackbarContent,"bg",$),J(E.SnackbarContent,"color",si(()=>E.getContrastText($))),J(E.SpeedDialAction,"fabHoverBg",Zf(E.background.paper,.15)),J(E.StepConnector,"border",M("palette-grey-600")),J(E.StepContent,"border",M("palette-grey-600")),J(E.Switch,"defaultColor",M("palette-grey-300")),J(E.Switch,"defaultDisabledColor",M("palette-grey-600")),J(E.Switch,"primaryDisabledColor",rt(E.primary.main,.55)),J(E.Switch,"secondaryDisabledColor",rt(E.secondary.main,.55)),J(E.Switch,"errorDisabledColor",rt(E.error.main,.55)),J(E.Switch,"infoDisabledColor",rt(E.info.main,.55)),J(E.Switch,"successDisabledColor",rt(E.success.main,.55)),J(E.Switch,"warningDisabledColor",rt(E.warning.main,.55)),J(E.TableCell,"border",rt(Jf(E.divider,1),.68)),J(E.Tooltip,"bg",Jf(E.grey[700],.92))}Bi(E.background,"default"),Bi(E.background,"paper"),Bi(E.common,"background"),Bi(E.common,"onBackground"),Bi(E,"divider"),Object.keys(E).forEach($=>{const N=E[$];N&&typeof N=="object"&&(N.main&&J(E[$],"mainChannel",qc(Qc(N.main))),N.light&&J(E[$],"lightChannel",qc(Qc(N.light))),N.dark&&J(E[$],"darkChannel",qc(Qc(N.dark))),N.contrastText&&J(E[$],"contrastTextChannel",qc(Qc(N.contrastText))),$==="text"&&(Bi(E[$],"primary"),Bi(E[$],"secondary")),$==="action"&&(N.active&&Bi(E[$],"active"),N.selected&&Bi(E[$],"selected")))})}),z=e.reduce((b,E)=>sr(b,E),z);const j={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:Q7(z)},{vars:Y,generateThemeVars:D,generateStyleSheets:A}=w7(z,j);return z.vars=Y,Object.entries(z.colorSchemes[z.defaultColorScheme]).forEach(([b,E])=>{z[b]=E}),z.generateThemeVars=D,z.generateStyleSheets=A,z.generateSpacing=function(){return QN(d.spacing,ET(this))},z.getColorSchemeSelector=T7(u),z.spacing=z.generateSpacing(),z.shouldSkipGeneratingVar=a,z.unstable_sxConfig={...ag,...d==null?void 0:d.unstable_sxConfig},z.unstable_sx=function(E){return mu({sx:E,theme:this})},z.toRuntimeSource=nM,z}function cA(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:kT({...n===!0?{}:n.palette,mode:e})})}function eq(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...a}=t,u=s||"light",c=i==null?void 0:i[u],d={...i,...n?{[u]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return i_(t,...e);let m=n;"palette"in t||d[u]&&(d[u]!==!0?m=d[u].palette:u==="dark"&&(m={mode:"dark"}));const g=i_({...t,palette:m},...e);return g.defaultColorScheme=u,g.colorSchemes=d,g.palette.mode==="light"&&(g.colorSchemes.light={...d.light!==!0&&d.light,palette:g.palette},cA(g,"dark",d.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:g.palette},cA(g,"light",d.light)),g}return!n&&!("light"in d)&&u==="light"&&(d.light=!0),Z7({...a,colorSchemes:d,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const tq=eq(),nq="$$material";function rq(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const iq=t=>rq(t)&&t!=="classes",sq=r7({themeId:nq,defaultTheme:tq,rootShouldForwardProp:iq}),oq=g7;function aq(t){return m7(t)}function lq(t){return MN("MuiSvgIcon",t)}eG("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const uq=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${pu(e)}`,`fontSize${pu(n)}`]};return Y8(i,lq,r)},cq=sq("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${pu(n.color)}`],e[`fontSize${pu(n.fontSize)}`]]}})(oq(({theme:t})=>{var e,n,r,i,s,a,u,c,d,m,g,y,T,S;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:I=>!I.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(u=t.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((m=(d=t.typography)==null?void 0:d.pxToRem)==null?void 0:m.call(d,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,I])=>I&&I.main).map(([I])=>{var x,k;return{props:{color:I},style:{color:(k=(x=(t.vars??t).palette)==null?void 0:x[I])==null?void 0:k.main}}}),{props:{color:"action"},style:{color:(y=(g=(t.vars??t).palette)==null?void 0:g.action)==null?void 0:y.active}},{props:{color:"disabled"},style:{color:(S=(T=(t.vars??t).palette)==null?void 0:T.action)==null?void 0:S.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),cm=O.forwardRef(function(e,n){const r=aq({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:u="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:m=!1,titleAccess:g,viewBox:y="0 0 24 24",...T}=r,S=O.isValidElement(i)&&i.type==="svg",I={...r,color:a,component:u,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:y,hasSvgAsChild:S},x={};m||(x.viewBox=y);const k=uq(I);return Q.jsxs(cq,{as:u,className:nG(k.root,s),focusable:"false",color:d,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:n,...x,...T,...S&&i.props,ownerState:I,children:[S?i.props.children:i,g?Q.jsx("title",{children:g}):null]})});cm&&(cm.muiName="SvgIcon");function Mu(t,e){function n(r,i){return Q.jsx(cm,{"data-testid":`${e}Icon`,ref:i,...r,children:t})}return n.muiName=cm.muiName,O.memo(O.forwardRef(n))}const sM=Mu(Q.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");function yu({children:t,type:e,onClick:n}){const[r,i]=O.useState("");return O.useEffect(()=>{e=="primary"?i("calendar-button-primary"):e=="secondary"?i("calendar-button-secondary"):i("calendar-button-red")}),Q.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),n&&n(s)},className:`calendar-button ${r}`,children:t})}function hq({handleCloseAuthView:t,handleSignUpClick:e}){const[n,r]=O.useState(""),[i,s]=O.useState(""),[a,u]=O.useState(""),c=qh(),[d,m]=O.useState(!1),g=async()=>{try{m(!0);const S=(await Z$(cu,n,i)).user;localStorage.setItem("userId",S.uid),t(),c("/reminder")}catch(T){u(T.message.slice(10,-1))}finally{m(!1)}},y=async()=>{try{const T=new li,I=(await MR(cu,T)).user;localStorage.setItem("userId",I.uid),t(),c("/reminder")}catch(T){u(T.message)}};return Q.jsx(Cr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"auth-bg",children:Q.jsxs("div",{className:"auth-container",children:[Q.jsx("img",{src:S_,width:100,alt:"Logo"}),Q.jsxs("div",{className:"auth-fields",children:[Q.jsx("p",{style:{fontWeight:"bold"},children:"Log In"}),Q.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:T=>r(T.target.value)}),Q.jsx("input",{type:"password",placeholder:"Password",value:i,onChange:T=>s(T.target.value)}),Q.jsx(Cr.div,{initial:{opacity:0,scale:.8},animate:{opacity:d?1:0,scale:d?1:.8},exit:{opacity:0,scale:.8},transition:{duration:.3,ease:"easeInOut"},style:{width:"100%",height:"60px",display:"flex",justifyContent:"center",alignItems:"center"},children:Q.jsx(DN,{speedMultiplier:2,color:"#5370BE"})}),Q.jsx(Cr.div,{className:"error-msg",animate:{opacity:a!==""?1:0,scale:a!==""?1:.8},children:a&&Q.jsx("h1",{className:"error-msg-h1",children:a})}),Q.jsxs("div",{className:"buttons",children:[Q.jsx(yu,{type:"primary",onClick:y,children:Q.jsx(sM,{})}),Q.jsx(ya,{type:"secondary",onClick:g,children:"Proceed"}),Q.jsx(ya,{type:"red",onClick:t,children:"Close"}),Q.jsx("a",{href:"#",onClick:e,children:"Don't have an account yet?"})]})]})]})})}function dq({handleCloseAuthView:t,handleLogInClick:e}){const[n,r]=O.useState(""),[i,s]=O.useState(""),[a,u]=O.useState(""),[c,d]=O.useState(!1),m=qh(),g=async()=>{try{d(!0),await J$(cu,n,i),e()}catch(T){u(T.message.slice(10,-1)),d(!1)}},y=async()=>{try{const T=new li,I=(await MR(cu,T)).user;m("/reminder")}catch(T){u(T.message)}};return Q.jsx(Cr.div,{className:"auth-bg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:Q.jsxs("div",{className:"auth-container",children:[Q.jsx("img",{src:S_,width:100,alt:"Logo"}),Q.jsxs("form",{className:"auth-fields",children:[Q.jsx("p",{style:{fontWeight:"bold"},children:"Sign Up"}),Q.jsx("input",{onChange:T=>r(T.target.value),id:"email",type:"text",placeholder:"login"}),Q.jsx("input",{onChange:T=>s(T.target.value),id:"pass",type:"password",placeholder:"password"}),Q.jsx(Cr.div,{initial:{opacity:0,scale:.8},animate:{opacity:c?1:0,scale:c?1:.8},exit:{opacity:0,scale:.8},transition:{duration:.3,ease:"easeInOut"},style:{width:"100%",height:"60px",display:"flex",justifyContent:"center",alignItems:"center"},children:Q.jsx(DN,{speedMultiplier:2,color:"#5370BE"})}),Q.jsx(Cr.div,{className:"error-msg",animate:{opacity:a!==""?1:0,scale:a!==""?1:.8},children:a&&Q.jsx("h1",{className:"error-msg-h1",children:a})}),Q.jsxs("div",{className:"buttons",children:[Q.jsx(yu,{type:"primary",onClick:y,children:Q.jsx(sM,{})}),Q.jsx(ya,{type:"secondary",onClick:g,children:"Proceed"}),Q.jsx(ya,{type:"red",onClick:t,children:"Close"}),Q.jsx("a",{href:"#",onClick:e,children:"Already have an account?"})]})]})]})})}function oM(){O.useEffect(()=>{localStorage.removeItem("currentDate")},[oM]);const t=O.useRef(null),[e,n]=O.useState(null),r=()=>{n("sign_up")},i=()=>{n("log_in")},s=()=>{n(null)};return Q.jsxs("div",{className:"main-analyzes-bg",children:[Q.jsxs(Cr.div,{initial:{y:-50},animate:{y:0},transition:{type:"spring",damping:10,mass:.75,stiffness:100},className:"container-centered",children:[Q.jsx(Cr.div,{whileHover:{scale:1.1},whileTap:{scale:.9},transition:{type:"spring",stiffness:600,damping:10},whileDrag:{scale:1.2},drag:!0,dragConstraints:t,className:"images-container",ref:t,children:Q.jsx(Cr.img,{transition:{duration:.3},src:S_,width:152,alt:"Logo",className:"logo front-img"})}),Q.jsx("div",{className:"title-container",children:Q.jsx("p",{className:"title-name","data-text":"MediPlanner",children:"MediPlanner"})}),Q.jsxs("p",{className:"title-p",children:["Track your"," ",Q.jsx("span",{className:"title-span",children:"health"})," effortlessly with this intuitive platform. Upload"," ",Q.jsx("span",{className:"title-span",children:"medical test results"}),","," ",Q.jsx("span",{className:"title-span",children:"monitor your progress"}),", and"," ",Q.jsx("span",{className:"title-span",children:"plan future checkups"}),"."]}),Q.jsxs("div",{className:"button-cont",children:[Q.jsx(ya,{type:"secondary",onClick:r,children:"Sign Up"}),Q.jsx(ya,{type:"primary",onClick:i,children:"Log In"})]})]}),Q.jsxs(_T,{children:[(e==="sign_up"||e==="log_in")&&Q.jsx(Cr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"blurred-background"}),e==="sign_up"&&Q.jsx(dq,{handleCloseAuthView:s,handleLogInClick:i}),e==="log_in"&&Q.jsx(hq,{handleCloseAuthView:s,handleSignUpClick:r})]})]})}const fq=Mu(Q.jsx("path",{d:"M19 3H4.99C3.89 3 3 3.9 3 5l.01 14c0 1.1.89 2 1.99 2h10l6-6V5c0-1.1-.9-2-2-2M7 8h10v2H7zm5 6H7v-2h5zm2 5.5V14h5.5z"}),"StickyNote2"),pq=Mu(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),mq=Mu(Q.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");function gq(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function dg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const s_=t=>Array.isArray(t);function aM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function jh(t){return typeof t=="string"||Array.isArray(t)}function hA(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function bT(t,e,n,r){if(typeof e=="function"){const[i,s]=hA(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=hA(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function fg(t,e,n){const r=t.getProps();return bT(r,e,n!==void 0?n:r.custom,t)}const DT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],NT=["initial",...DT],yd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ba=new Set(yd),rs=t=>t*1e3,is=t=>t/1e3,yq={type:"spring",stiffness:500,damping:25,restSpeed:10},vq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_q={type:"keyframes",duration:.8},wq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tq=(t,{keyframes:e})=>e.length>2?_q:ba.has(t)?t.startsWith("scale")?vq(e[1]):yq:wq;function MT(t,e){return t?t[e]||t.default||t:void 0}const Eq={skipAnimations:!1,useManualTiming:!1},Sq=t=>t!==null;function pg(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Sq),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const An=t=>t;function Cq(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(d){s.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,m=!1,g=!1)=>{const T=g&&r?e:n;return m&&s.add(d),T.has(d)||T.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(a=d,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(u),r=!1,i&&(i=!1,c.process(d))}};return c}const ep=["read","resolveKeyframes","update","preRender","render","postRender"],Iq=40;function lM(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=ep.reduce((k,F)=>(k[F]=Cq(s),k),{}),{read:u,resolveKeyframes:c,update:d,preRender:m,render:g,postRender:y}=a,T=()=>{const k=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,Iq),1),i.timestamp=k,i.isProcessing=!0,u.process(i),c.process(i),d.process(i),m.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(T))},S=()=>{n=!0,r=!0,i.isProcessing||t(T)};return{schedule:ep.reduce((k,F)=>{const V=a[F];return k[F]=(z,j=!1,Y=!1)=>(n||S(),V.schedule(z,j,Y)),k},{}),cancel:k=>{for(let F=0;F<ep.length;F++)a[ep[F]].cancel(k)},state:i,steps:a}}const{schedule:tt,cancel:go,state:hn,steps:Lv}=lM(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0),uM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Pq=1e-7,Aq=12;function xq(t,e,n,r,i){let s,a,u=0;do a=e+(n-e)/2,s=uM(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Pq&&++u<Aq);return a}function vd(t,e,n,r){if(t===e&&n===r)return An;const i=s=>xq(s,0,1,t,n);return s=>s===0||s===1?s:uM(i(s),e,r)}const cM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hM=t=>e=>1-t(1-e),dM=vd(.33,1.53,.69,.99),OT=hM(dM),fM=cM(OT),pM=t=>(t*=2)<1?.5*OT(t):.5*(2-Math.pow(2,-10*(t-1))),LT=t=>1-Math.sin(Math.acos(t)),mM=hM(LT),gM=cM(LT),yM=t=>/^0[^.\s]+$/u.test(t);function Rq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yM(t):!0}let o_=An;const vM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),_M=t=>e=>typeof e=="string"&&e.startsWith(t),wM=_M("--"),kq=_M("var(--"),VT=t=>kq(t)?bq.test(t.split("/*")[0].trim()):!1,bq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nq(t){const e=Dq.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function TM(t,e,n=1){const[r,i]=Nq(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return vM(a)?parseFloat(a):a}return VT(i)?TM(i,e,n+1):i}const fs=(t,e,n)=>n>e?e:n<t?t:n,Ou={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zh={...Ou,transform:t=>fs(0,1,t)},tp={...Ou,default:1},_d=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hs=_d("deg"),gi=_d("%"),Ee=_d("px"),Mq=_d("vh"),Oq=_d("vw"),dA={...gi,parse:t=>gi.parse(t)/100,transform:t=>gi.transform(t*100)},Lq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fA=t=>t===Ou||t===Ee,pA=(t,e)=>parseFloat(t.split(", ")[e]),mA=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return pA(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?pA(s[1],t):0}},Vq=new Set(["x","y","z"]),Fq=yd.filter(t=>!Vq.has(t));function $q(t){const e=[];return Fq.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:mA(4,13),y:mA(5,14)};vu.translateX=vu.x;vu.translateY=vu.y;const EM=t=>e=>e.test(t),Bq={test:t=>t==="auto",parse:t=>t},SM=[Ou,Ee,gi,Hs,Oq,Mq,Bq],gA=t=>SM.find(EM(t)),ga=new Set;let a_=!1,l_=!1;function CM(){if(l_){const t=Array.from(ga).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=$q(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var u;(u=r.getValue(s))===null||u===void 0||u.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}l_=!1,a_=!1,ga.forEach(t=>t.complete()),ga.clear()}function IM(){ga.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(l_=!0)})}function Uq(){IM(),CM()}class FT{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ga.add(this),a_||(a_=!0,tt.read(IM),tt.resolveKeyframes(CM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ga.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ga.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dh=t=>Math.round(t*1e5)/1e5,$T=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jq(t){return t==null}const zq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,BT=(t,e)=>n=>!!(typeof n=="string"&&zq.test(n)&&n.startsWith(t)||e&&!jq(n)&&Object.prototype.hasOwnProperty.call(n,e)),PM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,u]=r.match($T);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},Wq=t=>fs(0,255,t),Vv={...Ou,transform:t=>Math.round(Wq(t))},ha={test:BT("rgb","red"),parse:PM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Vv.transform(t)+", "+Vv.transform(e)+", "+Vv.transform(n)+", "+dh(zh.transform(r))+")"};function Hq(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const u_={test:BT("#"),parse:Hq,transform:ha.transform},Ul={test:BT("hsl","hue"),parse:PM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+gi.transform(dh(e))+", "+gi.transform(dh(n))+", "+dh(zh.transform(r))+")"},Tn={test:t=>ha.test(t)||u_.test(t)||Ul.test(t),parse:t=>ha.test(t)?ha.parse(t):Ul.test(t)?Ul.parse(t):u_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ha.transform(t):Ul.transform(t)},Gq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Kq(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match($T))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Gq))===null||n===void 0?void 0:n.length)||0)>0}const AM="number",xM="color",qq="var",Qq="var(",yA="${}",Yq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(Yq,c=>(Tn.test(c)?(r.color.push(s),i.push(xM),n.push(Tn.parse(c))):c.startsWith(Qq)?(r.var.push(s),i.push(qq),n.push(c)):(r.number.push(s),i.push(AM),n.push(parseFloat(c))),++s,yA)).split(yA);return{values:n,split:u,indexes:r,types:i}}function RM(t){return Wh(t).values}function kM(t){const{split:e,types:n}=Wh(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const u=n[a];u===AM?s+=dh(i[a]):u===xM?s+=Tn.transform(i[a]):s+=i[a]}return s}}const Xq=t=>typeof t=="number"?0:t;function Jq(t){const e=RM(t);return kM(t)(e.map(Xq))}const yo={test:Kq,parse:RM,createTransformer:kM,getAnimatableNone:Jq},Zq=new Set(["brightness","contrast","saturate","opacity"]);function eQ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match($T)||[];if(!r)return t;const i=n.replace(r,"");let s=Zq.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const tQ=/\b([a-z-]*)\(.*?\)/gu,c_={...yo,getAnimatableNone:t=>{const e=t.match(tQ);return e?e.map(eQ).join(" "):t}},nQ={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee},rQ={rotate:Hs,rotateX:Hs,rotateY:Hs,rotateZ:Hs,scale:tp,scaleX:tp,scaleY:tp,scaleZ:tp,skew:Hs,skewX:Hs,skewY:Hs,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:zh,originX:dA,originY:dA,originZ:Ee},vA={...Ou,transform:Math.round},UT={...nQ,...rQ,zIndex:vA,size:Ee,fillOpacity:zh,strokeOpacity:zh,numOctaves:vA},iQ={...UT,color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:c_,WebkitFilter:c_},jT=t=>iQ[t];function bM(t,e){let n=jT(t);return n!==c_&&(n=yo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sQ=new Set(["auto","none","0"]);function oQ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!sQ.has(s)&&Wh(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=bM(n,i)}class DM extends FT{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),VT(d))){const m=TM(d,n.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Lq.has(r)||e.length!==2)return;const[i,s]=e,a=gA(i),u=gA(s);if(a!==u)if(fA(a)&&fA(u))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Rq(e[i])&&r.push(i);r.length&&oQ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,u=i[a];i[a]=vu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function zT(t){return typeof t=="function"}let Tp;function aQ(){Tp=void 0}const yi={now:()=>(Tp===void 0&&yi.set(hn.isProcessing||Eq.useManualTiming?hn.timestamp:performance.now()),Tp),set:t=>{Tp=t,queueMicrotask(aQ)}},_A=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yo.test(t)||t==="0")&&!t.startsWith("url("));function lQ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function uQ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=_A(i,e),u=_A(s,e);return!a||!u?!1:lQ(t)||(n==="spring"||zT(n))&&r}const cQ=40;class NM{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yi.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cQ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Uq(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=yi.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:u,onUpdate:c,isGenerator:d}=this.options;if(!d&&!uQ(e,r,i,s))if(a)this.options.duration=0;else{c==null||c(pg(e,this.options,n)),u==null||u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const _u=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},MM=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(_u(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function OM(t,e){return e?t*(1e3/e):0}const hQ=5;function LM(t,e,n){const r=Math.max(e-hQ,0);return OM(n-t(r),e-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fv=.001;function dQ({duration:t=At.duration,bounce:e=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let i,s,a=1-e;a=fs(At.minDamping,At.maxDamping,a),t=fs(At.minDuration,At.maxDuration,is(t)),a<1?(i=d=>{const m=d*a,g=m*t,y=m-n,T=h_(d,a),S=Math.exp(-g);return Fv-y/T*S},s=d=>{const g=d*a*t,y=g*n+n,T=Math.pow(a,2)*Math.pow(d,2)*t,S=Math.exp(-g),I=h_(Math.pow(d,2),a);return(-i(d)+Fv>0?-1:1)*((y-T)*S)/I}):(i=d=>{const m=Math.exp(-d*t),g=(d-n)*t+1;return-Fv+m*g},s=d=>{const m=Math.exp(-d*t),g=(n-d)*(t*t);return m*g});const u=5/t,c=pQ(i,s,u);if(t=rs(t),isNaN(c))return{stiffness:At.stiffness,damping:At.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const fQ=12;function pQ(t,e,n){let r=n;for(let i=1;i<fQ;i++)r=r-t(r)/e(r);return r}function h_(t,e){return t*Math.sqrt(1-e*e)}const d_=2e4;function VM(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<d_;)e+=n,r=t.next(e);return e>=d_?1/0:e}const mQ=["duration","bounce"],gQ=["stiffness","damping","mass"];function wA(t,e){return e.some(n=>t[n]!==void 0)}function yQ(t){let e={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...t};if(!wA(t,gQ)&&wA(t,mQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*fs(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:At.mass,stiffness:i,damping:s}}else{const n=dQ(t);e={...e,...n,mass:At.mass},e.isResolvedFromDuration=!0}return e}function FM(t=At.visualDuration,e=At.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:s},{stiffness:c,damping:d,mass:m,duration:g,velocity:y,isResolvedFromDuration:T}=yQ({...n,velocity:-is(n.velocity||0)}),S=y||0,I=d/(2*Math.sqrt(c*m)),x=a-s,k=is(Math.sqrt(c/m)),F=Math.abs(x)<5;r||(r=F?At.restSpeed.granular:At.restSpeed.default),i||(i=F?At.restDelta.granular:At.restDelta.default);let V;if(I<1){const j=h_(k,I);V=Y=>{const D=Math.exp(-I*k*Y);return a-D*((S+I*k*x)/j*Math.sin(j*Y)+x*Math.cos(j*Y))}}else if(I===1)V=j=>a-Math.exp(-k*j)*(x+(S+k*x)*j);else{const j=k*Math.sqrt(I*I-1);V=Y=>{const D=Math.exp(-I*k*Y),A=Math.min(j*Y,300);return a-D*((S+I*k*x)*Math.sinh(A)+j*x*Math.cosh(A))/j}}const z={calculatedDuration:T&&g||null,next:j=>{const Y=V(j);if(T)u.done=j>=g;else{let D=0;I<1&&(D=j===0?rs(S):LM(V,j,Y));const A=Math.abs(D)<=r,b=Math.abs(a-Y)<=i;u.done=A&&b}return u.value=u.done?a:Y,u},toString:()=>{const j=Math.min(VM(z),d_),Y=MM(D=>z.next(j*D).value,j,30);return j+"ms "+Y}};return z}function TA({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:c,restDelta:d=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},T=A=>u!==void 0&&A<u||c!==void 0&&A>c,S=A=>u===void 0?c:c===void 0||Math.abs(u-A)<Math.abs(c-A)?u:c;let I=n*e;const x=g+I,k=a===void 0?x:a(x);k!==x&&(I=k-g);const F=A=>-I*Math.exp(-A/r),V=A=>k+F(A),z=A=>{const b=F(A),E=V(A);y.done=Math.abs(b)<=d,y.value=y.done?k:E};let j,Y;const D=A=>{T(y.value)&&(j=A,Y=FM({keyframes:[y.value,S(y.value)],velocity:LM(V,A,y.value),damping:i,stiffness:s,restDelta:d,restSpeed:m}))};return D(0),{calculatedDuration:null,next:A=>{let b=!1;return!Y&&j===void 0&&(b=!0,z(A),D(A)),j!==void 0&&A>=j?Y.next(A-j):(!b&&z(A),y)}}}const vQ=vd(.42,0,1,1),_Q=vd(0,0,.58,1),$M=vd(.42,0,.58,1),wQ=t=>Array.isArray(t)&&typeof t[0]!="number",WT=t=>Array.isArray(t)&&typeof t[0]=="number",EA={linear:An,easeIn:vQ,easeInOut:$M,easeOut:_Q,circIn:LT,circInOut:gM,circOut:mM,backIn:OT,backInOut:fM,backOut:dM,anticipate:pM},SA=t=>{if(WT(t)){o_(t.length===4);const[e,n,r,i]=t;return vd(e,n,r,i)}else if(typeof t=="string")return o_(EA[t]!==void 0),EA[t];return t},TQ=(t,e)=>n=>e(t(n)),ss=(...t)=>t.reduce(TQ),wt=(t,e,n)=>t+(e-t)*n;function $v(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EQ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;i=$v(c,u,t+1/3),s=$v(c,u,t),a=$v(c,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function hm(t,e){return n=>n>0?e:t}const Bv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},SQ=[u_,ha,Ul],CQ=t=>SQ.find(e=>e.test(t));function CA(t){const e=CQ(t);if(!e)return!1;let n=e.parse(t);return e===Ul&&(n=EQ(n)),n}const IA=(t,e)=>{const n=CA(t),r=CA(e);if(!n||!r)return hm(t,e);const i={...n};return s=>(i.red=Bv(n.red,r.red,s),i.green=Bv(n.green,r.green,s),i.blue=Bv(n.blue,r.blue,s),i.alpha=wt(n.alpha,r.alpha,s),ha.transform(i))},f_=new Set(["none","hidden"]);function IQ(t,e){return f_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function PQ(t,e){return n=>wt(t,e,n)}function HT(t){return typeof t=="number"?PQ:typeof t=="string"?VT(t)?hm:Tn.test(t)?IA:RQ:Array.isArray(t)?BM:typeof t=="object"?Tn.test(t)?IA:AQ:hm}function BM(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>HT(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function AQ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=HT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function xQ(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],u=t.indexes[a][i[a]],c=(n=t.values[u])!==null&&n!==void 0?n:0;r[s]=c,i[a]++}return r}const RQ=(t,e)=>{const n=yo.createTransformer(e),r=Wh(t),i=Wh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?f_.has(t)&&!i.values.length||f_.has(e)&&!r.values.length?IQ(t,e):ss(BM(xQ(r,i),i.values),n):hm(t,e)};function UM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):HT(t)(t,e)}function kQ(t,e,n){const r=[],i=n||UM,s=t.length-1;for(let a=0;a<s;a++){let u=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||An:e;u=ss(c,u)}r.push(u)}return r}function bQ(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(o_(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=kQ(e,r,i),u=a.length,c=d=>{let m=0;if(u>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const g=_u(t[m],t[m+1],d);return a[m](g)};return n?d=>c(fs(t[0],t[s-1],d)):c}function DQ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_u(0,e,r);t.push(wt(n,1,i))}}function NQ(t){const e=[0];return DQ(e,t.length-1),e}function MQ(t,e){return t.map(n=>n*e)}function OQ(t,e){return t.map(()=>e||$M).splice(0,t.length-1)}function dm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=wQ(r)?r.map(SA):SA(r),s={done:!1,value:e[0]},a=MQ(n&&n.length===e.length?n:NQ(e),t),u=bQ(a,e,{ease:Array.isArray(i)?i:OQ(e,i)});return{calculatedDuration:t,next:c=>(s.value=u(c),s.done=c>=t,s)}}const LQ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>tt.update(e,!0),stop:()=>go(e),now:()=>hn.isProcessing?hn.timestamp:yi.now()}},VQ={decay:TA,inertia:TA,tween:dm,keyframes:dm,spring:FM},FQ=t=>t/100;class GT extends NM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||FT,u=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new a(s,u,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,u=zT(n)?n:VQ[n]||dm;let c,d;u!==dm&&typeof e[0]!="number"&&(c=ss(FQ,UM(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});s==="mirror"&&(d=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=VM(m));const{calculatedDuration:g}=m,y=g+i,T=y*(r+1)-i;return{generator:m,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:y,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:d,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return s.next(0);const{delay:y,repeat:T,repeatType:S,repeatDelay:I,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-y*(this.speed>=0?1:-1),F=this.speed>=0?k<0:k>m;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let V=this.currentTime,z=s;if(T){const A=Math.min(this.currentTime,m)/g;let b=Math.floor(A),E=A%1;!E&&A>=1&&(E=1),E===1&&b--,b=Math.min(b,T+1),!!(b%2)&&(S==="reverse"?(E=1-E,I&&(E-=I/g)):S==="mirror"&&(z=a)),V=fs(0,1,E)*g}const j=F?{done:!1,value:c[0]}:z.next(V);u&&(j.value=u(j.value));let{done:Y}=j;!F&&d!==null&&(Y=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return D&&i!==void 0&&(j.value=pg(c,this.options,i)),x&&x(j.value),D&&this.finish(),j}get duration(){const{resolved:e}=this;return e?is(e.calculatedDuration):0}get time(){return is(this.currentTime)}set time(e){e=rs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=is(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=LQ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const $Q=new Set(["opacity","clipPath","filter","transform"]);function KT(t){let e;return()=>(e===void 0&&(e=t()),e)}const BQ={linearEasing:void 0};function UQ(t,e){const n=KT(t);return()=>{var r;return(r=BQ[e])!==null&&r!==void 0?r:n()}}const fm=UQ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function jM(t){return!!(typeof t=="function"&&fm()||!t||typeof t=="string"&&(t in p_||fm())||WT(t)||Array.isArray(t)&&t.every(jM))}const Yc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,p_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yc([0,.65,.55,1]),circOut:Yc([.55,0,1,.45]),backIn:Yc([.31,.01,.66,-.59]),backOut:Yc([.33,1.53,.69,.99])};function zM(t,e){if(t)return typeof t=="function"&&fm()?MM(t,e):WT(t)?Yc(t):Array.isArray(t)?t.map(n=>zM(n,e)||p_.easeOut):p_[t]}function jQ(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:u="easeInOut",times:c}={}){const d={[e]:n};c&&(d.offset=c);const m=zM(u,i);return Array.isArray(m)&&(d.easing=m),t.animate(d,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function PA(t,e){t.timeline=e,t.onfinish=null}const zQ=KT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),pm=10,WQ=2e4;function HQ(t){return zT(t.type)||t.type==="spring"||!jM(t.ease)}function GQ(t,e){const n=new GT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<WQ;)r=n.sample(s),i.push(r.value),s+=pm;return{times:void 0,keyframes:i,duration:s-pm,ease:"linear"}}const WM={anticipate:pM,backInOut:fM,circInOut:gM};function KQ(t){return t in WM}class AA extends NM{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new DM(s,(a,u)=>this.onKeyframesResolved(a,u),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:a,type:u,motionValue:c,name:d,startTime:m}=this.options;if(!(!((r=c.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&fm()&&KQ(a)&&(a=WM[a]),HQ(this.options)){const{onComplete:y,onUpdate:T,motionValue:S,element:I,...x}=this.options,k=GQ(e,x);e=k.keyframes,e.length===1&&(e[1]=e[0]),i=k.duration,s=k.times,a=k.ease,u="keyframes"}const g=jQ(c.owner.current,d,e,{...this.options,duration:i,times:s,ease:a});return g.startTime=m??this.calcStartTime(),this.pendingTimeline?(PA(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:y}=this.options;c.set(pg(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:i,times:s,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return is(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return is(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=rs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return An;const{animation:r}=n;PA(r,e)}return An}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:m,onComplete:g,element:y,...T}=this.options,S=new GT({...T,keyframes:r,duration:i,type:s,ease:a,times:u,isGenerator:!0}),I=rs(this.time);d.setWithVelocity(S.sample(I-pm).value,S.sample(I).value,pm)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:u}=e;return zQ()&&r&&$Q.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&u!=="inertia"}}const qQ=KT(()=>window.ScrollTimeline!==void 0);class QQ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>qQ()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function YQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:c,elapsed:d,...m}){return!!Object.keys(m).length}const qT=(t,e,n,r={},i,s)=>a=>{const u=MT(r,t)||{},c=u.delay||r.delay||0;let{elapsed:d=0}=r;d=d-rs(c);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-d,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:s?void 0:i};YQ(u)||(m={...m,...Tq(t,m)}),m.duration&&(m.duration=rs(m.duration)),m.repeatDelay&&(m.repeatDelay=rs(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!s&&e.get()!==void 0){const y=pg(m.keyframes,u);if(y!==void 0)return tt.update(()=>{m.onUpdate(y),m.onComplete()}),new QQ([])}return!s&&AA.supports(m)?new AA(m):new GT(m)},XQ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),JQ=t=>s_(t)?t[t.length-1]||0:t;function QT(t,e){t.indexOf(e)===-1&&t.push(e)}function YT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class XT{constructor(){this.subscriptions=[]}add(e){return QT(this.subscriptions,e),()=>YT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xA=30,ZQ=t=>!isNaN(parseFloat(t));class eY{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=yi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=yi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new XT);const r=this.events[e].add(n);return e==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xA);return OM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hh(t,e){return new eY(t,e)}function tY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hh(n))}function nY(t,e){const n=fg(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const u=JQ(s[a]);tY(t,a,u)}}const JT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rY="framerAppearId",HM="data-"+JT(rY);function GM(t){return t.props[HM]}const In=t=>!!(t&&t.getVelocity);function iY(t){return!!(In(t)&&t.add)}function m_(t,e){const n=t.getValue("willChange");if(iY(n))return n.add(e)}function sY({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function KM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...c}=e;r&&(a=r);const d=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in c){const y=t.getValue(g,(s=t.latestValues[g])!==null&&s!==void 0?s:null),T=c[g];if(T===void 0||m&&sY(m,g))continue;const S={delay:n,...MT(a||{},g)};let I=!1;if(window.MotionHandoffAnimation){const k=GM(t);if(k){const F=window.MotionHandoffAnimation(k,g,tt);F!==null&&(S.startTime=F,I=!0)}}m_(t,g),y.start(qT(g,y,T,t.shouldReduceMotion&&ba.has(g)?{type:!1}:S,t,I));const x=y.animation;x&&d.push(x)}return u&&Promise.all(d).then(()=>{tt.update(()=>{u&&nY(t,u)})}),d}function g_(t,e,n={}){var r;const i=fg(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(KM(t,i,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:y}=s;return oY(t,e,m+d,g,y,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,m]=c==="beforeChildren"?[a,u]:[u,a];return d().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function oY(t,e,n=0,r=0,i=1,s){const a=[],u=(t.variantChildren.size-1)*r,c=i===1?(d=0)=>d*r:(d=0)=>u-d*r;return Array.from(t.variantChildren).sort(aY).forEach((d,m)=>{d.notify("AnimationStart",e),a.push(g_(d,e,{...s,delay:n+c(m)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function aY(t,e){return t.sortNodePosition(e)}function lY(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>g_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=g_(t,e,n);else{const i=typeof e=="function"?fg(t,e,n.custom):e;r=Promise.all(KM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const uY=NT.length;function qM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?qM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uY;n++){const r=NT[n],i=t.props[r];(jh(i)||i===!1)&&(e[r]=i)}return e}const cY=[...DT].reverse(),hY=DT.length;function dY(t){return e=>Promise.all(e.map(({animation:n,options:r})=>lY(t,n,r)))}function fY(t){let e=dY(t),n=RA(),r=!0;const i=c=>(d,m)=>{var g;const y=fg(t,m,c==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:T,transitionEnd:S,...I}=y;d={...d,...I,...S}}return d};function s(c){e=c(t)}function a(c){const{props:d}=t,m=qM(t.parent)||{},g=[],y=new Set;let T={},S=1/0;for(let x=0;x<hY;x++){const k=cY[x],F=n[k],V=d[k]!==void 0?d[k]:m[k],z=jh(V),j=k===c?F.isActive:null;j===!1&&(S=x);let Y=V===m[k]&&V!==d[k]&&z;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),F.protectedKeys={...T},!F.isActive&&j===null||!V&&!F.prevProp||dg(V)||typeof V=="boolean")continue;const D=pY(F.prevProp,V);let A=D||k===c&&F.isActive&&!Y&&z||x>S&&z,b=!1;const E=Array.isArray(V)?V:[V];let M=E.reduce(i(k),{});j===!1&&(M={});const{prevResolvedValues:$={}}=F,N={...$,...M},Re=pe=>{A=!0,y.has(pe)&&(b=!0,y.delete(pe)),F.needsAnimating[pe]=!0;const ne=t.getValue(pe);ne&&(ne.liveStyle=!1)};for(const pe in N){const ne=M[pe],ge=$[pe];if(T.hasOwnProperty(pe))continue;let le=!1;s_(ne)&&s_(ge)?le=!aM(ne,ge):le=ne!==ge,le?ne!=null?Re(pe):y.add(pe):ne!==void 0&&y.has(pe)?Re(pe):F.protectedKeys[pe]=!0}F.prevProp=V,F.prevResolvedValues=M,F.isActive&&(T={...T,...M}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(Y&&D)||b)&&g.push(...E.map(pe=>({animation:pe,options:{type:k}})))}if(y.size){const x={};y.forEach(k=>{const F=t.getBaseTarget(k),V=t.getValue(k);V&&(V.liveStyle=!0),x[k]=F??null}),g.push({animation:x})}let I=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(g):Promise.resolve()}function u(c,d){var m;if(n[c].isActive===d)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(y=>{var T;return(T=y.animationState)===null||T===void 0?void 0:T.setActive(c,d)}),n[c].isActive=d;const g=a(c);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>n,reset:()=>{n=RA(),r=!0}}}function pY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aM(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RA(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class So{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mY extends So{constructor(e){super(e),e.animationState||(e.animationState=fY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let gY=0;class yY extends So{constructor(){super(...arguments),this.id=gY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const vY={animation:{Feature:mY},exit:{Feature:yY}},QM=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function mg(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const _Y=t=>e=>QM(e)&&t(e,mg(e));function qi(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function os(t,e,n,r){return qi(t,e,_Y(n),r)}const kA=(t,e)=>Math.abs(t-e);function wY(t,e){const n=kA(t.x,e.x),r=kA(t.y,e.y);return Math.sqrt(n**2+r**2)}class YM{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=jv(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,T=wY(g.offset,{x:0,y:0})>=3;if(!y&&!T)return;const{point:S}=g,{timestamp:I}=hn;this.history.push({...S,timestamp:I});const{onStart:x,onMove:k}=this.handlers;y||(x&&x(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Uv(y,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:T,onSessionEnd:S,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=jv(g.type==="pointercancel"?this.lastMoveEventInfo:Uv(y,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,x),S&&S(g,x)},!QM(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=mg(e),u=Uv(a,this.transformPagePoint),{point:c}=u,{timestamp:d}=hn;this.history=[{...c,timestamp:d}];const{onSessionStart:m}=n;m&&m(e,jv(u,this.history)),this.removeListeners=ss(os(this.contextWindow,"pointermove",this.handlePointerMove),os(this.contextWindow,"pointerup",this.handlePointerUp),os(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),go(this.updatePoint)}}function Uv(t,e){return e?{point:e(t.point)}:t}function bA(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jv({point:t},e){return{point:t,delta:bA(t,XM(e)),offset:bA(t,TY(e)),velocity:EY(e,.1)}}function TY(t){return t[0]}function XM(t){return t[t.length-1]}function EY(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=XM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>rs(e)));)n--;if(!r)return{x:0,y:0};const s=is(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function JM(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const DA=JM("dragHorizontal"),NA=JM("dragVertical");function ZM(t){let e=!1;if(t==="y")e=NA();else if(t==="x")e=DA();else{const n=DA(),r=NA();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function eO(){const t=ZM(!0);return t?(t(),!1):!0}function jl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const tO=1e-4,SY=1-tO,CY=1+tO,nO=.01,IY=0-nO,PY=0+nO;function lr(t){return t.max-t.min}function AY(t,e,n){return Math.abs(t-e)<=n}function MA(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=lr(n)/lr(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SY&&t.scale<=CY||isNaN(t.scale))&&(t.scale=1),(t.translate>=IY&&t.translate<=PY||isNaN(t.translate))&&(t.translate=0)}function fh(t,e,n,r){MA(t.x,e.x,n.x,r?r.originX:void 0),MA(t.y,e.y,n.y,r?r.originY:void 0)}function OA(t,e,n){t.min=n.min+e.min,t.max=t.min+lr(e)}function xY(t,e,n){OA(t.x,e.x,n.x),OA(t.y,e.y,n.y)}function LA(t,e,n){t.min=e.min-n.min,t.max=t.min+lr(e)}function ph(t,e,n){LA(t.x,e.x,n.x),LA(t.y,e.y,n.y)}function RY(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function VA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kY(t,{top:e,left:n,bottom:r,right:i}){return{x:VA(t.x,n,i),y:VA(t.y,e,r)}}function FA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function bY(t,e){return{x:FA(t.x,e.x),y:FA(t.y,e.y)}}function DY(t,e){let n=.5;const r=lr(t),i=lr(e);return i>r?n=_u(e.min,e.max-r,t.min):r>i&&(n=_u(t.min,t.max-i,e.min)),fs(0,1,n)}function NY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const y_=.35;function MY(t=y_){return t===!1?t=0:t===!0&&(t=y_),{x:$A(t,"left","right"),y:$A(t,"top","bottom")}}function $A(t,e,n){return{min:BA(t,e),max:BA(t,n)}}function BA(t,e){return typeof t=="number"?t:t[e]||0}const UA=()=>({translate:0,scale:1,origin:0,originPoint:0}),zl=()=>({x:UA(),y:UA()}),jA=()=>({min:0,max:0}),Nt=()=>({x:jA(),y:jA()});function Er(t){return[t("x"),t("y")]}function rO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function OY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function zv(t){return t===void 0||t===1}function v_({scale:t,scaleX:e,scaleY:n}){return!zv(t)||!zv(e)||!zv(n)}function ia(t){return v_(t)||iO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iO(t){return zA(t.x)||zA(t.y)}function zA(t){return t&&t!=="0%"}function mm(t,e,n){const r=t-n,i=e*r;return n+i}function WA(t,e,n,r,i){return i!==void 0&&(t=mm(t,i,r)),mm(t,n,r)+e}function __(t,e=0,n=1,r,i){t.min=WA(t.min,e,n,r,i),t.max=WA(t.max,e,n,r,i)}function sO(t,{x:e,y:n}){__(t.x,e.translate,e.scale,e.originPoint),__(t.y,n.translate,n.scale,n.originPoint)}const HA=.999999999999,GA=1.0000000000001;function VY(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=n[u],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,sO(t,a)),r&&ia(s.latestValues)&&Hl(t,s.latestValues))}e.x<GA&&e.x>HA&&(e.x=1),e.y<GA&&e.y>HA&&(e.y=1)}function Wl(t,e){t.min=t.min+e,t.max=t.max+e}function KA(t,e,n,r,i=.5){const s=wt(t.min,t.max,i);__(t,e,n,s,r)}function Hl(t,e){KA(t.x,e.x,e.scaleX,e.scale,e.originX),KA(t.y,e.y,e.scaleY,e.scale,e.originY)}function oO(t,e){return rO(LY(t.getBoundingClientRect(),e))}function FY(t,e,n){const r=oO(t,n),{scroll:i}=e;return i&&(Wl(r.x,i.offset.x),Wl(r.y,i.offset.y)),r}const aO=({current:t})=>t?t.ownerDocument.defaultView:null,$Y=new WeakMap;class BY{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mg(m,"page").point)},s=(m,g)=>{const{drag:y,dragPropagation:T,onDragStart:S}=this.getProps();if(y&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ZM(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Er(x=>{let k=this.getAxisMotionValue(x).get()||0;if(gi.test(k)){const{projection:F}=this.visualElement;if(F&&F.layout){const V=F.layout.layoutBox[x];V&&(k=lr(V)*(parseFloat(k)/100))}}this.originPoint[x]=k}),S&&tt.postRender(()=>S(m,g)),m_(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:y,dragDirectionLock:T,onDirectionLock:S,onDrag:I}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:x}=g;if(T&&this.currentDirection===null){this.currentDirection=UY(x),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,x),this.updateAxis("y",g.point,x),this.visualElement.render(),I&&I(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Er(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new YM(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:aO(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&tt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!np(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=RY(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&jl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=kY(i.layoutBox,n):this.constraints=!1,this.elastic=MY(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Er(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=NY(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!jl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=FY(r,i.root,this.visualElement.getTransformPagePoint());let a=bY(i.layout.layoutBox,s);if(n){const u=n(OY(a));this.hasMutatedConstraints=!!u,u&&(a=rO(u))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},d=Er(m=>{if(!np(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const y=i?200:1e6,T=i?40:1e7,S={type:"inertia",velocity:r?e[m]:0,bounceStiffness:y,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,S)});return Promise.all(d).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return m_(this.visualElement,e),r.start(qT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Er(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Er(n=>{const{drag:r}=this.getProps();if(!np(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[n];s.set(e[n]-wt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Er(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const c=u.get();i[a]=DY({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Er(a=>{if(!np(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];u.set(wt(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;$Y.set(this.visualElement,this);const e=this.visualElement.current,n=os(e,"pointerdown",c=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();jl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tt.read(r);const a=qi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Er(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=y_,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function np(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jY extends So{constructor(e){super(e),this.removeGroupControls=An,this.removeListeners=An,this.controls=new BY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}unmount(){this.removeGroupControls(),this.removeListeners()}}const qA=t=>(e,n)=>{t&&tt.postRender(()=>t(e,n))};class zY extends So{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(e){this.session=new YM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:qA(e),onStart:qA(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&tt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=os(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ZT=O.createContext(null);function WY(){const t=O.useContext(ZT);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=O.useId();O.useEffect(()=>r(i),[]);const s=O.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const lO=O.createContext({}),uO=O.createContext({}),Ep={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=QA(t,e.target.x),r=QA(t,e.target.y);return`${n}% ${r}%`}},HY={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=yo.parse(t);if(i.length>5)return r;const s=yo.createTransformer(t),a=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=u,i[1+a]/=c;const d=wt(u,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),s(i)}},gm={};function GY(t){Object.assign(gm,t)}const{schedule:eE,cancel:gZ}=lM(queueMicrotask,!1);class KY extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;GY(qY),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ep.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||tt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),eE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cO(t){const[e,n]=WY(),r=O.useContext(lO);return Q.jsx(KY,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(uO),isPresent:e,safeToRemove:n})}const qY={borderRadius:{...Bc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bc,borderTopRightRadius:Bc,borderBottomLeftRadius:Bc,borderBottomRightRadius:Bc,boxShadow:HY},hO=["TopLeft","TopRight","BottomLeft","BottomRight"],QY=hO.length,YA=t=>typeof t=="string"?parseFloat(t):t,XA=t=>typeof t=="number"||Ee.test(t);function YY(t,e,n,r,i,s){i?(t.opacity=wt(0,n.opacity!==void 0?n.opacity:1,XY(r)),t.opacityExit=wt(e.opacity!==void 0?e.opacity:1,0,JY(r))):s&&(t.opacity=wt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<QY;a++){const u=`border${hO[a]}Radius`;let c=JA(e,u),d=JA(n,u);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||XA(c)===XA(d)?(t[u]=Math.max(wt(YA(c),YA(d),r),0),(gi.test(d)||gi.test(c))&&(t[u]+="%")):t[u]=d}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function JA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const XY=dO(0,.5,mM),JY=dO(.5,.95,An);function dO(t,e,n){return r=>r<t?0:r>e?1:n(_u(t,e,r))}function ZA(t,e){t.min=e.min,t.max=e.max}function wr(t,e){ZA(t.x,e.x),ZA(t.y,e.y)}function ex(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function tx(t,e,n,r,i){return t-=e,t=mm(t,1/n,r),i!==void 0&&(t=mm(t,1/i,r)),t}function ZY(t,e=0,n=1,r=.5,i,s=t,a=t){if(gi.test(e)&&(e=parseFloat(e),e=wt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=wt(s.min,s.max,r);t===s&&(u-=e),t.min=tx(t.min,e,n,u,i),t.max=tx(t.max,e,n,u,i)}function nx(t,e,[n,r,i],s,a){ZY(t,e[n],e[r],e[i],e.scale,s,a)}const eX=["x","scaleX","originX"],tX=["y","scaleY","originY"];function rx(t,e,n,r){nx(t.x,e,eX,n?n.x:void 0,r?r.x:void 0),nx(t.y,e,tX,n?n.y:void 0,r?r.y:void 0)}function ix(t){return t.translate===0&&t.scale===1}function fO(t){return ix(t.x)&&ix(t.y)}function sx(t,e){return t.min===e.min&&t.max===e.max}function nX(t,e){return sx(t.x,e.x)&&sx(t.y,e.y)}function ox(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pO(t,e){return ox(t.x,e.x)&&ox(t.y,e.y)}function ax(t){return lr(t.x)/lr(t.y)}function lx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rX{constructor(){this.members=[]}add(e){QT(this.members,e),e.scheduleRender()}remove(e){if(YT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iX(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:m,rotateX:g,rotateY:y,skewX:T,skewY:S}=n;d&&(r=`perspective(${d}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),T&&(r+=`skewX(${T}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const sX=(t,e)=>t.depth-e.depth;class oX{constructor(){this.children=[],this.isDirty=!1}add(e){QT(this.children,e),this.isDirty=!0}remove(e){YT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sX),this.isDirty=!1,this.children.forEach(e)}}function Sp(t){const e=In(t)?t.get():t;return XQ(e)?e.toValue():e}function aX(t,e){const n=yi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(go(r),t(s-e))};return tt.read(r,!0),()=>go(r)}function lX(t){return t instanceof SVGElement&&t.tagName!=="svg"}function uX(t,e,n){const r=In(t)?t:Hh(t);return r.start(qT("",r,e,n)),r.animation}const sa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Xc=typeof window<"u"&&window.MotionDebug!==void 0,Wv=["","X","Y","Z"],cX={visibility:"hidden"},ux=1e3;let hX=0;function Hv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=GM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mO(r)}function gO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e==null?void 0:e()){this.id=hX++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xc&&(sa.totalNodes=sa.resolvedTargetDeltas=sa.recalculatedProjection=0),this.nodes.forEach(pX),this.nodes.forEach(_X),this.nodes.forEach(wX),this.nodes.forEach(mX),Xc&&window.MotionDebug.record(sa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new oX)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new XT),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lX(a),this.instance=a;const{layoutId:c,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(d||c)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=aX(y,250),Ep.hasAnimatedSinceResize&&(Ep.hasAnimatedSinceResize=!1,this.nodes.forEach(hx))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:T,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||m.getDefaultTransition()||IX,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=m.getProps(),F=!this.targetLayout||!pO(this.targetLayout,S)||T,V=!y&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||V||y&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,V);const z={...MT(I,"layout"),onPlay:x,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else y||hx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,go(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TX),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cx);return}this.isUpdating||this.nodes.forEach(yX),this.isUpdating=!1,this.nodes.forEach(vX),this.nodes.forEach(dX),this.nodes.forEach(fX),this.clearAllSnapshots();const u=yi.now();hn.delta=fs(0,1e3/60,u-hn.timestamp),hn.timestamp=u,hn.isProcessing=!0,Lv.update.process(hn),Lv.preRender.process(hn),Lv.render.process(hn),hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gX),this.sharedNodes.forEach(EX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!fO(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;a&&(u||ia(this.latestValues)||m)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),PX(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return Nt();const c=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(AX))){const{scroll:m}=this.root;m&&(Wl(c.x,m.offset.x),Wl(c.y,m.offset.y))}return c}removeElementScroll(a){var u;const c=Nt();if(wr(c,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:g,options:y}=m;m!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&wr(c,a),Wl(c.x,g.offset.x),Wl(c.y,g.offset.y))}return c}applyTransform(a,u=!1){const c=Nt();wr(c,a);for(let d=0;d<this.path.length;d++){const m=this.path[d];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Hl(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ia(m.latestValues)&&Hl(c,m.latestValues)}return ia(this.latestValues)&&Hl(c,this.latestValues),c}removeTransform(a){const u=Nt();wr(u,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ia(d.latestValues))continue;v_(d.latestValues)&&d.updateSnapshot();const m=Nt(),g=d.measurePageBox();wr(m,g),rx(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return ia(this.latestValues)&&rx(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=hn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),ph(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wr(this.target,this.layout.layoutBox),sO(this.target,this.targetDelta)):wr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),ph(this.relativeTargetOrigin,this.target,T.target),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xc&&sa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v_(this.parent.latestValues)||iO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===hn.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;wr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,T=this.treeScale.y;VY(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Nt());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ex(this.prevProjectionDelta.x,this.projectionDelta.x),ex(this.prevProjectionDelta.y,this.projectionDelta.y)),fh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==T||!lx(this.projectionDelta.x,this.prevProjectionDelta.x)||!lx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Xc&&sa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zl(),this.projectionDelta=zl(),this.projectionDeltaWithTransform=zl()}setAnimationOrigin(a,u=!1){const c=this.snapshot,d=c?c.latestValues:{},m={...this.latestValues},g=zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Nt(),T=c?c.source:void 0,S=this.layout?this.layout.source:void 0,I=T!==S,x=this.getStack(),k=!x||x.members.length<=1,F=!!(I&&!k&&this.options.crossfade===!0&&!this.path.some(CX));this.animationProgress=0;let V;this.mixTargetDelta=z=>{const j=z/1e3;dx(g.x,a.x,j),dx(g.y,a.y,j),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ph(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SX(this.relativeTarget,this.relativeTargetOrigin,y,j),V&&nX(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Nt()),wr(V,this.relativeTarget)),I&&(this.animationValues=m,YY(m,d,this.latestValues,j,F,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(go(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Ep.hasAnimatedSinceResize=!0,this.currentAnimation=uX(0,ux,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ux),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:d,latestValues:m}=a;if(!(!u||!c||!d)){if(this!==a&&this.layout&&d&&yO(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Nt();const g=lr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const y=lr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+y}wr(u,c),Hl(u,m),fh(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new rX),this.sharedNodes.get(a).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const d={};c.z&&Hv("z",a,d,this.animationValues);for(let m=0;m<Wv.length;m++)Hv(`rotate${Wv[m]}`,a,d,this.animationValues),Hv(`skew${Wv[m]}`,a,d,this.animationValues);a.render();for(const m in d)a.setStaticValue(m,d[m]),this.animationValues&&(this.animationValues[m]=d[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cX;const d={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Sp(a==null?void 0:a.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none",d;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Sp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ia(this.latestValues)&&(I.transform=m?m({},""):"none",this.hasProjected=!1),I}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),d.transform=iX(this.projectionDeltaWithTransform,this.treeScale,y),m&&(d.transform=m(y,d.transform));const{x:T,y:S}=this.projectionDelta;d.transformOrigin=`${T.origin*100}% ${S.origin*100}% 0`,g.animationValues?d.opacity=g===this?(c=(u=y.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const I in gm){if(y[I]===void 0)continue;const{correct:x,applyTo:k}=gm[I],F=d.transform==="none"?y[I]:x(y[I],g);if(k){const V=k.length;for(let z=0;z<V;z++)d[k[z]]=F}else d[I]=F}return this.options.layoutId&&(d.pointerEvents=g===this?Sp(a==null?void 0:a.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(cx),this.root.sharedNodes.clear()}}}function dX(t){t.updateLayout()}function fX(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Er(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=lr(y);y.min=r[g].min,y.max=y.min+T}):yO(s,n.layoutBox,r)&&Er(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=lr(r[g]);y.max=y.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=zl();fh(u,r,n.layoutBox);const c=zl();a?fh(c,t.applyTransform(i,!0),n.measuredBox):fh(c,r,n.layoutBox);const d=!fO(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:T}=g;if(y&&T){const S=Nt();ph(S,n.layoutBox,y.layoutBox);const I=Nt();ph(I,r,T.layoutBox),pO(S,I)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:d,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function pX(t){Xc&&sa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function gX(t){t.clearSnapshot()}function cx(t){t.clearMeasurements()}function yX(t){t.isLayoutDirty=!1}function vX(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function _X(t){t.resolveTargetDelta()}function wX(t){t.calcProjection()}function TX(t){t.resetSkewAndRotation()}function EX(t){t.removeLeadSnapshot()}function dx(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function fx(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function SX(t,e,n,r){fx(t.x,e.x,n.x,r),fx(t.y,e.y,n.y,r)}function CX(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IX={duration:.45,ease:[.4,0,.1,1]},px=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),mx=px("applewebkit/")&&!px("chrome/")?Math.round:An;function gx(t){t.min=mx(t.min),t.max=mx(t.max)}function PX(t){gx(t.x),gx(t.y)}function yO(t,e,n){return t==="position"||t==="preserve-aspect"&&!AY(ax(e),ax(n),.2)}function AX(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const xX=gO({attachResizeListener:(t,e)=>qi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gv={current:void 0},vO=gO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gv.current){const t=new xX({});t.mount(window),t.setOptions({layoutScroll:!0}),Gv.current=t}return Gv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),RX={pan:{Feature:zY},drag:{Feature:jY,ProjectionNode:vO,MeasureLayout:cO}};function yx(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,a)=>{if(s.pointerType==="touch"||eO())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e);const c=u[r];c&&tt.postRender(()=>c(s,a))};return os(t.current,n,i,{passive:!t.getProps()[r]})}class kX extends So{mount(){this.unmount=ss(yx(this.node,!0),yx(this.node,!1))}unmount(){}}class bX extends So{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ss(qi(this.node.current,"focus",()=>this.onFocus()),qi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _O=(t,e)=>e?t===e?!0:_O(t,e.parentElement):!1;function Kv(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,mg(n))}class DX extends So{constructor(){super(...arguments),this.removeStartListeners=An,this.removeEndListeners=An,this.removeAccessibleListeners=An,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=os(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:m,globalTapTarget:g}=this.node.getProps(),y=!g&&!_O(this.node.current,u.target)?m:d;y&&tt.update(()=>y(u,c))},{passive:!(r.onTap||r.onPointerUp)}),a=os(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ss(s,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Kv("up",(c,d)=>{const{onTap:m}=this.node.getProps();m&&tt.postRender(()=>m(c,d))})};this.removeEndListeners(),this.removeEndListeners=qi(this.node.current,"keyup",a),Kv("down",(u,c)=>{this.startPress(u,c)})},n=qi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Kv("cancel",(s,a)=>this.cancelPress(s,a))},i=qi(this.node.current,"blur",r);this.removeAccessibleListeners=ss(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&tt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!eO()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&tt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=os(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=qi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ss(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const w_=new WeakMap,qv=new WeakMap,NX=t=>{const e=w_.get(t.target);e&&e(t)},MX=t=>{t.forEach(NX)};function OX({root:t,...e}){const n=t||document;qv.has(n)||qv.set(n,{});const r=qv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(MX,{root:t,...e})),r[i]}function LX(t,e,n){const r=OX(e);return w_.set(t,n),r.observe(t),()=>{w_.delete(t),r.unobserve(t)}}const VX={some:0,all:1};class FX extends So{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:VX[i]},u=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=d?m:g;y&&y(c)};return LX(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($X(e,n))&&this.startObserver()}unmount(){}}function $X({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const BX={inView:{Feature:FX},tap:{Feature:DX},focus:{Feature:bX},hover:{Feature:kX}},UX={layout:{ProjectionNode:vO,MeasureLayout:cO}},wO=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),gg=O.createContext({}),tE=typeof window<"u",jX=tE?O.useLayoutEffect:O.useEffect,TO=O.createContext({strict:!1});function zX(t,e,n,r,i){var s,a;const{visualElement:u}=O.useContext(gg),c=O.useContext(TO),d=O.useContext(ZT),m=O.useContext(wO).reducedMotion,g=O.useRef();r=r||c.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:u,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,T=O.useContext(uO);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&WX(g.current,n,i,T);const S=O.useRef(!1);O.useInsertionEffect(()=>{y&&S.current&&y.update(n,d)});const I=n[HM],x=O.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,I)));return jX(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),eE.render(y.render),x.current&&y.animationState&&y.animationState.animateChanges())}),O.useEffect(()=>{y&&(!x.current&&y.animationState&&y.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,I)}),x.current=!1))}),y}function WX(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:u,layoutScroll:c,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EO(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||u&&jl(u),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:d})}function EO(t){if(t)return t.options.allowProjection!==!1?t.projection:EO(t.parent)}function HX(t,e,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):jl(n)&&(n.current=r))},[e])}function yg(t){return dg(t.animate)||NT.some(e=>jh(t[e]))}function SO(t){return!!(yg(t)||t.variants)}function GX(t,e){if(yg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jh(n)?n:void 0,animate:jh(r)?r:void 0}}return t.inherit!==!1?e:{}}function KX(t){const{initial:e,animate:n}=GX(t,O.useContext(gg));return O.useMemo(()=>({initial:e,animate:n}),[vx(e),vx(n)])}function vx(t){return Array.isArray(t)?t.join(" "):t}const _x={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wu={};for(const t in _x)wu[t]={isEnabled:e=>_x[t].some(n=>!!e[n])};function qX(t){for(const e in t)wu[e]={...wu[e],...t[e]}}const QX=Symbol.for("motionComponentSymbol");function YX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&qX(t);function s(u,c){let d;const m={...O.useContext(wO),...u,layoutId:XX(u)},{isStatic:g}=m,y=KX(u),T=r(u,g);if(!g&&tE){JX();const S=ZX(m);d=S.MeasureLayout,y.visualElement=zX(i,T,m,e,S.ProjectionNode)}return Q.jsxs(gg.Provider,{value:y,children:[d&&y.visualElement?Q.jsx(d,{visualElement:y.visualElement,...m}):null,n(i,u,HX(T,y.visualElement,c),T,g,y.visualElement)]})}const a=O.forwardRef(s);return a[QX]=i,a}function XX({layoutId:t}){const e=O.useContext(lO).id;return e&&t!==void 0?e+"-"+t:t}function JX(t,e){O.useContext(TO).strict}function ZX(t){const{drag:e,layout:n}=wu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const eJ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nE(t){return typeof t!="string"||t.includes("-")?!1:!!(eJ.indexOf(t)>-1||/[A-Z]/u.test(t))}function CO(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const IO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PO(t,e,n,r){CO(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(IO.has(i)?i:JT(i),e.attrs[i])}function AO(t,{layout:e,layoutId:n}){return ba.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gm[t]||t==="opacity")}function rE(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(In(i[a])||e.style&&In(e.style[a])||AO(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function xO(t,e,n){const r=rE(t,e,n);for(const i in t)if(In(t[i])||In(e[i])){const s=yd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function tJ(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}function nJ({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const a={latestValues:rJ(r,i,s,t),renderState:e()};return n&&(a.mount=u=>n(r,u,a)),a}const RO=t=>(e,n)=>{const r=O.useContext(gg),i=O.useContext(ZT),s=()=>nJ(t,e,r,i);return n?s():tJ(s)};function rJ(t,e,n,r){const i={},s=r(t,{});for(const y in s)i[y]=Sp(s[y]);let{initial:a,animate:u}=t;const c=yg(t),d=SO(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!dg(g)){const y=Array.isArray(g)?g:[g];for(let T=0;T<y.length;T++){const S=bT(t,y[T]);if(S){const{transitionEnd:I,transition:x,...k}=S;for(const F in k){let V=k[F];if(Array.isArray(V)){const z=m?V.length-1:0;V=V[z]}V!==null&&(i[F]=V)}for(const F in I)i[F]=I[F]}}}return i}const iE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),kO=()=>({...iE(),attrs:{}}),bO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,iJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sJ=yd.length;function oJ(t,e,n){let r="",i=!0;for(let s=0;s<sJ;s++){const a=yd[s],u=t[a];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(a.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const d=bO(u,UT[a]);if(!c){i=!1;const m=iJ[a]||a;r+=`${m}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function sE(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,u=!1;for(const c in e){const d=e[c];if(ba.has(c)){a=!0;continue}else if(wM(c)){i[c]=d;continue}else{const m=bO(d,UT[c]);c.startsWith("origin")?(u=!0,s[c]=m):r[c]=m}}if(e.transform||(a||n?r.transform=oJ(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:d="50%",originZ:m=0}=s;r.transformOrigin=`${c} ${d} ${m}`}}function wx(t,e,n){return typeof t=="string"?t:Ee.transform(e+n*t)}function aJ(t,e,n){const r=wx(e,t.x,t.width),i=wx(n,t.y,t.height);return`${r} ${i}`}const lJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},uJ={offset:"strokeDashoffset",array:"strokeDasharray"};function cJ(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?lJ:uJ;t[s.offset]=Ee.transform(-r);const a=Ee.transform(e),u=Ee.transform(n);t[s.array]=`${a} ${u}`}function oE(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...d},m,g){if(sE(t,d,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:T,dimensions:S}=t;y.transform&&(S&&(T.transform=y.transform),delete y.transform),S&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=aJ(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),a!==void 0&&cJ(y,a,u,c,!1)}const aE=t=>typeof t=="string"&&t.toLowerCase()==="svg",hJ={useVisualState:RO({scrapeMotionValuesFromProps:xO,createRenderState:kO,onMount:(t,e,{renderState:n,latestValues:r})=>{tt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),tt.render(()=>{oE(n,r,aE(e.tagName),t.transformTemplate),PO(e,n)})}})},dJ={useVisualState:RO({scrapeMotionValuesFromProps:rE,createRenderState:iE})};function DO(t,e,n){for(const r in e)!In(e[r])&&!AO(r,n)&&(t[r]=e[r])}function fJ({transformTemplate:t},e){return O.useMemo(()=>{const n=iE();return sE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function pJ(t,e){const n=t.style||{},r={};return DO(r,n,t),Object.assign(r,fJ(t,e)),r}function mJ(t,e){const n={},r=pJ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const gJ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ym(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gJ.has(t)}let NO=t=>!ym(t);function yJ(t){t&&(NO=e=>e.startsWith("on")?!ym(e):t(e))}try{yJ(require("@emotion/is-prop-valid").default)}catch{}function vJ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NO(i)||n===!0&&ym(i)||!e&&!ym(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function _J(t,e,n,r){const i=O.useMemo(()=>{const s=kO();return oE(s,e,aE(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};DO(s,t.style,t),i.style={...s,...i.style}}return i}function wJ(t=!1){return(n,r,i,{latestValues:s},a)=>{const c=(nE(n)?_J:mJ)(r,s,a,n),d=vJ(r,typeof n=="string",t),m=n!==O.Fragment?{...d,...c,ref:i}:{},{children:g}=r,y=O.useMemo(()=>In(g)?g.get():g,[g]);return O.createElement(n,{...m,children:y})}}function TJ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...nE(r)?hJ:dJ,preloadedFeatures:t,useRender:wJ(i),createVisualElement:e,Component:r};return YX(a)}}const T_={current:null},MO={current:!1};function EJ(){if(MO.current=!0,!!tE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>T_.current=t.matches;t.addListener(e),e()}else T_.current=!1}function SJ(t,e,n){for(const r in e){const i=e[r],s=n[r];if(In(i))t.addValue(r,i);else if(In(s))t.addValue(r,Hh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Hh(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Tx=new WeakMap,CJ=[...SM,Tn,yo],IJ=t=>CJ.find(EM(t)),Ex=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=yi.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,tt.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=yg(n),this.isVariantNode=SO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const T=g[y];c[y]!==void 0&&In(T)&&T.set(c[y],!1)}}mount(e){this.current=e,Tx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),MO.current||EJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Tx.delete(this.current),this.projection&&this.projection.unmount(),go(this.notifyUpdate),go(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ba.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wu){const n=wu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ex.length;r++){const i=Ex[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=SJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Hh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(vM(i)||yM(i))?i=parseFloat(i):!IJ(i)&&yo.test(n)&&(i=bM(e,n)),this.setBaseTarget(e,In(i)?i.get():i)),In(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=bT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!In(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new XT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class OO extends PJ{constructor(){super(...arguments),this.KeyframeResolver=DM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function AJ(t){return window.getComputedStyle(t)}class xJ extends OO{constructor(){super(...arguments),this.type="html",this.renderInstance=CO}readValueFromInstance(e,n){if(ba.has(n)){const r=jT(n);return r&&r.default||0}else{const r=AJ(e),i=(wM(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return oO(e,n)}build(e,n,r){sE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return rE(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;In(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class RJ extends OO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ba.has(n)){const r=jT(n);return r&&r.default||0}return n=IO.has(n)?n:JT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xO(e,n,r)}build(e,n,r){oE(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){PO(e,n,r,i)}mount(e){this.isSVGTag=aE(e.tagName),super.mount(e)}}const kJ=(t,e)=>nE(t)?new RJ(e):new xJ(e,{allowProjection:t!==O.Fragment}),bJ=TJ({...vY,...BX,...RX,...UX},kJ),lE=gq(bJ);function DJ({children:t,onclick:e}){return Q.jsx(lE.div,{className:"backdrop",onClick:e,initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(5px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.3},layout:!0,children:t})}const NJ=Mu(Q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function LO({handleClose:t,text:e}){return Q.jsx(DJ,{onClick:t,children:Q.jsxs(lE.div,{className:"modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[Q.jsx("div",{onClick:n=>n.stopPropagation(),className:"modal-top",children:Q.jsx("p",{children:e})}),Q.jsx("div",{className:"modal-bottom",children:Q.jsx(yu,{onClick:t,children:Q.jsx(NJ,{})})})]})})}LO.propTypes={handleClose:Bl.func.isRequired,text:Bl.string.isRequired};function uE({name:t,time:e,note:n,onAfterClick:r}){const[i,s]=O.useState(!1),a=()=>s(!1),u=()=>s(!0);return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"analyze",children:[n?Q.jsx("div",{className:"analyze-before",onClick:()=>i?a():u(),children:Q.jsx(fq,{})}):Q.jsx("div",{className:"analyze-before-deactivated",children:Q.jsx(pq,{})}),Q.jsx("div",{className:"analyze-content",children:`${t} | ${e}`}),Q.jsx("div",{className:"analyze-after",onClick:r,children:Q.jsx(mq,{})})]}),Q.jsx(_T,{initial:!1,mode:"wait",onExitComplete:()=>null,children:i&&Q.jsx(Cr.div,{exit:{opacity:0},children:Q.jsx(LO,{modalOpen:i,handleClose:a,text:n})},"modal")})]})}uE.defaultProps={name:"Default Name",time:"00:00",onAfterClick:()=>{}};uE.propTypes={name:Bl.string.isRequired,time:Bl.string.isRequired,note:Bl.string.isRequired,onAfterClick:Bl.func};function MJ({analyzeDates:t}){const[e,n]=O.useState(new Date),[r,i]=O.useState(1),s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=(T,S)=>new Date(T,S+1,0).getDate(),u=T=>{n(S=>{const I=new Date(S.getFullYear(),S.getMonth()+T,1);return i(1),I})},c=e.getFullYear(),d=e.getMonth(),m=a(c,d),g=T=>{i(T);const S=`${T}/${d+1}/${c}`;localStorage.setItem("currentDate",S),console.log(`Selected date: ${S}`)};O.useEffect(()=>{const T=`1/${d+1}/${c}`;localStorage.setItem("currentDate",T),console.log(`Default selected date: ${T}`)},[e]);const y=T=>{const S=`${T}/${d+1}/${c}`;return t.includes(S)};return Q.jsx(Q.Fragment,{children:Q.jsxs("div",{className:"calendar-box",children:[Q.jsxs("div",{className:"date-part",children:[Q.jsx(yu,{onClick:()=>u(-1),type:"primary",children:"<"}),Q.jsxs("div",{className:"dates-container",children:[Q.jsx("p",{children:s[d]}),Q.jsx("p",{style:{fontSize:"large",fontWeight:"300",color:"#C7C7C7"},children:c})]}),Q.jsx(yu,{onClick:()=>u(1),type:"primary",children:">"})]}),Q.jsx("div",{className:"cells-part",children:Array.from({length:m},(T,S)=>{const I=S+1;return Q.jsx("div",{onClick:()=>g(I),className:`cells ${r===I?"selected":y(I)?"highlighted":""}`,children:I},I)})})]})})}function OJ(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),[a,u]=O.useState([]),c=qh(),d={"18-25":["Physical Exam","CBC","Blood Glucose","Lipid Profile","Dental Check-up","Eye Exam","STI Screening","Pap Smear (Women)","Skin Check","Vaccinations (HPV, Tdap)"],"25-30":["Physical Exam","CBC","Blood Glucose","Lipid Profile","Thyroid Test","STI Screening","Pap Smear","Mental Health","Bone Health","Lifestyle Assessment"],"30-45":["Physical Exam","Lipid Profile","Blood Glucose","Liver Function","Cancer Screening","Eye Exam","Dental Check-up","Pap Smear/HPV Test","Mental Health","Skin Cancer Screening"],"45-60":["Physical Exam","Lipid Profile","Blood Glucose/HbA1c","Kidney Function","Colonoscopy","Mammogram","PSA Test (Men)","Bone Density Scan","Vision and Hearing Tests","Vaccinations","Heart Screening","Mental Health","Weight and Nutrition"]},m=async(S,I,x=null)=>{const k=localStorage.getItem("userId");if(!k){alert("You must be logged in!"),c("/");return}const F=u6(rD,`users/${k}/notes/${I}`);try{if(S==="get"){const V=await h6(F);if(V.exists()){const z=Object.entries(V.val()).map(([j,Y])=>({id:j,...Y}));return u(z),z}}else S==="set"?(await tD(F,x),g()):S==="remove"&&(await c6(F),u(V=>V.filter(z=>z.id!==I)))}catch(V){console.error(`Error with Firebase operation (${S}): `,V),alert("Failed to perform operation. Please try again.")}};O.useEffect(()=>{g()},[]);const g=async()=>{const S=await m("get","");S&&S.forEach(I=>{console.log(`Analyze date: ${I.date}`)})},y=async()=>{if(!n||!i){alert("Please fill in all fields.");return}const S={note:t,dropdownValue:n,time:i,date:localStorage.getItem("currentDate")};await m("set",`${Date.now()}`,S),e(""),r(""),s("")},T=async S=>{await m("remove",S)};return Q.jsxs(Q.Fragment,{children:[Q.jsx(MJ,{analyzeDates:a.map(S=>S.date)}),Q.jsxs("div",{className:"analyzes-setter",children:[Q.jsx("p",{className:"section-header",children:"Analyzes list:"}),Q.jsx("div",{className:"analyzes-container",children:Q.jsx("div",{className:"analyze-centered",children:Q.jsx(_T,{children:a.map(S=>Q.jsxs(Cr.div,{layout:!0,initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{duration:.05},children:[Q.jsx("p",{style:{textAlign:"center",padding:"2px",color:"var(--selectableBorder)"},children:S.date}),Q.jsx(uE,{name:S.dropdownValue,time:S.time,note:S.note,onAfterClick:()=>T(S.id)})]},S.id))})})}),Q.jsxs("div",{className:"note-container",children:[Q.jsx("p",{className:"section-header",children:"Add new analyze to selected day:"}),Q.jsx("input",{type:"text",className:"note",placeholder:"Add a note for selected day here (optional)",value:t,onChange:S=>e(S.target.value)})]}),Q.jsxs("div",{className:"bottom-container",children:[Q.jsxs("select",{className:"dropdown",value:n,onChange:S=>r(S.target.value),children:[Q.jsx("option",{value:"",children:"Choose your check-up"}),Object.keys(d).map(S=>Q.jsx("optgroup",{label:`Age ${S}`,children:d[S].map(I=>Q.jsx("option",{value:I,children:I},I))}))]}),Q.jsx("input",{className:"time-setter",type:"time",id:"appt",name:"appt",min:"09:00",max:"18:00",requirede:!0,value:i,onChange:S=>s(S.target.value)}),Q.jsx(ya,{type:"secondary",onClick:y,children:"Add"})]})]})]})}const LJ=Mu(Q.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");function VJ(){const t=qh();O.useEffect(()=>{(async()=>{try{onAuthStateChanged(cu,async r=>{if(r){const i=XU(rD,"users",r.uid);(await lj(i)).exists()||(alert("User not found!"),t("/"))}else t("/")})}catch(r){console.error("Error fetching user data:",r)}})()},[t]);const e=async()=>{try{await cu.signOut(),t("/")}catch(n){console.error("Error signing out:",n)}};return Q.jsx("div",{className:"box-container",children:Q.jsxs(lE.div,{className:"box-container-flex",initial:{y:-50},animate:{y:0},transition:{type:"spring",damping:10,mass:.75,stiffness:100},children:[Q.jsx(OJ,{}),Q.jsx(yu,{type:"alert",onClick:e,children:Q.jsx(LJ,{})})]})})}YL.createRoot(document.getElementById("root")).render(Q.jsx(O.StrictMode,{children:Q.jsx(h2,{children:Q.jsxs(UV,{children:[Q.jsx(Yv,{path:"/",element:Q.jsx(oM,{})}),Q.jsx(Yv,{path:"/reminder",element:Q.jsx(VJ,{})})]})})}));
